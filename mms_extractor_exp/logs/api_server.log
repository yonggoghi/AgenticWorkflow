2025-09-10 11:09:22,480 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 11:09:22,480 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 11:09:22,480 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 11:09:22,480 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 11:09:22,480 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 11:09:22,508 - mms_extractor - INFO - Using device: mps
2025-09-10 11:09:22,508 - mms_extractor - INFO - _initialize_device 실행완료: 0.03초
2025-09-10 11:09:22,508 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 11:09:22,508 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 11:09:22,508 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 11:09:22,509 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 11:09:22,509 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 11:09:24,111 - mms_extractor - INFO - Model loaded on mps
2025-09-10 11:09:24,111 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.60초
2025-09-10 11:09:24,609 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 11:09:24,609 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.50초
2025-09-10 11:09:24,609 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:24,609 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 11:09:24,609 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:24,609 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 11:09:24,609 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 11:09:24,609 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 11:09:24,609 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 11:09:24,609 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 11:09:24,736 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 11:09:24,736 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 11:09:24,746 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 11:09:24,751 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 11:09:24,752 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 11:09:24,757 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 11:09:24,757 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 11:09:24,758 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 11:09:24,758 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 11:09:24,758 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 11:09:24,758 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 11:09:24,758 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 11:09:24,762 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 11:09:24,763 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 11:09:24,763 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 11:09:25,130 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 11:09:25,132 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 11:09:25,132 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 11:09:25,132 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 11:09:25,132 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 11:09:25,134 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 11:09:25,134 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 11:09:25,134 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 11:09:25,134 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 11:09:25,142 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 11:09:25,146 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 11:09:25,146 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 11:09:25,199 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 11:09:25,200 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 11:09:25,200 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 11:09:25,204 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 11:09:25,204 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 11:09:27,164 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 11:09:27,165 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 11:09:27,165 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 11:09:27,702 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 11:09:27,702 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 11:09:27,702 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:27,702 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 11:09:27,702 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:27,702 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 11:09:27,702 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 11:09:27,702 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 11:09:27,702 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 11:09:27,702 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 11:09:27,708 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 11:09:27,716 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 11:09:27,720 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 11:09:27,720 - mms_extractor - INFO - _load_data 실행완료: 3.11초
2025-09-10 11:09:27,720 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 11:09:27,720 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 11:09:27,720 - __main__ - INFO - 파싱된 인자: host=127.0.0.1, port=8081, debug=False
2025-09-10 11:09:27,720 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 11:09:27,721 - __main__ - INFO - MMS 추출기 API 서버를 127.0.0.1:8081에서 시작합니다
2025-09-10 11:09:27,721 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 11:09:27,721 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 11:09:27,721 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 11:09:27,721 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 11:09:27,721 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 11:09:27,721 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 11:09:27,729 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8081
2025-09-10 11:09:27,729 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-10 11:09:39,167 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-10 11:09:39,167 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-10 11:09:39,167 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-10 11:09:39,167 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-10 11:09:39,167 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-10 11:09:39,167 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:39,167 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-10 11:09:39,167 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:39,168 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-10 11:09:39,168 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-10 11:09:39,168 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-10 11:09:39,168 - mms_extractor - INFO - 데이터 소스: local
2025-09-10 11:09:39,168 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-10 11:09:39,168 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-10 11:09:39,168 - mms_extractor - INFO - LLM 모델: ax
2025-09-10 11:09:39,168 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-10 11:09:39,168 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-10 11:09:39,168 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-10 11:09:39,168 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-10 11:09:39,168 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-10 11:09:39,174 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-10 11:09:39,741 - mms_extractor - INFO - 분할된 문장 수: 14개
2025-09-10 11:09:39,741 - mms_extractor - INFO - 필터링된 문장들: ['광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', ' 토 혜택 ', '만 13 고객이라면']...
2025-09-10 11:09:39,743 - mms_extractor - INFO - 전체 토큰 수: 134개
2025-09-10 11:09:39,743 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '0 day', '광고', '0 day', '베어유', '에이닷', '시크릿', '이벤트', '에이닷', '쿠폰', '에이닷이빵쏜닷', '뚜레쥬르', '데일리', '쿠폰', '시크릿', '수신거부']
2025-09-10 11:09:39,743 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['데일리', '베어유', '뚜레쥬르', '시크릿', '0 day', '에이닷이빵쏜닷']
2025-09-10 11:09:39,743 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-10 11:09:47,776 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (14323, 3)
2025-09-10 11:09:47,777 - mms_extractor - INFO - 퍼지 매칭 성공: 14323개 결과
2025-09-10 11:09:47,779 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'Galaxy 탭 S6', 'sim': 0.42105263157894735}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'galaxy 탭 S6', 'sim': 0.42105263157894735}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '특별한혜택충전 개편', 'sim': 0.4}]
2025-09-10 11:09:47,779 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-10 11:09:47,896 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (14323, 3)
2025-09-10 11:09:47,897 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'Galaxy 탭 S6', 'sim': 0.2909090909090909}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'galaxy 탭 S6', 'sim': 0.2909090909090909}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '특별한혜택충전 개편', 'sim': 0.24}]
2025-09-10 11:09:47,897 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-10 11:09:47,901 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 11개
2025-09-10 11:09:47,907 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-10 11:09:47,907 - mms_extractor - INFO - 통합된 후보 아이템 수: 15개
2025-09-10 11:09:47,911 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:09:47,916 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-10 11:09:47,916 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '0 day', 'item_id': ['9301']}, {'item_nm': 'CU(0 day)', 'item_id': ['V861']}, {'item_nm': 'LTE 혜택 안내', 'item_id': ['NA00004316']}]
2025-09-10 11:09:47,916 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 8.75초
2025-09-10 11:09:47,917 - mms_extractor - INFO - 추출된 후보 엔티티: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:09:47,917 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-10 11:09:47,917 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-10 11:09:49,255 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-10 11:09:49,255 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-10 11:09:49,255 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-10 11:09:49,255 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-10 11:09:49,255 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-10 11:09:49,255 - mms_extractor - INFO - 후보 아이템 리스트: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:09:49,255 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-10 11:09:49,255 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-10 11:09:49,255 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '0 day', 'item_id': ['9301']}, {'item_nm': 'CU(0 day)', 'item_id': ['V861']}]
2025-09-10 11:09:49,255 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-10 11:09:49,255 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-10 11:09:49,256 - mms_extractor - INFO - 구성된 프롬프트 길이: 6217 문자
2025-09-10 11:09:49,256 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-10 11:09:49,256 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6217)
2025-09-10 11:09:49,256 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-10 11:09:49,256 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-10 11:09:56,131 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:09:56,138 - mms_extractor - INFO - LLM 응답 길이: 942 문자
2025-09-10 11:09:56,138 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도",
        "웹/앱 접속 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action"...
2025-09-10 11:09:56,138 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-10 11:09:56,139 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-10 11:09:56,139 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-10 11:09:56,139 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도', '웹/앱 접속 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-10 11:09:56,139 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-10 11:09:56,139 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-10 11:09:56,404 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3118)
2025-09-10 11:09:56,404 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-10 11:09:56,404 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-10 11:09:57,179 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:09:58,130 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.99초
2025-09-10 11:09:58,144 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-10 11:09:58,144 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:58,144 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-10 11:09:58,144 - mms_extractor - INFO - ============================================================
2025-09-10 11:09:58,144 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-10 11:09:58,144 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도', '웹/앱 접속 유도']
2025-09-10 11:09:58,144 - mms_extractor - INFO - 상품 수: 4개
2025-09-10 11:09:58,144 - mms_extractor - INFO - 채널 수: 4개
2025-09-10 11:09:58,144 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-10 11:09:58,145 - mms_extractor - INFO - process_message 실행완료: 18.98초
2025-09-10 11:09:58,145 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-10 11:09:58,145 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-10 11:09:58,145 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-10 11:09:58,145 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x129a067b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x129a06b10> root_client=<openai.OpenAI object at 0x129a1de10> root_async_client=<openai.AsyncOpenAI object at 0x129a068d0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-10 11:09:58,145 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-10 11:09:58,145 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-10 11:10:15,008 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1824자
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 두 가지 주요 프로모션을 안내하고 있습니다. 첫 번째는 만 13~34세 고객을 대상으로 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하는 이벤트입니다. 두 번째는 에이닷 T 멤버십 쿠폰함에 특정 시크릿코드('에이닷이빵쏜닷')를 입력하면 뚜레쥬...
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-10 11:10:15,009 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-10 11:10:15,010 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-10 11:10:15,010 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-10 11:10:15,010 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-10 11:10:15,250 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-10 11:10:15,250 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-10 11:10:15,250 - mms_extractor - INFO - 🕒 DAG 처리 시간: 17.106초
2025-09-10 11:10:15,250 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-10 11:10:15,250 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-10 11:10:15,250 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-10 11:10:15,251 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-10 11:10:15,251 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-10 11:10:15,251 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-10 11:10:15,251 - __main__ - INFO - 추출 완료: 36.083초
2025-09-10 11:10:15,252 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 11:10:15] "POST /extract HTTP/1.1" 200 -
2025-09-11 11:04:34,423 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-11 11:04:34,423 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-11 11:04:34,423 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-11 11:04:34,423 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:04:34,423 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:04:34,423 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:04:34,423 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:04:34,424 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-11 11:04:34,441 - mms_extractor - INFO - Using device: mps
2025-09-11 11:04:34,441 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 11:04:34,441 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:04:34,441 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:04:34,442 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:04:34,442 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:04:34,442 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:04:34,442 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:04:34,442 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:04:35,442 - mms_extractor - INFO - Model loaded on mps
2025-09-11 11:04:35,442 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.00초
2025-09-11 11:04:35,442 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:04:35,847 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:04:35,847 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.40초
2025-09-11 11:04:35,847 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-11 11:04:35,847 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:35,847 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-11 11:04:35,847 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:35,847 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-11 11:04:35,847 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:04:35,847 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:04:35,847 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:04:35,847 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:04:35,847 - mms_extractor - ERROR - 상품 정보 로드 실패: [Errno 2] No such file or directory: './data/offer_master_data.csv'
2025-09-11 11:04:35,849 - mms_extractor - ERROR - 오류 상세: Traceback (most recent call last):
  File "/Users/1110566/workspace/AgenticWorkflow/mms_extractor_prd/mms_extractor.py", line 990, in _load_item_data
    item_pdf_raw = pd.read_csv(csv_path)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: './data/offer_master_data.csv'

2025-09-11 11:04:35,850 - mms_extractor - WARNING - 빈 DataFrame으로 fallback 설정됨
2025-09-11 11:04:35,850 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (0, 4)
2025-09-11 11:04:35,850 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn']
2025-09-11 11:04:35,850 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:04:35,850 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:04:35,850 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (0, 4)
2025-09-11 11:04:35,851 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:04:35,851 - mms_extractor - INFO - null이 아닌 상품명 수: 0개
2025-09-11 11:04:35,852 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 0 -> 0
2025-09-11 11:04:35,852 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:04:35,852 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (0, 5)
2025-09-11 11:04:35,852 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:04:35,853 - mms_extractor - INFO - 정지어 로드 완료: 143개
2025-09-11 11:04:35,853 - mms_extractor - INFO - 로드된 정지어 수: 143개
2025-09-11 11:04:35,853 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:04:35,853 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:04:35,853 - mms_extractor - INFO - 등록할 고유 별칭 수: 0개
2025-09-11 11:04:35,853 - mms_extractor - INFO - 유효한 별칭 수: 0개
2025-09-11 11:04:35,853 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 0개 성공, 0개 실패
2025-09-11 11:04:35,853 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:04:35,853 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:04:35,854 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:04:35,854 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:04:36,004 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:04:36,004 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:04:36,004 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:04:36,475 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:04:36,475 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:04:36,475 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:36,475 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:04:36,475 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:36,475 - mms_extractor - INFO - ✅ 상품 데이터: (0, 5)
2025-09-11 11:04:36,475 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:04:36,475 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:04:36,475 - mms_extractor - INFO - ✅ 정지어: 143개
2025-09-11 11:04:36,475 - mms_extractor - INFO - _load_data 실행완료: 0.63초
2025-09-11 11:04:36,475 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:04:36,475 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-11 11:04:36,475 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-11 11:04:36,475 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-11 11:04:36,475 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-11 11:04:36,475 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-11 11:04:36,475 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-11 11:04:36,475 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-11 11:04:36,475 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-11 11:04:36,475 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-11 11:04:36,475 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-11 11:04:36,484 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.25.54:8000
2025-09-11 11:04:36,484 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-11 11:04:40,039 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-11 11:04:40,039 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-11 11:04:40,039 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-11 11:04:40,040 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-11 11:04:40,040 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-11 11:04:40,040 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:40,040 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:04:40,040 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:40,040 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-11 11:04:40,040 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-11 11:04:40,040 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-11 11:04:40,040 - mms_extractor - INFO - 데이터 소스: local
2025-09-11 11:04:40,040 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-11 11:04:40,040 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-11 11:04:40,040 - mms_extractor - INFO - LLM 모델: ax
2025-09-11 11:04:40,040 - mms_extractor - INFO - 상품 데이터 크기: (0, 5)
2025-09-11 11:04:40,040 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:04:40,040 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:04:40,040 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:04:40,040 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-11 11:04:40,040 - mms_extractor - ERROR - 상품 데이터가 비어있습니다! 엔티티 추출 불가
2025-09-11 11:04:40,040 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.00초
2025-09-11 11:04:40,040 - mms_extractor - INFO - 추출된 후보 엔티티: []
2025-09-11 11:04:40,040 - mms_extractor - INFO - 매칭된 상품 정보: (0, 0)
2025-09-11 11:04:40,040 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:04:40,188 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:04:40,189 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:04:40,189 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-11 11:04:40,189 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:04:40,189 - mms_extractor - WARNING - 후보 아이템이 없습니다!
2025-09-11 11:04:40,189 - mms_extractor - WARNING - 이는 다음 중 하나의 문제일 수 있습니다:
2025-09-11 11:04:40,189 - mms_extractor - WARNING - 1. 상품 데이터 로딩 실패
2025-09-11 11:04:40,189 - mms_extractor - WARNING - 2. 엔티티 추출 실패
2025-09-11 11:04:40,189 - mms_extractor - WARNING - 3. 유사도 매칭 임계값 문제
2025-09-11 11:04:40,189 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:04:40,189 - mms_extractor - INFO - 구성된 프롬프트 길이: 5790 문자
2025-09-11 11:04:40,189 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:04:40,189 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5790)
2025-09-11 11:04:40,189 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:04:40,189 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:04:47,548 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:04:47,559 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-11 11:04:47,559 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-11 11:04:47,559 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:04:47,559 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:04:47,559 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:04:47,559 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-11 11:04:47,559 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:04:47,559 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-11 11:04:47,571 - mms_extractor - ERROR - LLM 기반 엔티티 추출 실패: 'item_nm_alias'
2025-09-11 11:04:47,572 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 0.01초
2025-09-11 11:04:47,575 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:04:47,575 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:47,575 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:04:47,575 - mms_extractor - INFO - ============================================================
2025-09-11 11:04:47,575 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-11 11:04:47,575 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-11 11:04:47,575 - mms_extractor - INFO - 상품 수: 2개
2025-09-11 11:04:47,575 - mms_extractor - INFO - 채널 수: 4개
2025-09-11 11:04:47,576 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-11 11:04:47,576 - mms_extractor - INFO - process_message 실행완료: 7.54초
2025-09-11 11:04:47,576 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-11 11:04:47,576 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-11 11:04:47,576 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-11 11:04:47,576 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3283b71a0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x3283b7140> root_client=<openai.OpenAI object at 0x3283b77d0> root_async_client=<openai.AsyncOpenAI object at 0x3283b71d0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-11 11:04:47,576 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-11 11:04:47,576 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-11 11:05:05,749 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:05:05,751 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1878자
2025-09-11 11:05:05,751 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택을 통해 만 13~34세 고객에게 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하고, 에이닷 T 멤버십 쿠폰함에 '에이닷이빵쏜닷' 시크릿코드를 입력하면 뚜레쥬르 데일리우유식빵 무료 쿠폰을 제공하는 이벤트를 안내하고 있다.

[식별된 가치 제안 목록...
2025-09-11 11:05:05,751 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-11 11:05:05,752 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-11 11:05:05,752 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-11 11:05:05,753 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-11 11:05:05,753 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-11 11:05:05,753 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-11 11:05:05,753 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-11 11:05:05,753 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:05:05,753 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-11 11:05:05,754 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-11 11:05:05,961 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-11 11:05:05,961 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:05:05,961 - mms_extractor - INFO - 🕒 DAG 처리 시간: 18.385초
2025-09-11 11:05:05,961 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-11 11:05:05,961 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-11 11:05:05,961 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 11:05:05,961 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-11 11:05:05,961 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-11 11:05:05,961 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-11 11:05:05,961 - __main__ - INFO - 추출 완료: 25.922초
2025-09-11 11:05:05,962 - werkzeug - INFO - 127.0.0.1 - - [11/Sep/2025 11:05:05] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:29:07,883 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-17 11:29:07,885 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-17 11:29:07,885 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-17 11:29:07,885 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-17 11:29:07,885 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-17 11:29:07,885 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-17 11:29:07,885 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-17 11:29:07,886 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-17 11:29:07,947 - mms_extractor - INFO - Using device: mps
2025-09-17 11:29:07,947 - mms_extractor - INFO - _initialize_device 실행완료: 0.06초
2025-09-17 11:29:07,947 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-17 11:29:07,947 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-17 11:29:07,947 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-17 11:29:07,947 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-17 11:29:07,947 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-17 11:29:07,948 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-17 11:29:07,948 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-17 11:29:10,075 - mms_extractor - INFO - Model loaded on mps
2025-09-17 11:29:10,075 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 2.13초
2025-09-17 11:29:10,075 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-17 11:29:10,538 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-17 11:29:10,538 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.46초
2025-09-17 11:29:10,538 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-17 11:29:10,538 - mms_extractor - INFO - ============================================================
2025-09-17 11:29:10,538 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-17 11:29:10,538 - mms_extractor - INFO - ============================================================
2025-09-17 11:29:10,538 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-17 11:29:10,538 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-17 11:29:10,538 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-17 11:29:10,538 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-17 11:29:10,538 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-17 11:29:10,608 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (16316, 9)
2025-09-17 11:29:10,608 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-17 11:29:10,608 - mms_extractor - INFO - 컬럼 매핑: {'ITEM_NM': 'item_nm', 'ITEM_ID': 'item_id', 'ITEM_DESC': 'item_desc', 'ITEM_DMN': 'item_dmn', 'ITEM_ALS': 'item_nm_alias'}
2025-09-17 11:29:10,611 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (16316, 5)
2025-09-17 11:29:10,612 - mms_extractor - INFO - item_nm_alias에서 16316개 null 값을 item_nm으로 채웁니다.
2025-09-17 11:29:10,613 - mms_extractor - INFO - 로컬 모드 최종 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:29:10,613 - mms_extractor - INFO - item_nm_alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-17 11:29:10,613 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70', '뉴스콤 관제30', '구축-Smart PayHub']
2025-09-17 11:29:10,613 - mms_extractor - INFO - 로컬 모드 데이터 샘플 (5개 행):
2025-09-17 11:29:10,618 - mms_extractor - INFO - [{'item_nm': '우주패스 Netflix 인증', 'item_id': 'NA00008735', 'item_desc': '우주패스 Netflix 인증&&T 우주패스 Netflix를 인증하면 가입되는 더미코드&&', 'item_dmn': 'P', 'item_nm_alias': '우주패스 Netflix 인증', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008735', 'oper_dt_hms': '20250101000000'}, {'item_nm': 'LTE-M10(24년_간선망)', 'item_id': 'NA00008782', 'item_desc': 'LTE-M10(24년_간선망)&&ㅇ 한전 AMI 간선망용 무선모뎀 사업수주에 따른 신규 전용상품(요금제) 출시   - 수주일자 : 4/3  - 수량 : 13,656대 (Cat.1 모뎀)  - 상품명 : LTE-M10(24년_한전 간선망)  - 제안요금 : 711원(Vat별도)     > “LTE-M 10 요금제” + “기업데이터 청구” 형태       >  총91MB 제공  - 부가서비스 상품명 : 한전_부가_PGW#37    > UUT 211 적용&&', 'item_dmn': 'P', 'item_nm_alias': 'LTE-M10(24년_간선망)', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008782', 'oper_dt_hms': '20250101000000'}, {'item_nm': '유선대체 70', 'item_id': 'NA00005883', 'item_desc': '유선대체 70&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건', 'item_dmn': 'P', 'item_nm_alias': '유선대체 70', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00005883', 'oper_dt_hms': '20250101000000'}, {'item_nm': '뉴스콤 관제30', 'item_id': 'NB00000764', 'item_desc': '뉴스콤 관제30&&고객사의 메인망은 초고속인터넷이고 백업망으로 당사의 이동통신망을 이용하는 무선라우터를 공급하는 경우, 원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off/ 원격조치 불가능시 출동후 장애 조치 서비스&&원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off / 원격조치 불가능시 출동후 장애 조치 서비스', 'item_dmn': 'P', 'item_nm_alias': '뉴스콤 관제30', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NB00000764', 'oper_dt_hms': '20250101000000'}, {'item_nm': '구축-Smart PayHub', 'item_id': 'PD00013310', 'item_desc': '구축-Smart PayHub&&&&', 'item_dmn': 'P', 'item_nm_alias': '구축-Smart PayHub', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'PD00013310', 'oper_dt_hms': '20250101000000'}]
2025-09-17 11:29:10,620 - mms_extractor - INFO - 도메인 필터링: 16316 -> 10551 (제외된 도메인: ['R'])
2025-09-17 11:29:10,620 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 10551개 상품 ===
2025-09-17 11:29:10,620 - mms_extractor - INFO - 최종 데이터 스키마: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:29:10,620 - mms_extractor - INFO - 최종 데이터 타입: {'item_nm': dtype('O'), 'item_id': dtype('O'), 'item_desc': dtype('O'), 'item_dmn': dtype('O'), 'item_nm_alias': dtype('O'), 'item_ctg': dtype('O'), 'item_emb_vec': dtype('O'), 'ofer_cd': dtype('O'), 'oper_dt_hms': dtype('O')}
2025-09-17 11:29:10,620 - mms_extractor - INFO - 모든 중요 컬럼이 존재합니다.
2025-09-17 11:29:10,621 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (10551, 9)
2025-09-17 11:29:10,621 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:29:10,621 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-17 11:29:10,621 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-17 11:29:10,621 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (10551, 9)
2025-09-17 11:29:10,625 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-17 11:29:10,625 - mms_extractor - INFO - null이 아닌 상품명 수: 10551개
2025-09-17 11:29:10,625 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-17 11:29:10,626 - mms_extractor - INFO - 기존 item_nm_alias 데이터를 발견했습니다. 별칭 규칙과 병합합니다.
2025-09-17 11:29:10,626 - mms_extractor - INFO - 기존 alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-17 11:29:10,760 - mms_extractor - INFO - 기존 ITEM_ALS 데이터와 별칭 규칙이 성공적으로 병합되었습니다.
2025-09-17 11:29:10,764 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 10551 -> 21522
2025-09-17 11:29:10,765 - mms_extractor - INFO - 별칭 적용 후 샘플: ['우주Pass Netflix 인증', '우주pass Netflix 인증', '우주패스 Netflix 인증', '우주패스 넷플릭스 인증', '우주PASS Netflix 인증']
2025-09-17 11:29:10,765 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-17 11:29:10,765 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (21522, 9)
2025-09-17 11:29:10,765 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-17 11:29:10,767 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-17 11:29:10,767 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-17 11:29:10,767 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-17 11:29:10,767 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-17 11:29:10,769 - mms_extractor - INFO - 등록할 고유 별칭 수: 16403개
2025-09-17 11:29:10,769 - mms_extractor - INFO - 유효한 별칭 수: 16403개
2025-09-17 11:29:10,769 - mms_extractor - INFO - 등록할 별칭 샘플: ['우주Pass Netflix 인증', '우주pass Netflix 인증', '우주패스 Netflix 인증', '우주패스 넷플릭스 인증', '우주PASS Netflix 인증']
2025-09-17 11:29:10,782 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 16403개 성공, 0개 실패
2025-09-17 11:29:10,782 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-17 11:29:10,782 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-17 11:29:10,795 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-17 11:29:10,795 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-17 11:29:10,945 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-17 11:29:10,945 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-17 11:29:10,946 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-17 11:29:10,946 - mms_extractor - INFO - === 조직 정보 로드 시작 (모드: local) ===
2025-09-17 11:29:10,946 - mms_extractor - INFO - 로컬 CSV 파일에서 조직 정보 로드 중...
2025-09-17 11:29:10,946 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-17 11:29:11,013 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 조직 데이터 크기: (16316, 9)
2025-09-17 11:29:11,013 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-17 11:29:11,015 - mms_extractor - INFO - 로컬 모드: ITEM_DMN='R' 필터링 후 데이터 크기: (5765, 9)
2025-09-17 11:29:11,016 - mms_extractor - INFO - 조직 데이터 샘플 (3개 행): [{'item_id': 'D15198_0020', 'item_nm': '가로수대리점 하늘도시점', 'item_dmn': 'R', 'item_desc': '인천 중구 하늘중앙로195번길 11,&&1층 105호(중산동)&&003202309011', 'item_ctg': '501', 'item_als': nan, 'item_emb_vec': nan, 'ofer_cd': '1430541517', 'oper_dt_hms': 20250909151123}, {'item_id': 'D13622_0398', 'item_nm': 'MD대리점 주엽직영점', 'item_dmn': 'R', 'item_desc': '경기 고양시 일산서구 중앙로 1426,&&(주엽동) 1층111호&&003109152662', 'item_ctg': '501', 'item_als': nan, 'item_emb_vec': nan, 'ofer_cd': '1430541945', 'oper_dt_hms': 20250909151123}, {'item_id': 'D15320_0001', 'item_nm': '강서대리점(온라인매장)', 'item_dmn': 'R', 'item_desc': '서울 양천구 남부순환로 354,&&1층 (신월동)&&007078567800', 'item_ctg': '501', 'item_als': nan, 'item_emb_vec': nan, 'ofer_cd': '1430542104', 'oper_dt_hms': 20250909151123}]
2025-09-17 11:29:11,016 - mms_extractor - INFO - === 조직 정보 로드 최종 완료: 5765개 조직 ===
2025-09-17 11:29:11,016 - mms_extractor - INFO - 최종 조직 데이터 스키마: ['item_id', 'item_nm', 'item_dmn', 'item_desc', 'item_ctg', 'item_als', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:29:11,016 - mms_extractor - INFO - 모든 중요 조직 컬럼이 정상적으로 로드되었습니다.
2025-09-17 11:29:11,016 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (5765, 9)
2025-09-17 11:29:11,016 - mms_extractor - INFO - ============================================================
2025-09-17 11:29:11,016 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-17 11:29:11,016 - mms_extractor - INFO - ============================================================
2025-09-17 11:29:11,016 - mms_extractor - INFO - ✅ 상품 데이터: (21522, 9)
2025-09-17 11:29:11,016 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-17 11:29:11,016 - mms_extractor - INFO - ✅ 조직 데이터: (5765, 9)
2025-09-17 11:29:11,016 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-17 11:29:11,016 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-17 11:29:11,017 - mms_extractor - INFO - 고유 상품명 수: 6847개
2025-09-17 11:29:11,019 - mms_extractor - INFO - 고유 별칭 수: 16403개
2025-09-17 11:29:11,020 - mms_extractor - INFO - 고유 상품ID 수: 10551개
2025-09-17 11:29:11,020 - mms_extractor - INFO - _load_data 실행완료: 0.48초
2025-09-17 11:29:11,020 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-17 11:29:11,020 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-17 11:29:11,020 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-17 11:29:11,020 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-17 11:29:11,020 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-17 11:29:11,020 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-17 11:29:11,020 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-17 11:29:11,020 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-17 11:29:11,020 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-17 11:29:11,021 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-17 11:29:11,021 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-17 11:29:11,047 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.112.54:8000
2025-09-17 11:29:11,047 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-17 11:30:06,316 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:30:06] "GET /health HTTP/1.1" 200 -
2025-09-17 11:30:06,350 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:30:06] "GET /health HTTP/1.1" 200 -
2025-09-17 11:30:08,009 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:30:08] "GET /health HTTP/1.1" 200 -
2025-09-17 11:30:08,018 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-17 11:30:08,018 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 11:30:08,018 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 11:30:08,018 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-17 11:30:08,018 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 11:30:08,018 - mms_extractor - INFO - ============================================================
2025-09-17 11:30:08,018 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 11:30:08,019 - mms_extractor - INFO - ============================================================
2025-09-17 11:30:08,019 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-17 11:30:08,019 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-17 11:30:08,019 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 11:30:08,019 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 11:30:08,019 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-17 11:30:08,019 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 11:30:08,019 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 11:30:08,019 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 11:30:08,019 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 11:30:08,019 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 11:30:08,019 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 11:30:08,019 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-17 11:30:08,020 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 11:30:08,495 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-17 11:30:08,496 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-17 11:30:08,499 - mms_extractor - INFO - 전체 토큰 수: 240개
2025-09-17 11:30:08,499 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-17 11:30:08,499 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Netflix', '넷플릭스', 'Wavve 콘텐츠 팩']
2025-09-17 11:30:08,499 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 11:30:14,587 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (2742, 3)
2025-09-17 11:30:14,587 - mms_extractor - INFO - 퍼지 매칭 성공: 2742개 결과
2025-09-17 11:30:14,588 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.4285714285714286}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.4285714285714286}]
2025-09-17 11:30:14,588 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 11:30:14,667 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (2742, 3)
2025-09-17 11:30:14,668 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.4666666666666667}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.30000000000000004}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.30000000000000004}]
2025-09-17 11:30:14,668 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 11:30:14,670 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 71개
2025-09-17 11:30:14,672 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-17 11:30:14,672 - mms_extractor - INFO - 통합된 후보 아이템 수: 75개
2025-09-17 11:30:14,674 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:30:14,676 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (37, 2)
2025-09-17 11:30:14,676 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-17 11:30:14,677 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 6.66초
2025-09-17 11:30:14,677 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:30:14,677 - mms_extractor - INFO - 매칭된 상품 정보: (37, 2)
2025-09-17 11:30:14,677 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 11:30:14,810 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 11:30:14,810 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 11:30:14,810 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-17 11:30:14,810 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 11:30:14,811 - mms_extractor - INFO - 후보 아이템 리스트 크기: 57개
2025-09-17 11:30:14,811 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:30:14,811 - mms_extractor - INFO - extra_item_pdf 크기: (37, 2)
2025-09-17 11:30:14,811 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 11:30:14,811 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}]
2025-09-17 11:30:14,812 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 37개
2025-09-17 11:30:14,812 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': 'FLO 콘텐츠 팩', 'action': '기타'}, {'name': 'FLO 콘텐츠 팩 플러스', 'action': '기타'}]
2025-09-17 11:30:14,812 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 11:30:14,812 - mms_extractor - INFO - 구성된 프롬프트 길이: 8276 문자
2025-09-17 11:30:14,812 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-17 11:30:14,812 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 8276)
2025-09-17 11:30:14,812 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 11:30:14,812 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 11:30:21,316 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:30:21,329 - mms_extractor - INFO - LLM 응답 길이: 855 문자
2025-09-17 11:30:21,329 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t...
2025-09-17 11:30:21,329 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 11:30:21,329 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 11:30:21,330 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 11:30:21,330 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-17 11:30:21,330 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 11:30:21,330 - mms_extractor - INFO - LLM 추출 엔티티: ['우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-17 11:30:21,429 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 11:30:21,429 - mms_extractor - INFO - ============================================================
2025-09-17 11:30:21,429 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 11:30:21,429 - mms_extractor - INFO - ============================================================
2025-09-17 11:30:21,429 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-17 11:30:21,429 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-17 11:30:21,429 - mms_extractor - INFO - 상품 수: 3개
2025-09-17 11:30:21,429 - mms_extractor - INFO - 채널 수: 3개
2025-09-17 11:30:21,429 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 11:30:21,430 - mms_extractor - INFO - process_message 실행완료: 13.41초
2025-09-17 11:30:21,430 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 11:30:21,430 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 11:30:21,430 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-17 11:30:21,430 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 11:30:21,430 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 11:30:21,430 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-17 11:30:43,891 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:30:43,893 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2501자
2025-09-17 11:30:43,894 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브 콘텐츠를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하고 있습니다.

[식별...
2025-09-17 11:30:43,894 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 11:30:43,895 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 282자
2025-09-17 11:30:43,895 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 11:30:43,896 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-09-17 11:30:43,896 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '프로모션:확인', '쿠폰:다운로드', '우주패스Netflix:가입', '넷플릭스광고형스탠다드:사용', '웨이브콘텐츠팩:사용', '할인혜택:수령', '추가요금:결제']
2025-09-17 11:30:43,896 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '프로모션:확인'), ('프로모션:확인', '쿠폰:다운로드'), ('쿠폰:다운로드', '우주패스Netflix:가입'), ('우주패스Netflix:가입', '넷플릭스광고형스탠다드:사용'), ('우주패스Netflix:가입', '웨이브콘텐츠팩:사용'), ('우주패스Netflix:가입', '할인혜택:수령'), ('우주패스Netflix:가입', '추가요금:결제')]
2025-09-17 11:30:43,897 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 11:30:43,897 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:30:43,898 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-09-17 11:30:43,899 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 11:30:44,156 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-17 11:30:44,156 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:30:44,156 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.726초
2025-09-17 11:30:44,156 - mms_extractor - INFO - 📏 DAG 섹션 길이: 282자
2025-09-17 11:30:44,156 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (프로모션:확인)
(프로모션:확인) -[확인후]-> (쿠폰:다운로드)
(쿠폰:다운로드) -[다운로드후]-> (우주패스Netflix:가입)
(우주패스Netflix:가입) -[가입하면]-> (넷플릭스광고형스탠다드:사용)
(우주패스Netflix:가입) -[가입하면]-> (웨이브콘텐츠팩:사용)
(우주패스Netflix:가입) -[...
2025-09-17 11:30:44,156 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 11:30:44,156 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 11:30:44,156 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-17 11:30:44,156 - __main__ - INFO - DAG 내용 미리보기: ['(우주패스Netflix:가입) -[가입하면]-> (넷플릭스광고형스탠다드:사용)', '(우주패스Netflix:가입) -[가입하면]-> (웨이브콘텐츠팩:사용)', '(우주패스Netflix:가입) -[가입하면]-> (할인혜택:수령)', '(우주패스Netflix:가입) -[가입후]-> (추가요금:결제) -[결제하면]-> (넷플릭스스탠다드/프리미엄:사용)', '(웹사이트:접속) -[접속하면]-> (프로모션:확인)', '(쿠폰:다운로드) -[다운로드후]-> (우주패스Netflix:가입)', '(프로모션:확인) -[확인후]-> (쿠폰:다운로드)']...
2025-09-17 11:30:44,156 - __main__ - INFO - 추출 완료: 36.138초
2025-09-17 11:30:44,157 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:30:44] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:30:44,180 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:30:44] "GET /health HTTP/1.1" 200 -
2025-09-17 11:38:13,631 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:38:13] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:37,625 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:39:37] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:41,018 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:39:41] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:49,466 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:39:49] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:52,665 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:39:52] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:52,699 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:39:52] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:54,574 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:39:54] "GET /health HTTP/1.1" 200 -
2025-09-17 11:39:54,591 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-17 11:39:54,591 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 11:39:54,591 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 11:39:54,591 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-17 11:39:54,591 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 11:39:54,591 - mms_extractor - INFO - ============================================================
2025-09-17 11:39:54,591 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 11:39:54,591 - mms_extractor - INFO - ============================================================
2025-09-17 11:39:54,591 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-17 11:39:54,591 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-17 11:39:54,591 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 11:39:54,591 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 11:39:54,592 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 11:39:54,592 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 11:39:54,592 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 11:39:54,592 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 11:39:54,592 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 11:39:54,592 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 11:39:54,592 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 11:39:54,592 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-17 11:39:54,594 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 11:39:54,617 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-17 11:39:54,617 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-17 11:39:54,621 - mms_extractor - INFO - 전체 토큰 수: 240개
2025-09-17 11:39:54,621 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-17 11:39:54,621 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Netflix', '넷플릭스', 'Wavve 콘텐츠 팩']
2025-09-17 11:39:54,621 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 11:40:11,739 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (2742, 3)
2025-09-17 11:40:11,739 - mms_extractor - INFO - 퍼지 매칭 성공: 2742개 결과
2025-09-17 11:40:11,740 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.4285714285714286}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.4285714285714286}]
2025-09-17 11:40:11,740 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 11:40:11,820 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (2742, 3)
2025-09-17 11:40:11,820 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.4666666666666667}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.30000000000000004}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.30000000000000004}]
2025-09-17 11:40:11,820 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 11:40:11,822 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 71개
2025-09-17 11:40:11,823 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-17 11:40:11,824 - mms_extractor - INFO - 통합된 후보 아이템 수: 75개
2025-09-17 11:40:11,825 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:40:11,826 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (37, 2)
2025-09-17 11:40:11,827 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-17 11:40:11,827 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 17.24초
2025-09-17 11:40:11,827 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:40:11,827 - mms_extractor - INFO - 매칭된 상품 정보: (37, 2)
2025-09-17 11:40:11,827 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 11:40:11,982 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 11:40:11,982 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 11:40:11,982 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-17 11:40:11,982 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 11:40:11,982 - mms_extractor - INFO - 후보 아이템 리스트 크기: 57개
2025-09-17 11:40:11,982 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:40:11,982 - mms_extractor - INFO - extra_item_pdf 크기: (37, 2)
2025-09-17 11:40:11,982 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 11:40:11,982 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}]
2025-09-17 11:40:11,982 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 11:40:11,982 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 11:40:11,982 - mms_extractor - INFO - 구성된 프롬프트 길이: 7454 문자
2025-09-17 11:40:11,983 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 11:40:11,983 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7454)
2025-09-17 11:40:11,983 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 11:40:11,983 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 11:40:18,314 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:40:18,316 - mms_extractor - INFO - LLM 응답 길이: 857 문자
2025-09-17 11:40:18,316 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "사용"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "사용"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http:/...
2025-09-17 11:40:18,316 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 11:40:18,317 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 11:40:18,317 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 11:40:18,317 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '사용'}, {'name': 'Wavve 콘텐츠 팩', 'action': '사용'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-17 11:40:18,317 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 11:40:18,317 - mms_extractor - INFO - LLM 추출 엔티티: ['T 우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-17 11:40:18,419 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 11:40:18,420 - mms_extractor - INFO - ============================================================
2025-09-17 11:40:18,420 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 11:40:18,420 - mms_extractor - INFO - ============================================================
2025-09-17 11:40:18,420 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-17 11:40:18,420 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-17 11:40:18,420 - mms_extractor - INFO - 상품 수: 3개
2025-09-17 11:40:18,420 - mms_extractor - INFO - 채널 수: 3개
2025-09-17 11:40:18,420 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 11:40:18,420 - mms_extractor - INFO - process_message 실행완료: 23.83초
2025-09-17 11:40:18,420 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 11:40:18,420 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 11:40:18,420 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-17 11:40:18,420 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 11:40:18,420 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 11:40:18,420 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-17 11:40:42,366 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:40:42,369 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2663자
2025-09-17 11:40:42,369 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브 콘텐츠를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하고 있습니다.

[식별...
2025-09-17 11:40:42,369 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 11:40:42,369 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 325자
2025-09-17 11:40:42,369 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 11:40:42,370 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 9, 엣지 수: 8
2025-09-17 11:40:42,370 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '프로모션확인및쿠폰다운로드:수행', '우주패스Netflix:가입', '넷플릭스광고형스탠다드:이용', '웨이브콘텐츠팩:이용', '할인혜택:수령', '넷플릭스콘텐츠:시청', '웨이브콘텐츠:시청', '넷플릭스스탠다드프리미엄:선택가능']
2025-09-17 11:40:42,370 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '프로모션확인및쿠폰다운로드:수행'), ('프로모션확인및쿠폰다운로드:수행', '우주패스Netflix:가입'), ('우주패스Netflix:가입', '넷플릭스광고형스탠다드:이용'), ('우주패스Netflix:가입', '웨이브콘텐츠팩:이용'), ('우주패스Netflix:가입', '할인혜택:수령'), ('우주패스Netflix:가입', '넷플릭스스탠다드프리미엄:선택가능'), ('넷플릭스광고형스탠다드:이용', '넷플릭스콘텐츠:시청'), ('웨이브콘텐츠팩:이용', '웨이브콘텐츠:시청')]
2025-09-17 11:40:42,370 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 11:40:42,370 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:40:42,370 - utils - INFO - 📊 입력 그래프 - 노드 수: 9, 엣지 수: 8
2025-09-17 11:40:42,371 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 11:40:42,748 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-17 11:40:42,748 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:40:42,748 - mms_extractor - INFO - 🕒 DAG 처리 시간: 24.329초
2025-09-17 11:40:42,748 - mms_extractor - INFO - 📏 DAG 섹션 길이: 325자
2025-09-17 11:40:42,748 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (프로모션확인및쿠폰다운로드:수행)
(프로모션확인및쿠폰다운로드:수행) -[수행후]-> (우주패스Netflix:가입)
(우주패스Netflix:가입) -[가입하면]-> (넷플릭스광고형스탠다드:이용)
(우주패스Netflix:가입) -[가입하면]-> (웨이브콘텐츠팩:이용)
(우주패스Netflix:가입) -[가입하면]-> (할인혜택...
2025-09-17 11:40:42,748 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 11:40:42,748 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 11:40:42,749 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 8자
2025-09-17 11:40:42,749 - __main__ - INFO - DAG 내용 미리보기: ['(넷플릭스광고형스탠다드:이용) -[이용하면]-> (넷플릭스콘텐츠:시청)', '(우주패스Netflix:가입) -[가입하면]-> (넷플릭스광고형스탠다드:이용)', '(우주패스Netflix:가입) -[가입하면]-> (웨이브콘텐츠팩:이용)', '(우주패스Netflix:가입) -[가입하면]-> (할인혜택:수령)', '(우주패스Netflix:가입) -[가입후]-> (넷플릭스스탠다드프리미엄:선택가능)', '(웨이브콘텐츠팩:이용) -[이용하면]-> (웨이브콘텐츠:시청)', '(웹사이트:접속) -[접속하면]-> (프로모션확인및쿠폰다운로드:수행)', '(프로모션확인및쿠폰다운로드:수행) -[수행후]-> (우주패스Netflix:가입)']...
2025-09-17 11:40:42,749 - __main__ - INFO - 추출 완료: 48.157초
2025-09-17 11:40:42,749 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:40:42] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:40:42,776 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:40:42] "GET /health HTTP/1.1" 200 -
2025-09-17 11:42:18,884 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:42:18] "GET /health HTTP/1.1" 200 -
2025-09-17 11:42:54,271 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:42:54] "GET /health HTTP/1.1" 200 -
2025-09-17 11:42:54,306 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:42:54] "GET /health HTTP/1.1" 200 -
2025-09-17 11:42:55,678 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:42:55] "GET /health HTTP/1.1" 200 -
2025-09-17 11:42:55,692 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-17 11:42:55,693 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 11:42:55,693 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 11:42:55,693 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-17 11:42:55,693 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 11:42:55,693 - mms_extractor - INFO - ============================================================
2025-09-17 11:42:55,693 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 11:42:55,693 - mms_extractor - INFO - ============================================================
2025-09-17 11:42:55,693 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-17 11:42:55,693 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-17 11:42:55,693 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 11:42:55,693 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 11:42:55,693 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 11:42:55,693 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 11:42:55,693 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 11:42:55,693 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 11:42:55,693 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 11:42:55,693 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 11:42:55,693 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 11:42:55,693 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-17 11:42:55,695 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 11:42:55,700 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-17 11:42:55,701 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-17 11:42:55,706 - mms_extractor - INFO - 전체 토큰 수: 240개
2025-09-17 11:42:55,706 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-17 11:42:55,706 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Netflix', '넷플릭스', 'Wavve 콘텐츠 팩']
2025-09-17 11:42:55,706 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 11:42:55,909 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (2742, 3)
2025-09-17 11:42:55,909 - mms_extractor - INFO - 퍼지 매칭 성공: 2742개 결과
2025-09-17 11:42:55,909 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.4285714285714286}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.4285714285714286}]
2025-09-17 11:42:55,910 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 11:42:55,976 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (2742, 3)
2025-09-17 11:42:55,977 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.4666666666666667}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.30000000000000004}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.30000000000000004}]
2025-09-17 11:42:55,977 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 11:42:55,978 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 71개
2025-09-17 11:42:55,980 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-17 11:42:55,980 - mms_extractor - INFO - 통합된 후보 아이템 수: 75개
2025-09-17 11:42:55,981 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:42:55,983 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (37, 2)
2025-09-17 11:42:55,983 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-17 11:42:55,983 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.29초
2025-09-17 11:42:55,983 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:42:55,983 - mms_extractor - INFO - 매칭된 상품 정보: (37, 2)
2025-09-17 11:42:55,983 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 11:42:56,021 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 11:42:56,021 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 11:42:56,021 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-17 11:42:56,021 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 11:42:56,021 - mms_extractor - INFO - 후보 아이템 리스트 크기: 57개
2025-09-17 11:42:56,021 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:42:56,021 - mms_extractor - INFO - extra_item_pdf 크기: (37, 2)
2025-09-17 11:42:56,021 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 11:42:56,021 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}]
2025-09-17 11:42:56,021 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 11:42:56,021 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 11:42:56,021 - mms_extractor - INFO - 구성된 프롬프트 길이: 7454 문자
2025-09-17 11:42:56,021 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 11:42:56,021 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7454)
2025-09-17 11:42:56,021 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 11:42:56,021 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 11:43:02,025 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:43:02,028 - mms_extractor - INFO - LLM 응답 길이: 857 문자
2025-09-17 11:43:02,028 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "사용"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "사용"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http:/...
2025-09-17 11:43:02,028 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 11:43:02,029 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 11:43:02,029 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 11:43:02,029 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '사용'}, {'name': 'Wavve 콘텐츠 팩', 'action': '사용'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-17 11:43:02,029 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 11:43:02,029 - mms_extractor - INFO - LLM 추출 엔티티: ['T 우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-17 11:43:02,129 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 11:43:02,129 - mms_extractor - INFO - ============================================================
2025-09-17 11:43:02,129 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 11:43:02,129 - mms_extractor - INFO - ============================================================
2025-09-17 11:43:02,129 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-17 11:43:02,129 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-17 11:43:02,129 - mms_extractor - INFO - 상품 수: 3개
2025-09-17 11:43:02,129 - mms_extractor - INFO - 채널 수: 3개
2025-09-17 11:43:02,129 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 11:43:02,129 - mms_extractor - INFO - process_message 실행완료: 6.44초
2025-09-17 11:43:02,129 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 11:43:02,129 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 11:43:02,129 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-17 11:43:02,130 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 11:43:02,130 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 11:43:02,130 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-17 11:43:21,085 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:43:21,088 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2264자
2025-09-17 11:43:21,088 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 콘텐츠를 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 주요 의도는 고객이 '우주패스 Netflix'에 가입하도록 유도하는 것입니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용할 수 있는 혜택을 제공...
2025-09-17 11:43:21,088 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 11:43:21,089 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 249자
2025-09-17 11:43:21,089 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 11:43:21,089 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-17 11:43:21,089 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용', '웨이브 콘텐츠 팩:사용', '2개월 동안 월 9,900원:할인', '추가 요금:지불']
2025-09-17 11:43:21,090 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용'), ('우주패스 Netflix:가입', '웨이브 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '2개월 동안 월 9,900원:할인'), ('우주패스 Netflix:가입', '추가 요금:지불')]
2025-09-17 11:43:21,090 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 11:43:21,090 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:43:21,090 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-17 11:43:21,092 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 11:43:21,352 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-17 11:43:21,352 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:43:21,352 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.223초
2025-09-17 11:43:21,352 - mms_extractor - INFO - 📏 DAG 섹션 길이: 249자
2025-09-17 11:43:21,352 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)
(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:사용)
(우주패스 Netflix:가입) -[가입후]-> (2개월 동안 월 9,900원:할인)
(우주패스 Netflix:가입) ...
2025-09-17 11:43:21,352 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 11:43:21,352 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 11:43:21,352 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-17 11:43:21,352 - __main__ - INFO - DAG 내용 미리보기: ['(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입후]-> (2개월 동안 월 9,900원:할인)', '(우주패스 Netflix:가입) -[가입후]-> (추가 요금:지불) -[지불하면]-> (넷플릭스 스탠다드/프리미엄:선택)', '(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)']...
2025-09-17 11:43:21,352 - __main__ - INFO - 추출 완료: 25.660초
2025-09-17 11:43:21,353 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:43:21] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:43:21,380 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:43:21] "GET /health HTTP/1.1" 200 -
2025-09-17 12:42:57,263 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:42:57] "GET /health HTTP/1.1" 200 -
2025-09-17 12:44:00,720 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:00] "GET /health HTTP/1.1" 200 -
2025-09-17 12:44:05,621 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:05] "GET /health HTTP/1.1" 200 -
2025-09-17 12:44:09,956 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:09] "GET /health HTTP/1.1" 200 -
2025-09-17 12:44:09,999 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:09] "GET /health HTTP/1.1" 200 -
2025-09-17 12:44:11,866 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:11] "GET /health HTTP/1.1" 200 -
2025-09-17 12:44:11,878 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 323자
2025-09-17 12:44:11,879 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:44:11,879 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:44:11,879 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
(광고)[SKT] 우리 아이 첫 번째 스마트폰,...
2025-09-17 12:44:11,879 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:44:11,879 - mms_extractor - INFO - ============================================================
2025-09-17 12:44:11,879 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:44:11,879 - mms_extractor - INFO - ============================================================
2025-09-17 12:44:11,879 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
(광고)[SKT] 우리 아이 첫 번째 스마트폰, ZEM 키즈폰__#04 고객님, 안녕하세요!
우리 아이 스마트폰 고민 중이셨다면, 자녀 스마트폰 관리 앱 ZEM이 설치된 SKT만의 안전한 키즈폰,
ZEM폰 포켓몬에디션3으로 우리 아이 취향을 저격해 보세요!

✨ 특별 혜택
- 월 요금 20% 할인 (첫 6개월)
-...
2025-09-17 12:44:11,879 - mms_extractor - INFO - 메시지 길이: 323 문자
2025-09-17 12:44:11,879 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:44:11,879 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:44:11,879 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-17 12:44:11,879 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:44:11,879 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:44:11,879 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:44:11,879 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:44:11,879 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:44:11,879 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:44:11,879 - mms_extractor - INFO - 처리할 메시지 길이: 323 문자
2025-09-17 12:44:11,883 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:44:11,895 - mms_extractor - INFO - 분할된 문장 수: 7개
2025-09-17 12:44:11,896 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', ' 고객님 안녕하세요 ', '우리 아이 스마트폰 고민 중이셨다면 자녀 스마트폰 관리 앱 ZEM이 설치된 SKT만의 안전 키즈폰 ZEM폰 포켓몬에디션3으로 우리 아이 취향 저격 보세요 ']...
2025-09-17 12:44:11,898 - mms_extractor - INFO - 전체 토큰 수: 129개
2025-09-17 12:44:11,899 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '포켓몬', '에디션', '스마트폰', '포켓몬', '에디션', '포켓몬']
2025-09-17 12:44:11,899 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['에디션', '포켓몬']
2025-09-17 12:44:11,899 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:44:18,620 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1354, 3)
2025-09-17 12:44:18,620 - mms_extractor - INFO - 퍼지 매칭 성공: 1354개 결과
2025-09-17 12:44:18,622 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트지킴이', 'sim': 0.5}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트 디지털운행', 'sim': 0.4444444444444444}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '마이스마트콜3_해지', 'sim': 0.4}]
2025-09-17 12:44:18,622 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:44:18,661 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1354, 3)
2025-09-17 12:44:18,661 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트지킴이', 'sim': 0.4}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트 디지털운행', 'sim': 0.35555555555555557}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '마이스마트콜3_해지', 'sim': 0.32000000000000006}]
2025-09-17 12:44:18,661 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:44:18,663 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 6개
2025-09-17 12:44:18,665 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-09-17 12:44:18,665 - mms_extractor - INFO - 통합된 후보 아이템 수: 6개
2025-09-17 12:44:18,666 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['0서비스', 'K3', '리안', '포미', 'T 서비스']
2025-09-17 12:44:18,668 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (5, 2)
2025-09-17 12:44:18,668 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '0서비스', 'item_id': ['NA00008607']}, {'item_nm': 'K3', 'item_id': ['XXC5']}, {'item_nm': 'T 서비스', 'item_id': ['NA00003911']}]
2025-09-17 12:44:18,668 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 6.79초
2025-09-17 12:44:18,668 - mms_extractor - INFO - 추출된 후보 엔티티: ['0서비스', 'K3', '리안', '포미', 'T 서비스']
2025-09-17 12:44:18,668 - mms_extractor - INFO - 매칭된 상품 정보: (5, 2)
2025-09-17 12:44:18,669 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:44:18,774 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:44:18,774 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:44:18,774 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 400 문자
2025-09-17 12:44:18,774 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:44:18,774 - mms_extractor - INFO - 후보 아이템 리스트 크기: 5개
2025-09-17 12:44:18,774 - mms_extractor - INFO - 후보 아이템 리스트: ['0서비스', 'K3', '리안', '포미', 'T 서비스']
2025-09-17 12:44:18,774 - mms_extractor - INFO - extra_item_pdf 크기: (5, 2)
2025-09-17 12:44:18,774 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:44:18,774 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '0서비스', 'item_id': ['NA00008607']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:44:18,775 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 5개
2025-09-17 12:44:18,775 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '0서비스', 'action': '기타'}, {'name': 'K3', 'action': '기타'}]
2025-09-17 12:44:18,775 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:44:18,775 - mms_extractor - INFO - 구성된 프롬프트 길이: 5197 문자
2025-09-17 12:44:18,775 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-17 12:44:18,775 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5197)
2025-09-17 12:44:18,775 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:44:18,775 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:44:25,206 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:44:25,210 - mms_extractor - INFO - LLM 응답 길이: 939 문자
2025-09-17 12:44:25,210 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] ZEM폰 포켓몬에디션3 안내",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "ZEM폰 포켓몬에디션3",
            "action": "가입"
        },
        {
            "name": "ZEM 프리미엄 서비스",
            "action": "가입"
        },
        {
            "name": "포켓몬 케이스",
            "action": "증정"
        }
    ],
    "channel": [
        {
            "type": "전화번호",
            "value": "1588-0011",
            "action": "문의"
    ...
2025-09-17 12:44:25,210 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:44:25,211 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:44:25,211 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:44:25,211 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] ZEM폰 포켓몬에디션3 안내', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': 'ZEM폰 포켓몬에디션3', 'action': '가입'}, {'name': 'ZEM 프리미엄 서비스', 'action': '가입'}, {'name': '포켓몬 케이스', 'action': '증정'}], 'channel': [{'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '대리점', 'value': '가까운 T world 매장', 'action': '가입'}, {'type': 'URL', 'value': 'www.tworld.co.kr', 'action': '추가 정보'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:44:25,211 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:44:25,212 - mms_extractor - INFO - LLM 추출 엔티티: ['ZEM폰 포켓몬에디션3', 'ZEM 프리미엄 서비스', '포켓몬 케이스']
2025-09-17 12:44:25,345 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:44:25,345 - mms_extractor - INFO - ============================================================
2025-09-17 12:44:25,345 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:44:25,345 - mms_extractor - INFO - ============================================================
2025-09-17 12:44:25,345 - mms_extractor - INFO - 제목: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
2025-09-17 12:44:25,345 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:44:25,345 - mms_extractor - INFO - 상품 수: 0개
2025-09-17 12:44:25,345 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:44:25,345 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:44:25,345 - mms_extractor - INFO - process_message 실행완료: 13.47초
2025-09-17 12:44:25,345 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:44:25,345 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:44:25,345 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 323자
2025-09-17 12:44:25,345 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:44:25,345 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:44:25,345 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3308자
2025-09-17 12:44:47,520 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:44:47,522 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2511자
2025-09-17 12:44:47,522 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 자녀의 첫 스마트폰으로 ZEM폰 포켓몬에디션3을 추천하며, 안전한 사용 환경과 다양한 특별 혜택을 강조합니다. 주요 혜택으로는 월 요금 20% 할인(첫 6개월), 포켓몬 케이스 무료 증정, ZEM 프리미엄 서비스 3개월 무료 이용이 제공됩니다.

[식별된 가치 제안 목록]
- ZEM...
2025-09-17 12:44:47,522 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:44:47,523 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 228자
2025-09-17 12:44:47,523 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:44:47,524 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-17 12:44:47,524 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 매장:방문', 'ZEM폰 포켓몬에디션3:구매', '월 요금 20% 할인:수령', '포켓몬 케이스:수령', 'ZEM 프리미엄 서비스 3개월 무료:수령', 'ZEM 프리미엄 서비스:사용']
2025-09-17 12:44:47,524 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 매장:방문', 'ZEM폰 포켓몬에디션3:구매'), ('ZEM폰 포켓몬에디션3:구매', '월 요금 20% 할인:수령'), ('ZEM폰 포켓몬에디션3:구매', '포켓몬 케이스:수령'), ('ZEM폰 포켓몬에디션3:구매', 'ZEM 프리미엄 서비스 3개월 무료:수령'), ('ZEM폰 포켓몬에디션3:구매', 'ZEM 프리미엄 서비스:사용')]
2025-09-17 12:44:47,524 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:44:47,525 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be
2025-09-17 12:44:47,525 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-17 12:44:47,526 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:44:48,724 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be.png
2025-09-17 12:44:48,724 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be
2025-09-17 12:44:48,724 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.379초
2025-09-17 12:44:48,724 - mms_extractor - INFO - 📏 DAG 섹션 길이: 228자
2025-09-17 12:44:48,724 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 매장:방문) -[방문하면]-> (ZEM폰 포켓몬에디션3:구매)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (월 요금 20% 할인:수령)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (포켓몬 케이스:수령)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 프리미엄 서비스 3개월 무료:수령)
(ZEM폰 포켓몬에디션3:구매)...
2025-09-17 12:44:48,724 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:44:48,724 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:44:48,724 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-17 12:44:48,724 - __main__ - INFO - DAG 내용 미리보기: ['(T world 매장:방문) -[방문하면]-> (ZEM폰 포켓몬에디션3:구매)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 프리미엄 서비스 3개월 무료:수령)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 프리미엄 서비스:사용)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (월 요금 20% 할인:수령)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (포켓몬 케이스:수령)']...
2025-09-17 12:44:48,724 - __main__ - INFO - 추출 완료: 36.845초
2025-09-17 12:44:48,725 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:48] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:44:48,747 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:44:48] "GET /health HTTP/1.1" 200 -
2025-09-17 12:45:36,428 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:45:36] "GET /health HTTP/1.1" 200 -
2025-09-17 12:45:37,712 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:45:37] "GET /health HTTP/1.1" 200 -
2025-09-17 12:45:37,764 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:45:37] "GET /health HTTP/1.1" 200 -
2025-09-17 12:45:40,921 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:45:40] "GET /health HTTP/1.1" 200 -
2025-09-17 12:45:40,939 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:45:40,939 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:45:40,939 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:45:40,940 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:45:40,940 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:45:40,940 - mms_extractor - INFO - ============================================================
2025-09-17 12:45:40,940 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:45:40,940 - mms_extractor - INFO - ============================================================
2025-09-17 12:45:40,940 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:45:40,940 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:45:40,940 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:45:40,940 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:45:40,940 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 12:45:40,940 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:45:40,940 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:45:40,940 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:45:40,940 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:45:40,940 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:45:40,940 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:45:40,940 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:45:40,943 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:45:40,947 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:45:40,947 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:45:40,950 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:45:40,950 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:45:40,950 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:45:40,950 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:45:41,066 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:45:41,066 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:45:41,066 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:45:41,066 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:45:41,107 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:45:41,108 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:45:41,108 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:45:41,109 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:45:41,111 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:45:41,111 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:45:41,112 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:45:41,114 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:45:41,114 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:45:41,114 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.17초
2025-09-17 12:45:41,114 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:45:41,114 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:45:41,114 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:45:41,146 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:45:41,146 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:45:41,146 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:45:41,146 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:45:41,146 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:45:41,146 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:45:41,146 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:45:41,146 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:45:41,146 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:45:41,146 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 12:45:41,146 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:45:41,146 - mms_extractor - INFO - 구성된 프롬프트 길이: 6233 문자
2025-09-17 12:45:41,146 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 12:45:41,146 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6233)
2025-09-17 12:45:41,146 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:45:41,146 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:45:47,618 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:45:47,619 - mms_extractor - INFO - LLM 응답 길이: 788 문자
2025-09-17 12:45:47,619 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 S24 Ultra", "action": "구매"},
        {"name": "갤럭시 S24+", "action": "구매"},
        {"name": "갤럭시 S24", "action": "구매"},
        {"name": "갤럭시 워치6", "action": "구매"},
        {"name": "무선충전기", "action": "구매"},
        {"name": "케어플러스", "action": "가입"}
    ],
    "channel": [
        {"type": "앱", "value": "T world 앱", "action": "추가 정보"},
        {"type":...
2025-09-17 12:45:47,619 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:45:47,620 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:45:47,620 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:45:47,620 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '추가 정보'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:45:47,620 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:45:47,620 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:45:47,749 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:45:47,749 - mms_extractor - INFO - ============================================================
2025-09-17 12:45:47,749 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:45:47,749 - mms_extractor - INFO - ============================================================
2025-09-17 12:45:47,749 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:45:47,749 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:45:47,749 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:45:47,749 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:45:47,749 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:45:47,750 - mms_extractor - INFO - process_message 실행완료: 6.81초
2025-09-17 12:45:47,750 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:45:47,750 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:45:47,750 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:45:47,750 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:45:47,750 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:45:47,750 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:46:14,582 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:46:14,584 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2962자
2025-09-17 12:46:14,585 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 주요 혜택으로는 기기별 최대 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 서비스가 포함됩니다. 고객은 T world 앱이나 공식 웹사이트...
2025-09-17 12:46:14,585 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:46:14,586 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 254자
2025-09-17 12:46:14,586 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:46:14,586 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-09-17 12:46:14,587 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱:접속', '갤럭시 S24:사전예약', '매장:방문', '갤럭시 S24:구매', '할인:수령', '갤럭시 워치6:할인', '무선충전기:수령', '케어플러스:6개월 무료 이용']
2025-09-17 12:46:14,587 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱:접속', '갤럭시 S24:사전예약'), ('갤럭시 S24:사전예약', '갤럭시 S24:구매'), ('매장:방문', '갤럭시 S24:사전예약'), ('갤럭시 S24:구매', '할인:수령'), ('갤럭시 S24:구매', '갤럭시 워치6:할인'), ('갤럭시 S24:구매', '무선충전기:수령'), ('갤럭시 S24:구매', '케어플러스:6개월 무료 이용')]
2025-09-17 12:46:14,587 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:46:14,587 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:46:14,588 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-09-17 12:46:14,589 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:46:14,996 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:46:14,996 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:46:14,996 - mms_extractor - INFO - 🕒 DAG 처리 시간: 27.247초
2025-09-17 12:46:14,996 - mms_extractor - INFO - 📏 DAG 섹션 길이: 254자
2025-09-17 12:46:14,996 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱:접속) -[접속하면]-> (갤럭시 S24:사전예약)
(매장:방문) -[방문하면]-> (갤럭시 S24:사전예약)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)
(갤럭시 S24:구매) -[구매하면]-> (할인:수령)
(갤럭시 S24:구매) -[구매하면]-> (갤럭시 워치6:할인)
(갤럭시 S24:구매) -[구매하면]...
2025-09-17 12:46:14,996 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:46:14,996 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:46:14,996 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-17 12:46:14,996 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱:접속) -[접속하면]-> (갤럭시 S24:사전예약)', '(갤럭시 S24:구매) -[구매하면]-> (갤럭시 워치6:할인)', '(갤럭시 S24:구매) -[구매하면]-> (무선충전기:수령)', '(갤럭시 S24:구매) -[구매하면]-> (케어플러스:6개월 무료 이용)', '(갤럭시 S24:구매) -[구매하면]-> (할인:수령)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)', '(매장:방문) -[방문하면]-> (갤럭시 S24:사전예약)']...
2025-09-17 12:46:14,996 - __main__ - INFO - 추출 완료: 34.057초
2025-09-17 12:46:14,997 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:46:14] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:46:15,023 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:46:15] "GET /health HTTP/1.1" 200 -
2025-09-17 12:51:03,422 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:51:03] "GET /health HTTP/1.1" 200 -
2025-09-17 12:51:03,435 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:51:03,435 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:51:03,436 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:51:03,436 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:51:03,436 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:51:03,436 - mms_extractor - INFO - ============================================================
2025-09-17 12:51:03,436 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:51:03,436 - mms_extractor - INFO - ============================================================
2025-09-17 12:51:03,436 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:51:03,436 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:51:03,436 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:51:03,436 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:51:03,436 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 12:51:03,436 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:51:03,436 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:51:03,436 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:51:03,436 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:51:03,436 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:51:03,436 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:51:03,436 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:51:03,439 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:51:03,441 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:51:03,442 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:51:03,443 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:51:03,443 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:51:03,443 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:51:03,443 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:51:27,894 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:51:27,895 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:51:27,896 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:51:27,896 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:51:27,936 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:51:27,936 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:51:27,936 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:51:27,938 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:51:27,939 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:51:27,940 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:51:27,941 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:51:27,943 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:51:27,943 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:51:27,943 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 24.51초
2025-09-17 12:51:27,943 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:51:27,943 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:51:27,943 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:51:27,993 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:51:27,993 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:51:27,993 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:51:27,993 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:51:27,993 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:51:27,993 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:51:27,993 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:51:27,993 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:51:27,993 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:51:27,993 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 12:51:27,993 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:51:27,993 - mms_extractor - INFO - 구성된 프롬프트 길이: 6233 문자
2025-09-17 12:51:27,993 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 12:51:27,993 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6233)
2025-09-17 12:51:27,993 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:51:27,993 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:51:34,126 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:51:34,127 - mms_extractor - INFO - LLM 응답 길이: 788 문자
2025-09-17 12:51:34,127 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 S24 Ultra", "action": "구매"},
        {"name": "갤럭시 S24+", "action": "구매"},
        {"name": "갤럭시 S24", "action": "구매"},
        {"name": "갤럭시 워치6", "action": "구매"},
        {"name": "무선충전기", "action": "구매"},
        {"name": "케어플러스", "action": "가입"}
    ],
    "channel": [
        {"type": "앱", "value": "T world 앱", "action": "추가 정보"},
        {"type":...
2025-09-17 12:51:34,128 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:51:34,128 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:51:34,128 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:51:34,128 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '추가 정보'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:51:34,128 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:51:34,128 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:51:34,245 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:51:34,246 - mms_extractor - INFO - ============================================================
2025-09-17 12:51:34,246 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:51:34,246 - mms_extractor - INFO - ============================================================
2025-09-17 12:51:34,246 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:51:34,246 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:51:34,246 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:51:34,246 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:51:34,246 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:51:34,246 - mms_extractor - INFO - process_message 실행완료: 30.81초
2025-09-17 12:51:34,246 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:51:34,246 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:51:34,246 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:51:34,246 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:51:34,246 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:51:34,246 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:51:54,950 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:51:54,950 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2368자
2025-09-17 12:51:54,950 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인과 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱과 온라인 매장 예약 링...
2025-09-17 12:51:54,950 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:51:54,950 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 259자
2025-09-17 12:51:54,951 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:51:54,951 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-09-17 12:51:54,951 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱:접속', '갤럭시 S24:사전예약', '온라인 매장:방문', '갤럭시 S24:구매', '할인:수령', '갤럭시 워치6:50% 할인', '무선충전기:수령', '케어플러스:6개월 무료']
2025-09-17 12:51:54,951 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱:접속', '갤럭시 S24:사전예약'), ('갤럭시 S24:사전예약', '갤럭시 S24:구매'), ('갤럭시 S24:사전예약', '갤럭시 워치6:50% 할인'), ('갤럭시 S24:사전예약', '무선충전기:수령'), ('갤럭시 S24:사전예약', '케어플러스:6개월 무료'), ('온라인 매장:방문', '갤럭시 S24:사전예약'), ('갤럭시 S24:구매', '할인:수령')]
2025-09-17 12:51:54,951 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:51:54,951 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:51:54,951 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-09-17 12:51:54,951 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:51:55,177 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:51:55,177 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:51:55,177 - mms_extractor - INFO - 🕒 DAG 처리 시간: 20.931초
2025-09-17 12:51:55,177 - mms_extractor - INFO - 📏 DAG 섹션 길이: 259자
2025-09-17 12:51:55,177 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱:접속) -[통해]-> (갤럭시 S24:사전예약)
(온라인 매장:방문) -[통해]-> (갤럭시 S24:사전예약)
(갤럭시 S24:사전예약) -[가입하면]-> (갤럭시 S24:구매)
(갤럭시 S24:구매) -[구매하면]-> (할인:수령)
(갤럭시 S24:사전예약) -[가입하면]-> (갤럭시 워치6:50% 할인)
(갤럭시 S24:사전예약) -...
2025-09-17 12:51:55,177 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:51:55,177 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:51:55,177 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-17 12:51:55,177 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱:접속) -[통해]-> (갤럭시 S24:사전예약)', '(갤럭시 S24:구매) -[구매하면]-> (할인:수령)', '(갤럭시 S24:사전예약) -[가입하면]-> (갤럭시 S24:구매)', '(갤럭시 S24:사전예약) -[가입하면]-> (갤럭시 워치6:50% 할인)', '(갤럭시 S24:사전예약) -[가입하면]-> (무선충전기:수령)', '(갤럭시 S24:사전예약) -[가입하면]-> (케어플러스:6개월 무료)', '(온라인 매장:방문) -[통해]-> (갤럭시 S24:사전예약)']...
2025-09-17 12:51:55,177 - __main__ - INFO - 추출 완료: 51.742초
2025-09-17 12:51:55,178 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:51:55] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:51:55,205 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:51:55] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:07,861 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:07] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:15,251 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:15] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:15,286 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:15] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:18,237 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:18] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:18,250 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:54:18,250 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:54:18,250 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:54:18,251 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:54:18,251 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:54:18,251 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:18,251 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:54:18,251 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:18,251 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:54:18,251 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:54:18,251 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:54:18,251 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:54:18,251 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-17 12:54:18,251 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:54:18,251 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:54:18,251 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:54:18,251 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:54:18,251 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:54:18,251 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:54:18,251 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:54:18,254 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:54:18,256 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:54:18,257 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:54:18,258 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:54:18,258 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:54:18,258 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:54:18,258 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:54:18,365 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:54:18,365 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:54:18,366 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:54:18,366 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:54:18,408 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:54:18,408 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:54:18,408 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:54:18,410 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:54:18,411 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:54:18,412 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:54:18,413 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:54:18,414 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:54:18,414 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:54:18,414 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.16초
2025-09-17 12:54:18,414 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:54:18,414 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:54:18,414 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:54:18,464 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:54:18,464 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:54:18,464 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:54:18,464 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:54:18,464 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:54:18,464 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:54:18,464 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:54:18,464 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:54:18,465 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:54:18,466 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 10개
2025-09-17 12:54:18,466 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': 'CU 할인', 'action': '기타'}, {'name': 'GALAXY', 'action': '기타'}]
2025-09-17 12:54:18,466 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:54:18,466 - mms_extractor - INFO - 구성된 프롬프트 길이: 5621 문자
2025-09-17 12:54:18,466 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-17 12:54:18,466 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5621)
2025-09-17 12:54:18,466 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:54:18,466 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:54:24,773 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:24] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:26,452 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:54:26,453 - mms_extractor - INFO - LLM 응답 길이: 1173 문자
2025-09-17 12:54:26,453 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "갤럭시 S24 Ultra",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24+",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24",
            "action": "구매"
        },
        {
            "name": "갤럭시 워치6",
            "action": "구매"
        },
        {
            "name": "무선충전기",
            "a...
2025-09-17 12:54:26,453 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:54:26,454 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:54:26,454 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:54:26,454 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '증정'}, {'name': '케어플러스', 'action': '무료 이용'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '가입'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '가입'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:54:26,454 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:54:26,454 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:54:26,568 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:54:26,568 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:26,568 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:54:26,568 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:26,568 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:54:26,568 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:54:26,568 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:54:26,568 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:54:26,568 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:54:26,568 - mms_extractor - INFO - process_message 실행완료: 8.32초
2025-09-17 12:54:26,568 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:54:26,568 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:54:26,568 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:54:26,569 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:54:26,569 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:54:26,569 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:54:39,602 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:39] "GET /health HTTP/1.1" 200 -
2025-09-17 12:54:39,614 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:54:39,614 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:54:39,614 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:54:39,614 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:54:39,614 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:54:39,614 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:39,614 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:54:39,614 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:39,614 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:54:39,614 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:54:39,614 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:54:39,614 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:54:39,614 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 12:54:39,614 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:54:39,614 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:54:39,614 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:54:39,614 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:54:39,614 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:54:39,614 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:54:39,614 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:54:39,616 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:54:39,618 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:54:39,619 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:54:39,620 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:54:39,620 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:54:39,620 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:54:39,620 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:54:39,732 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:54:39,732 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:54:39,733 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:54:39,733 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:54:39,773 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:54:39,773 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:54:39,773 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:54:39,775 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:54:39,776 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:54:39,776 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:54:39,777 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:54:39,779 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:54:39,779 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:54:39,779 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.16초
2025-09-17 12:54:39,779 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:54:39,779 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:54:39,779 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:54:39,815 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:54:39,815 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:54:39,815 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:54:39,815 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:54:39,815 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:54:39,816 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:54:39,816 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:54:39,816 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:54:39,816 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:54:39,816 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 12:54:39,816 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:54:39,816 - mms_extractor - INFO - 구성된 프롬프트 길이: 6233 문자
2025-09-17 12:54:39,816 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 12:54:39,816 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6233)
2025-09-17 12:54:39,816 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:54:39,816 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:54:45,899 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:54:45,902 - mms_extractor - INFO - LLM 응답 길이: 788 문자
2025-09-17 12:54:45,902 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 S24 Ultra", "action": "구매"},
        {"name": "갤럭시 S24+", "action": "구매"},
        {"name": "갤럭시 S24", "action": "구매"},
        {"name": "갤럭시 워치6", "action": "구매"},
        {"name": "무선충전기", "action": "구매"},
        {"name": "케어플러스", "action": "가입"}
    ],
    "channel": [
        {"type": "앱", "value": "T world 앱", "action": "추가 정보"},
        {"type":...
2025-09-17 12:54:45,902 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:54:45,903 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:54:45,904 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:54:45,904 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '추가 정보'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:54:45,905 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:54:45,905 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:54:46,040 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:54:46,040 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:46,040 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:54:46,040 - mms_extractor - INFO - ============================================================
2025-09-17 12:54:46,040 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:54:46,040 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:54:46,040 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:54:46,040 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:54:46,040 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:54:46,040 - mms_extractor - INFO - process_message 실행완료: 6.43초
2025-09-17 12:54:46,040 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:54:46,040 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:54:46,040 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:54:46,040 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:54:46,040 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:54:46,040 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:54:48,849 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:54:48,851 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2552자
2025-09-17 12:54:48,851 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱 또는 온라인 매장 예...
2025-09-17 12:54:48,852 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:54:48,852 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 237자
2025-09-17 12:54:48,852 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:54:48,853 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-17 12:54:48,853 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['예약 채널:접속', '갤럭시 S24:사전예약', '갤럭시 S24:구매', '갤럭시 S24:할인', '갤럭시 워치6:50%할인', '무선충전기:무료증정', '케어플러스:6개월무료']
2025-09-17 12:54:48,853 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('예약 채널:접속', '갤럭시 S24:사전예약'), ('갤럭시 S24:사전예약', '갤럭시 S24:구매'), ('갤럭시 S24:사전예약', '갤럭시 S24:할인'), ('갤럭시 S24:사전예약', '갤럭시 워치6:50%할인'), ('갤럭시 S24:사전예약', '무선충전기:무료증정'), ('갤럭시 S24:사전예약', '케어플러스:6개월무료')]
2025-09-17 12:54:48,853 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:54:48,853 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:54:48,854 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-17 12:54:48,855 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:54:49,053 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:54:49,054 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:54:49,054 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.485초
2025-09-17 12:54:49,054 - mms_extractor - INFO - 📏 DAG 섹션 길이: 237자
2025-09-17 12:54:49,054 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (예약 채널:접속) -[통해]-> (갤럭시 S24:사전예약)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:할인)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 워치6:50%할인)
(갤럭시 S24:사전예약) -[사전예약하면]-> (무선충전기:무료증정)
(갤럭...
2025-09-17 12:54:49,054 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:54:49,054 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:54:49,054 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-17 12:54:49,054 - __main__ - INFO - DAG 내용 미리보기: ['(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:할인)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 워치6:50%할인)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (무선충전기:무료증정)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (케어플러스:6개월무료)', '(예약 채널:접속) -[통해]-> (갤럭시 S24:사전예약)']...
2025-09-17 12:54:49,054 - __main__ - INFO - 추출 완료: 30.803초
2025-09-17 12:54:49,055 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:54:49] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:55:09,014 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:55:09,017 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2686자
2025-09-17 12:55:09,017 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱 또는 매장 예약 웹사...
2025-09-17 12:55:09,017 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:55:09,018 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 235자
2025-09-17 12:55:09,018 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:55:09,018 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-17 12:55:09,018 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱:예약', '갤럭시 S24 시리즈:구매', '매장:방문', '할인:수령', '갤럭시 워치6:50% 할인', '무선충전기:수령', '케어플러스:6개월 무료']
2025-09-17 12:55:09,018 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱:예약', '갤럭시 S24 시리즈:구매'), ('갤럭시 S24 시리즈:구매', '할인:수령'), ('갤럭시 S24 시리즈:구매', '갤럭시 워치6:50% 할인'), ('갤럭시 S24 시리즈:구매', '무선충전기:수령'), ('갤럭시 S24 시리즈:구매', '케어플러스:6개월 무료'), ('매장:방문', '갤럭시 S24 시리즈:구매')]
2025-09-17 12:55:09,018 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:55:09,018 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:55:09,019 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-17 12:55:09,020 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:55:09,253 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:55:09,254 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:55:09,254 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.213초
2025-09-17 12:55:09,254 - mms_extractor - INFO - 📏 DAG 섹션 길이: 235자
2025-09-17 12:55:09,254 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱:예약) -[예약하면]-> (갤럭시 S24 시리즈:구매)
(매장:방문) -[방문하면]-> (갤럭시 S24 시리즈:구매)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50% 할인)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:수령)
(갤럭시 S...
2025-09-17 12:55:09,254 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:55:09,254 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:55:09,254 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-17 12:55:09,254 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱:예약) -[예약하면]-> (갤럭시 S24 시리즈:구매)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50% 할인)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:수령)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (케어플러스:6개월 무료)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)', '(매장:방문) -[방문하면]-> (갤럭시 S24 시리즈:구매)']...
2025-09-17 12:55:09,254 - __main__ - INFO - 추출 완료: 29.640초
2025-09-17 12:55:09,254 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:55:09] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:55:09,278 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:55:09] "GET /health HTTP/1.1" 200 -
2025-09-17 12:56:35,631 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:56:35] "GET /health HTTP/1.1" 200 -
2025-09-17 12:56:35,649 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:56:35,650 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:56:35,650 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:56:35,650 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:56:35,650 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:56:35,650 - mms_extractor - INFO - ============================================================
2025-09-17 12:56:35,650 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:56:35,650 - mms_extractor - INFO - ============================================================
2025-09-17 12:56:35,650 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:56:35,650 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:56:35,650 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:56:35,650 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:56:35,650 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 12:56:35,650 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:56:35,650 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:56:35,650 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:56:35,650 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:56:35,650 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:56:35,650 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:56:35,650 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:56:35,652 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:56:35,655 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:56:35,655 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:56:35,657 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:56:35,657 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:56:35,657 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:56:35,657 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:56:35,788 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:56:35,788 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:56:35,789 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:56:35,789 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:56:35,831 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:56:35,831 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:56:35,831 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:56:35,833 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:56:35,834 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:56:35,835 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:56:35,835 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:56:35,837 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:56:35,837 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:56:35,838 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.19초
2025-09-17 12:56:35,838 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:56:35,838 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:56:35,838 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:56:35,879 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:56:35,879 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:56:35,880 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:56:35,880 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:56:35,880 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:56:35,880 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:56:35,880 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:56:35,880 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:56:35,880 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:56:35,880 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 12:56:35,880 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:56:35,880 - mms_extractor - INFO - 구성된 프롬프트 길이: 6233 문자
2025-09-17 12:56:35,880 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 12:56:35,880 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6233)
2025-09-17 12:56:35,880 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:56:35,880 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:56:41,847 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:56:41,848 - mms_extractor - INFO - LLM 응답 길이: 788 문자
2025-09-17 12:56:41,848 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 S24 Ultra", "action": "구매"},
        {"name": "갤럭시 S24+", "action": "구매"},
        {"name": "갤럭시 S24", "action": "구매"},
        {"name": "갤럭시 워치6", "action": "구매"},
        {"name": "무선충전기", "action": "구매"},
        {"name": "케어플러스", "action": "가입"}
    ],
    "channel": [
        {"type": "앱", "value": "T world 앱", "action": "추가 정보"},
        {"type":...
2025-09-17 12:56:41,848 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:56:41,849 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:56:41,849 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:56:41,849 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '추가 정보'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:56:41,849 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:56:41,849 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:56:41,972 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:56:41,972 - mms_extractor - INFO - ============================================================
2025-09-17 12:56:41,972 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:56:41,972 - mms_extractor - INFO - ============================================================
2025-09-17 12:56:41,972 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:56:41,972 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:56:41,972 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:56:41,972 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:56:41,972 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:56:41,972 - mms_extractor - INFO - process_message 실행완료: 6.32초
2025-09-17 12:56:41,972 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:56:41,972 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:56:41,972 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:56:41,972 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:56:41,972 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:56:41,972 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:57:04,128 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:57:04,131 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2552자
2025-09-17 12:57:04,131 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱 또는 온라인 매장 예...
2025-09-17 12:57:04,131 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:57:04,131 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 237자
2025-09-17 12:57:04,132 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:57:04,132 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-17 12:57:04,132 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['예약 채널:접속', '갤럭시 S24:사전예약', '갤럭시 S24:구매', '갤럭시 S24:할인', '갤럭시 워치6:50%할인', '무선충전기:무료증정', '케어플러스:6개월무료']
2025-09-17 12:57:04,132 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('예약 채널:접속', '갤럭시 S24:사전예약'), ('갤럭시 S24:사전예약', '갤럭시 S24:구매'), ('갤럭시 S24:사전예약', '갤럭시 S24:할인'), ('갤럭시 S24:사전예약', '갤럭시 워치6:50%할인'), ('갤럭시 S24:사전예약', '무선충전기:무료증정'), ('갤럭시 S24:사전예약', '케어플러스:6개월무료')]
2025-09-17 12:57:04,132 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:57:04,132 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:57:04,133 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-17 12:57:04,134 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:57:04,357 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:57:04,357 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:57:04,357 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.385초
2025-09-17 12:57:04,357 - mms_extractor - INFO - 📏 DAG 섹션 길이: 237자
2025-09-17 12:57:04,357 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (예약 채널:접속) -[통해]-> (갤럭시 S24:사전예약)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:할인)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 워치6:50%할인)
(갤럭시 S24:사전예약) -[사전예약하면]-> (무선충전기:무료증정)
(갤럭...
2025-09-17 12:57:04,357 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:57:04,357 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:57:04,357 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-17 12:57:04,357 - __main__ - INFO - DAG 내용 미리보기: ['(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:할인)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 워치6:50%할인)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (무선충전기:무료증정)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (케어플러스:6개월무료)', '(예약 채널:접속) -[통해]-> (갤럭시 S24:사전예약)']...
2025-09-17 12:57:04,358 - __main__ - INFO - 추출 완료: 28.708초
2025-09-17 12:57:04,358 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:57:04] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:57:04,380 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:57:04] "GET /health HTTP/1.1" 200 -
2025-09-17 12:58:25,165 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:58:25] "GET /health HTTP/1.1" 200 -
2025-09-17 12:58:29,981 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:58:29] "GET /health HTTP/1.1" 200 -
2025-09-17 12:58:30,018 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:58:30] "GET /health HTTP/1.1" 200 -
2025-09-17 12:58:31,293 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:58:31] "GET /health HTTP/1.1" 200 -
2025-09-17 12:58:31,307 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:58:31,307 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:58:31,307 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:58:31,307 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:58:31,307 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:58:31,307 - mms_extractor - INFO - ============================================================
2025-09-17 12:58:31,308 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:58:31,308 - mms_extractor - INFO - ============================================================
2025-09-17 12:58:31,308 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:58:31,308 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:58:31,308 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:58:31,308 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:58:31,308 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-17 12:58:31,308 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:58:31,308 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:58:31,308 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:58:31,308 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:58:31,308 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:58:31,308 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:58:31,308 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:58:31,310 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:58:31,313 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:58:31,313 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:58:31,314 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:58:31,315 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:58:31,315 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:58:31,315 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:58:31,430 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:58:31,430 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:58:31,431 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:58:31,431 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:58:31,471 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:58:31,472 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:58:31,472 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:58:31,474 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:58:31,475 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:58:31,475 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:58:31,476 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:58:31,478 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:58:31,478 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:58:31,478 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.17초
2025-09-17 12:58:31,478 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:58:31,478 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:58:31,478 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:58:31,519 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:58:31,519 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:58:31,519 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:58:31,519 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:58:31,519 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:58:31,519 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:58:31,519 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:58:31,519 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:58:31,519 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:58:31,520 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 10개
2025-09-17 12:58:31,520 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': 'CU 할인', 'action': '기타'}, {'name': 'GALAXY', 'action': '기타'}]
2025-09-17 12:58:31,520 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:58:31,520 - mms_extractor - INFO - 구성된 프롬프트 길이: 5621 문자
2025-09-17 12:58:31,520 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-17 12:58:31,520 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5621)
2025-09-17 12:58:31,520 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:58:31,520 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:58:39,142 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:58:39,145 - mms_extractor - INFO - LLM 응답 길이: 1170 문자
2025-09-17 12:58:39,145 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "갤럭시 S24 Ultra",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24+",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24",
            "action": "구매"
        },
        {
            "name": "갤럭시 워치6",
            "action": "구매"
        },
        {
            "name": "무선충전기",
            "a...
2025-09-17 12:58:39,145 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:58:39,146 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:58:39,146 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:58:39,146 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '증정'}, {'name': '케어플러스', 'action': '무료'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '가입'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '가입'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:58:39,146 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:58:39,146 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:58:39,278 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:58:39,278 - mms_extractor - INFO - ============================================================
2025-09-17 12:58:39,278 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:58:39,278 - mms_extractor - INFO - ============================================================
2025-09-17 12:58:39,278 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:58:39,278 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:58:39,279 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:58:39,279 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:58:39,279 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:58:39,279 - mms_extractor - INFO - process_message 실행완료: 7.97초
2025-09-17 12:58:39,279 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:58:39,279 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:58:39,279 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:58:39,279 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:58:39,279 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:58:39,279 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:58:56,182 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:58:56] "GET /health HTTP/1.1" 200 -
2025-09-17 12:59:01,518 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:59:01,520 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2552자
2025-09-17 12:59:01,521 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱 또는 온라인 매장 예...
2025-09-17 12:59:01,521 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:59:01,521 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 237자
2025-09-17 12:59:01,521 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:59:01,522 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-17 12:59:01,522 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['예약 채널:접속', '갤럭시 S24:사전예약', '갤럭시 S24:구매', '갤럭시 S24:할인', '갤럭시 워치6:50%할인', '무선충전기:무료증정', '케어플러스:6개월무료']
2025-09-17 12:59:01,522 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('예약 채널:접속', '갤럭시 S24:사전예약'), ('갤럭시 S24:사전예약', '갤럭시 S24:구매'), ('갤럭시 S24:사전예약', '갤럭시 S24:할인'), ('갤럭시 S24:사전예약', '갤럭시 워치6:50%할인'), ('갤럭시 S24:사전예약', '무선충전기:무료증정'), ('갤럭시 S24:사전예약', '케어플러스:6개월무료')]
2025-09-17 12:59:01,522 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:59:01,522 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:59:01,522 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-17 12:59:01,523 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:59:01,757 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:59:01,758 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:59:01,758 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.479초
2025-09-17 12:59:01,758 - mms_extractor - INFO - 📏 DAG 섹션 길이: 237자
2025-09-17 12:59:01,758 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (예약 채널:접속) -[통해]-> (갤럭시 S24:사전예약)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:할인)
(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 워치6:50%할인)
(갤럭시 S24:사전예약) -[사전예약하면]-> (무선충전기:무료증정)
(갤럭...
2025-09-17 12:59:01,758 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:59:01,758 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:59:01,758 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-17 12:59:01,758 - __main__ - INFO - DAG 내용 미리보기: ['(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:구매)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 S24:할인)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (갤럭시 워치6:50%할인)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (무선충전기:무료증정)', '(갤럭시 S24:사전예약) -[사전예약하면]-> (케어플러스:6개월무료)', '(예약 채널:접속) -[통해]-> (갤럭시 S24:사전예약)']...
2025-09-17 12:59:01,758 - __main__ - INFO - 추출 완료: 30.451초
2025-09-17 12:59:01,759 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:59:01] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:59:05,357 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:59:05] "GET /health HTTP/1.1" 200 -
2025-09-17 12:59:05,373 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:59:05,374 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:59:05,374 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:59:05,374 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:59:05,374 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:59:05,374 - mms_extractor - INFO - ============================================================
2025-09-17 12:59:05,374 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:59:05,374 - mms_extractor - INFO - ============================================================
2025-09-17 12:59:05,374 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:59:05,374 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:59:05,374 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:59:05,374 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:59:05,374 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 12:59:05,374 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 12:59:05,374 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:59:05,374 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:59:05,374 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:59:05,374 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:59:05,374 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:59:05,374 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:59:05,377 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:59:05,380 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:59:05,381 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:59:05,382 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:59:05,382 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:59:05,382 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:59:05,382 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:59:05,494 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:59:05,494 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:59:05,495 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:59:05,495 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:59:05,536 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:59:05,537 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:59:05,537 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:59:05,538 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:59:05,539 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:59:05,540 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:59:05,541 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:59:05,542 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:59:05,543 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:59:05,543 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.17초
2025-09-17 12:59:05,543 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:59:05,543 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:59:05,543 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:59:05,580 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:59:05,580 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:59:05,580 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:59:05,580 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:59:05,580 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:59:05,580 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:59:05,580 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:59:05,580 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:59:05,580 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:59:05,580 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 12:59:05,580 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:59:05,580 - mms_extractor - INFO - 구성된 프롬프트 길이: 6233 문자
2025-09-17 12:59:05,580 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 12:59:05,580 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6233)
2025-09-17 12:59:05,580 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:59:05,580 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 12:59:11,805 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:59:11,809 - mms_extractor - INFO - LLM 응답 길이: 788 문자
2025-09-17 12:59:11,809 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 S24 Ultra", "action": "구매"},
        {"name": "갤럭시 S24+", "action": "구매"},
        {"name": "갤럭시 S24", "action": "구매"},
        {"name": "갤럭시 워치6", "action": "구매"},
        {"name": "무선충전기", "action": "구매"},
        {"name": "케어플러스", "action": "가입"}
    ],
    "channel": [
        {"type": "앱", "value": "T world 앱", "action": "추가 정보"},
        {"type":...
2025-09-17 12:59:11,809 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 12:59:11,810 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 12:59:11,810 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 12:59:11,811 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '추가 정보'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 12:59:11,811 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 12:59:11,812 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 12:59:11,946 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 12:59:11,947 - mms_extractor - INFO - ============================================================
2025-09-17 12:59:11,947 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 12:59:11,947 - mms_extractor - INFO - ============================================================
2025-09-17 12:59:11,947 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 12:59:11,947 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 12:59:11,947 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 12:59:11,947 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 12:59:11,947 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 12:59:11,947 - mms_extractor - INFO - process_message 실행완료: 6.57초
2025-09-17 12:59:11,947 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 12:59:11,947 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 12:59:11,947 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 12:59:11,947 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 12:59:11,947 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 12:59:11,947 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 12:59:35,019 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:59:35,021 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2686자
2025-09-17 12:59:35,022 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱 또는 매장 예약 웹사...
2025-09-17 12:59:35,022 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 12:59:35,022 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 235자
2025-09-17 12:59:35,023 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 12:59:35,023 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-17 12:59:35,024 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱:예약', '갤럭시 S24 시리즈:구매', '매장:방문', '할인:수령', '갤럭시 워치6:50% 할인', '무선충전기:수령', '케어플러스:6개월 무료']
2025-09-17 12:59:35,024 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱:예약', '갤럭시 S24 시리즈:구매'), ('갤럭시 S24 시리즈:구매', '할인:수령'), ('갤럭시 S24 시리즈:구매', '갤럭시 워치6:50% 할인'), ('갤럭시 S24 시리즈:구매', '무선충전기:수령'), ('갤럭시 S24 시리즈:구매', '케어플러스:6개월 무료'), ('매장:방문', '갤럭시 S24 시리즈:구매')]
2025-09-17 12:59:35,024 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 12:59:35,024 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:59:35,024 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-17 12:59:35,025 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 12:59:35,258 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 12:59:35,258 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 12:59:35,259 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.312초
2025-09-17 12:59:35,259 - mms_extractor - INFO - 📏 DAG 섹션 길이: 235자
2025-09-17 12:59:35,259 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱:예약) -[예약하면]-> (갤럭시 S24 시리즈:구매)
(매장:방문) -[방문하면]-> (갤럭시 S24 시리즈:구매)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50% 할인)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:수령)
(갤럭시 S...
2025-09-17 12:59:35,259 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 12:59:35,259 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 12:59:35,259 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-17 12:59:35,259 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱:예약) -[예약하면]-> (갤럭시 S24 시리즈:구매)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50% 할인)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:수령)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (케어플러스:6개월 무료)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)', '(매장:방문) -[방문하면]-> (갤럭시 S24 시리즈:구매)']...
2025-09-17 12:59:35,259 - __main__ - INFO - 추출 완료: 29.885초
2025-09-17 12:59:35,259 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:59:35] "POST /extract HTTP/1.1" 200 -
2025-09-17 12:59:35,282 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:59:35] "GET /health HTTP/1.1" 200 -
2025-09-17 12:59:53,073 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:59:53] "GET /health HTTP/1.1" 200 -
2025-09-17 12:59:56,896 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 12:59:56] "GET /health HTTP/1.1" 200 -
2025-09-17 12:59:56,908 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-17 12:59:56,908 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 12:59:56,908 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 12:59:56,908 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-17 12:59:56,908 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 12:59:56,908 - mms_extractor - INFO - ============================================================
2025-09-17 12:59:56,908 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 12:59:56,908 - mms_extractor - INFO - ============================================================
2025-09-17 12:59:56,908 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-17 12:59:56,908 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-17 12:59:56,908 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 12:59:56,908 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 12:59:56,908 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 12:59:56,908 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-17 12:59:56,908 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 12:59:56,908 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 12:59:56,908 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 12:59:56,909 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 12:59:56,909 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 12:59:56,909 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-17 12:59:56,910 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 12:59:56,912 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-17 12:59:56,913 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 갤럭시 S24 Ultra 최대 30만원 할인 갤럭시 S24 최대 25만원 할인 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 갤럭시 워치6 50 할인 무선충전기 무료 증정 케어플러스 무료']...
2025-09-17 12:59:56,914 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-17 12:59:56,914 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '갤럭시', '충전기']
2025-09-17 12:59:56,914 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '갤럭시']
2025-09-17 12:59:56,914 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 12:59:57,032 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (1747, 3)
2025-09-17 12:59:57,032 - mms_extractor - INFO - 퍼지 매칭 성공: 1747개 결과
2025-09-17 12:59:57,033 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.4}]
2025-09-17 12:59:57,033 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 12:59:57,073 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (1747, 3)
2025-09-17 12:59:57,074 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'T갤럭시클럽N', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'IB 심 2일', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'TAC+2 금융사고', 'sim': 0.36000000000000004}]
2025-09-17 12:59:57,074 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 12:59:57,075 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 12개
2025-09-17 12:59:57,077 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-17 12:59:57,077 - mms_extractor - INFO - 통합된 후보 아이템 수: 13개
2025-09-17 12:59:57,078 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:59:57,079 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-17 12:59:57,080 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}, {'item_nm': 'K3', 'item_id': ['XXC5']}]
2025-09-17 12:59:57,080 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.17초
2025-09-17 12:59:57,080 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:59:57,080 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-17 12:59:57,080 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 12:59:57,115 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 12:59:57,115 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 12:59:57,115 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-17 12:59:57,115 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 12:59:57,115 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-17 12:59:57,115 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시', 'K3', '충전', 'T Golf', 'CU 할인', 'T 탭 18', 'T 탭 24', 'T 탭 9', '갤럭시S22 Ultra 클럽', '일상플러스(무료)']
2025-09-17 12:59:57,115 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-17 12:59:57,115 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 12:59:57,115 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'CU 할인', 'item_id': ['PR00000344']}, {'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-17 12:59:57,115 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 12:59:57,115 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 12:59:57,115 - mms_extractor - INFO - 구성된 프롬프트 길이: 6233 문자
2025-09-17 12:59:57,115 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 12:59:57,115 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6233)
2025-09-17 12:59:57,115 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 12:59:57,115 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 13:00:03,127 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 13:00:03,131 - mms_extractor - INFO - LLM 응답 길이: 788 문자
2025-09-17 13:00:03,132 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 S24 Ultra", "action": "구매"},
        {"name": "갤럭시 S24+", "action": "구매"},
        {"name": "갤럭시 S24", "action": "구매"},
        {"name": "갤럭시 워치6", "action": "구매"},
        {"name": "무선충전기", "action": "구매"},
        {"name": "케어플러스", "action": "가입"}
    ],
    "channel": [
        {"type": "앱", "value": "T world 앱", "action": "추가 정보"},
        {"type":...
2025-09-17 13:00:03,132 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 13:00:03,134 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 13:00:03,134 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 13:00:03,134 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '추가 정보'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-17 13:00:03,135 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 13:00:03,135 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-17 13:00:03,459 - mms_extractor - INFO - 엔티티 추출에 prompts 디렉토리의 DETAILED_ENTITY_EXTRACTION_PROMPT 사용
2025-09-17 13:00:03,459 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 21696)
2025-09-17 13:00:03,459 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-17 13:00:03,459 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-17 13:00:04,344 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 13:00:04,492 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.36초
2025-09-17 13:00:04,495 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 13:00:04,495 - mms_extractor - INFO - ============================================================
2025-09-17 13:00:04,495 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 13:00:04,495 - mms_extractor - INFO - ============================================================
2025-09-17 13:00:04,495 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-17 13:00:04,495 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-17 13:00:04,495 - mms_extractor - INFO - 상품 수: 6개
2025-09-17 13:00:04,495 - mms_extractor - INFO - 채널 수: 4개
2025-09-17 13:00:04,495 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 13:00:04,495 - mms_extractor - INFO - process_message 실행완료: 7.59초
2025-09-17 13:00:04,495 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 13:00:04,495 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 13:00:04,495 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-17 13:00:04,496 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12767a8d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12767ac30> root_client=<openai.OpenAI object at 0x127692140> root_async_client=<openai.AsyncOpenAI object at 0x12767a9f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 13:00:04,496 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 13:00:04,496 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3313자
2025-09-17 13:00:27,497 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 13:00:27,500 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2686자
2025-09-17 13:00:27,500 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 사전예약을 통해 기기 할인, 갤럭시 워치6 할인, 무선충전기 무료 증정, 케어플러스 6개월 무료 혜택을 제공합니다. 예약 방법은 T world 앱 또는 매장 예약 웹사...
2025-09-17 13:00:27,500 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 13:00:27,501 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 235자
2025-09-17 13:00:27,501 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 13:00:27,501 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-17 13:00:27,502 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱:예약', '갤럭시 S24 시리즈:구매', '매장:방문', '할인:수령', '갤럭시 워치6:50% 할인', '무선충전기:수령', '케어플러스:6개월 무료']
2025-09-17 13:00:27,502 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱:예약', '갤럭시 S24 시리즈:구매'), ('갤럭시 S24 시리즈:구매', '할인:수령'), ('갤럭시 S24 시리즈:구매', '갤럭시 워치6:50% 할인'), ('갤럭시 S24 시리즈:구매', '무선충전기:수령'), ('갤럭시 S24 시리즈:구매', '케어플러스:6개월 무료'), ('매장:방문', '갤럭시 S24 시리즈:구매')]
2025-09-17 13:00:27,502 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 13:00:27,502 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 13:00:27,502 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-17 13:00:27,504 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 13:00:27,765 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-17 13:00:27,765 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-17 13:00:27,765 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.270초
2025-09-17 13:00:27,765 - mms_extractor - INFO - 📏 DAG 섹션 길이: 235자
2025-09-17 13:00:27,765 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱:예약) -[예약하면]-> (갤럭시 S24 시리즈:구매)
(매장:방문) -[방문하면]-> (갤럭시 S24 시리즈:구매)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50% 할인)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:수령)
(갤럭시 S...
2025-09-17 13:00:27,765 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 13:00:27,765 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-17 13:00:27,765 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-17 13:00:27,765 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱:예약) -[예약하면]-> (갤럭시 S24 시리즈:구매)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50% 할인)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:수령)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (케어플러스:6개월 무료)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)', '(매장:방문) -[방문하면]-> (갤럭시 S24 시리즈:구매)']...
2025-09-17 13:00:27,765 - __main__ - INFO - 추출 완료: 30.857초
2025-09-17 13:00:27,766 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 13:00:27] "POST /extract HTTP/1.1" 200 -
2025-09-17 13:00:27,792 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 13:00:27] "GET /health HTTP/1.1" 200 -
