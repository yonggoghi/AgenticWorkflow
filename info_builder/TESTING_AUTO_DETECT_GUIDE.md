# í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ + ìƒì„¸ í˜ì´ì§€ í¬ë¡¤ë§ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ¯ í…ŒìŠ¤íŠ¸ ëª©ì 

ì´ ê°€ì´ë“œëŠ” ë‹¤ìŒì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤:
1. âœ… í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ (ë¬´í•œ ìŠ¤í¬ë¡¤/í˜ì´ì§€ë„¤ì´ì…˜/ì •ì )
2. âœ… ìë™ ê°ì§€ëœ ì „ëµì— ë”°ë¥¸ í¬ë¡¤ë§
3. âœ… ìƒì„¸ í˜ì´ì§€ ìë™ ë°©ë¬¸ ë° ì •ë³´ ì¶”ì¶œ
4. âœ… ì„±ëŠ¥ ê°œì„  í™•ì¸

---

## ğŸš€ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (ê¶Œì¥)

### ë°©ë²• 1: CLI ëª…ë ¹ì–´ (ê°€ì¥ ë¹ ë¦„)

```bash
cd /Users/yongwook/workspace/AgenticWorkflow/info_builder

# ìë™ ê°ì§€ + ìƒì„¸ í˜ì´ì§€ 3ê°œë§Œ
python product_crawler.py \
    "https://m.sktuniverse.co.kr/category/sub/tab/detail?ctanId=CC00000012&ctgId=CA00000001" \
    --details \
    --max-details 3 \
    --output output/quick_test
```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: ì•½ 2-3ë¶„

**í™•ì¸ í¬ì¸íŠ¸**:
```
âœ… í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ ì¤‘...
âœ… ê°ì§€ ê²°ê³¼: infinite_scroll (í™•ì‹ ë„: 0.90)
âœ… X/Xê°œ ìƒí’ˆì˜ detail_url ìº¡ì²˜ ì™„ë£Œ
âœ… ì´ 3ê°œì˜ ìƒì„¸ í˜ì´ì§€ë¥¼ í¬ë¡¤ë§í•©ë‹ˆë‹¤.
```

---

### ë°©ë²• 2: ì „ìš© í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

#### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ (ê¶Œì¥)

```bash
# ì˜µì…˜ 1: ê¸°ë³¸ í…ŒìŠ¤íŠ¸
python test_auto_detect_with_details.py 1
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
================================================================================
ğŸ§ª í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ + ìƒì„¸ í˜ì´ì§€ í¬ë¡¤ë§ í…ŒìŠ¤íŠ¸
================================================================================

[í…ŒìŠ¤íŠ¸ ì‹œì‘]
URL: https://m.sktuniverse.co.kr/...
ìë™ ê°ì§€: í™œì„±í™”
ìƒì„¸ í˜ì´ì§€: ìµœëŒ€ 3ê°œ í¬ë¡¤ë§
--------------------------------------------------------------------------------

[1ë‹¨ê³„] ëª©ë¡ í˜ì´ì§€ í¬ë¡¤ë§
  ğŸ” í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ ì¤‘...
  âœ… ê°ì§€ ê²°ê³¼: infinite_scroll (í™•ì‹ ë„: 0.90)
     ë¬´í•œ ìŠ¤í¬ë¡¤: ì—¬ëŸ¬ ë²ˆ ìŠ¤í¬ë¡¤ í•„ìš”, ë’¤ë¡œ ê°€ê¸° í›„ ì¬ìŠ¤í¬ë¡¤

[2ë‹¨ê³„] ìƒí’ˆ/ì„œë¹„ìŠ¤ ì •ë³´ ì¶”ì¶œ
  HTMLì„ 3ê°œì˜ ì²­í¬ë¡œ ë¶„í• í–ˆìŠµë‹ˆë‹¤.
  ì¶”ì¶œëœ ìƒí’ˆ: 9ê°œ

[ì¶”ê°€] ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì œ detail_url ìº¡ì²˜ ì¤‘...
  âœ… 9/9ê°œ ìƒí’ˆì˜ detail_url ìº¡ì²˜ ì™„ë£Œ

[3ë‹¨ê³„] ìƒì„¸ í˜ì´ì§€ í¬ë¡¤ë§
  ì´ 3ê°œì˜ ìƒì„¸ í˜ì´ì§€ë¥¼ í¬ë¡¤ë§í•©ë‹ˆë‹¤.

================================================================================
ğŸ“Š ê²°ê³¼ ë¶„ì„
================================================================================

1ï¸âƒ£ ê¸°ë³¸ ì •ë³´:
   ì¶”ì¶œëœ ìƒí’ˆ: 9ê°œ
   ì»¬ëŸ¼: ['id', 'name', 'description', 'detail_url', 'category', 'features', 'specifications']

2ï¸âƒ£ detail_url í†µê³„:
   URL ìˆëŠ” ìƒí’ˆ: 9/9ê°œ (100.0%)
   ì²« ë²ˆì§¸ URL ì˜ˆì‹œ: https://m.sktuniverse.co.kr/...

3ï¸âƒ£ ìƒì„¸ ì •ë³´ ì¶”ì¶œ:
   ìƒíƒœ: âœ… ì„±ê³µ
   - category: 3/9ê°œ ìƒí’ˆ
   - features: 3/9ê°œ ìƒí’ˆ
   - specifications: 3/9ê°œ ìƒí’ˆ

4ï¸âƒ£ ì²« ë²ˆì§¸ ìƒí’ˆ ìƒì„¸:
   ID: PR001234
   ì´ë¦„: [ìƒí’ˆëª…]
   ì¹´í…Œê³ ë¦¬: ëª¨ë°”ì¼
   íŠ¹ì§•: 5ê°œ
     1. [íŠ¹ì§•1]
     2. [íŠ¹ì§•2]
     3. [íŠ¹ì§•3]
   ìŠ¤í™: 8ê°œ í•­ëª©

5ï¸âƒ£ ìë™ ê°ì§€ íš¨ê³¼:
   âœ… í˜ì´ì§€ íƒ€ì…ì´ ìë™ìœ¼ë¡œ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤
   âœ… ìµœì ì˜ ìŠ¤í¬ë¡¤ ì „ëµì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤
   âœ… ì¬ìŠ¤í¬ë¡¤ í•„ìš” ì—¬ë¶€ê°€ ìë™ ê²°ì •ë˜ì—ˆìŠµë‹ˆë‹¤
   âœ… ë¶ˆí•„ìš”í•œ ì‘ì—…ì´ ìë™ ìƒëµë˜ì—ˆìŠµë‹ˆë‹¤

6ï¸âƒ£ ì¶œë ¥ íŒŒì¼:
   CSV: output/test_auto_detect_with_details.csv
   JSON: output/test_auto_detect_with_details.json
   Excel: output/test_auto_detect_with_details.xlsx

================================================================================
âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ!
================================================================================
```

---

#### ë¹„êµ í…ŒìŠ¤íŠ¸ (ìë™ vs ìˆ˜ë™)

```bash
# ì˜µì…˜ 2: ìë™ ê°ì§€ vs ìˆ˜ë™ ì„¤ì • ë¹„êµ
python test_auto_detect_with_details.py 2
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
================================================================================
ğŸ”¬ ìë™ ê°ì§€ vs ìˆ˜ë™ ì„¤ì • ë¹„êµ í…ŒìŠ¤íŠ¸
================================================================================

[í…ŒìŠ¤íŠ¸ 1] ìë™ ê°ì§€ ëª¨ë“œ
--------------------------------------------------------------------------------
ğŸ” í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ ì¤‘...
âœ… ê°ì§€ ê²°ê³¼: infinite_scroll (í™•ì‹ ë„: 0.90)
...
ì†Œìš” ì‹œê°„: 120.5ì´ˆ
ì¶”ì¶œëœ ìƒí’ˆ: 9ê°œ

[í…ŒìŠ¤íŠ¸ 2] ìˆ˜ë™ ì„¤ì • ëª¨ë“œ
--------------------------------------------------------------------------------
...
ì†Œìš” ì‹œê°„: 121.2ì´ˆ
ì¶”ì¶œëœ ìƒí’ˆ: 9ê°œ

================================================================================
ğŸ“Š ë¹„êµ ê²°ê³¼
================================================================================

ìë™ ê°ì§€ ëª¨ë“œ: 120.5ì´ˆ
ìˆ˜ë™ ì„¤ì • ëª¨ë“œ: 121.2ì´ˆ

â¡ï¸  ì†Œìš” ì‹œê°„ ë™ì¼

ğŸ’¡ ì°¸ê³ :
   - ë¬´í•œ ìŠ¤í¬ë¡¤ í˜ì´ì§€: ë‘ ë°©ì‹ ë™ì¼
   - í˜ì´ì§€ë„¤ì´ì…˜/ì •ì : ìë™ ê°ì§€ê°€ 2ë°° ë¹ ë¦„!
```

---

#### ì „ì²´ í…ŒìŠ¤íŠ¸

```bash
# ì˜µì…˜ 4: ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python test_auto_detect_with_details.py 4
```

---

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ì„±ê³µ ì¡°ê±´

- [ ] **í˜ì´ì§€ íƒ€ì… ê°ì§€ ì„±ê³µ**: í™•ì‹ ë„ > 0.7
- [ ] **ìƒí’ˆ ì¶”ì¶œ ì„±ê³µ**: ìµœì†Œ 5ê°œ ì´ìƒ ìƒí’ˆ ì¶”ì¶œ
- [ ] **detail_url ìº¡ì²˜ ì„±ê³µ**: 80% ì´ìƒì˜ ìƒí’ˆì— URL
- [ ] **ìƒì„¸ í˜ì´ì§€ í¬ë¡¤ë§ ì„±ê³µ**: ìƒì„¸ ì •ë³´ í•„ë“œ ì¡´ì¬ (`category`, `features`, `specifications`)
- [ ] **ì¶œë ¥ íŒŒì¼ ìƒì„±**: CSV, JSON, Excel íŒŒì¼ ìƒì„±
- [ ] **ì—ëŸ¬ ì—†ìŒ**: í¬ë¡¤ë§ ì¤‘ ì¹˜ëª…ì  ì—ëŸ¬ ì—†ìŒ

### ğŸ“Š í™•ì¸ ë°©ë²•

#### 1. ì½˜ì†” ì¶œë ¥ í™•ì¸

```bash
# ë‹¤ìŒ ë©”ì‹œì§€ê°€ í‘œì‹œë˜ì–´ì•¼ í•¨:
âœ… ê°ì§€ ê²°ê³¼: infinite_scroll (í™•ì‹ ë„: 0.90)
âœ… 9/9ê°œ ìƒí’ˆì˜ detail_url ìº¡ì²˜ ì™„ë£Œ
âœ… ì´ 3ê°œì˜ ìƒì„¸ í˜ì´ì§€ë¥¼ í¬ë¡¤ë§í•©ë‹ˆë‹¤.
```

#### 2. ì¶œë ¥ íŒŒì¼ í™•ì¸

```bash
# CSV íŒŒì¼ í™•ì¸
cat output/test_auto_detect_with_details.csv | head -5

# JSON íŒŒì¼ í™•ì¸
cat output/test_auto_detect_with_details.json | head -50

# Excel íŒŒì¼ í™•ì¸ (macOS)
open output/test_auto_detect_with_details.xlsx
```

#### 3. DataFrame í™•ì¸ (Python)

```python
import pandas as pd

df = pd.read_csv('output/test_auto_detect_with_details.csv')

# ê¸°ë³¸ ì •ë³´
print(f"ìƒí’ˆ ìˆ˜: {len(df)}")
print(f"ì»¬ëŸ¼: {list(df.columns)}")

# detail_url í†µê³„
has_url = df['detail_url'].notna() & (df['detail_url'] != '')
print(f"URL ìˆëŠ” ìƒí’ˆ: {has_url.sum()}/{len(df)}ê°œ")

# ìƒì„¸ ì •ë³´ í™•ì¸
detail_fields = ['category', 'features', 'specifications']
for field in detail_fields:
    if field in df.columns:
        non_empty = df[field].notna().sum()
        print(f"{field}: {non_empty}/{len(df)}ê°œ")

# ì²« ë²ˆì§¸ ìƒí’ˆ
print("\nì²« ë²ˆì§¸ ìƒí’ˆ:")
print(df.iloc[0].to_dict())
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "í˜ì´ì§€ íƒ€ì… ìë™ ê°ì§€ ì‹¤íŒ¨"

**ì¦ìƒ**:
```
âš ï¸ ìë™ ê°ì§€ ì‹¤íŒ¨, ìˆ˜ë™ ì„¤ì • ì‚¬ìš©: ...
```

**í•´ê²° ë°©ë²•**:
1. Playwright ì„¤ì¹˜ í™•ì¸:
   ```bash
   pip install playwright
   playwright install chromium
   ```

2. ìˆ˜ë™ ì„¤ì •ìœ¼ë¡œ ëŒ€ì²´:
   ```bash
   python product_crawler.py "URL" \
       --no-auto-detect \
       --scroll \
       --details
   ```

---

### ë¬¸ì œ 2: "detail_url ìº¡ì²˜ ì‹¤íŒ¨"

**ì¦ìƒ**:
```
âŒ ì‹¤íŒ¨ ì›ì¸ ë¶„ì„:
   - not_found: 185ê°œ
```

**í•´ê²° ë°©ë²•**:
1. DEBUG_MODE í™œì„±í™” (product_crawler.py):
   ```python
   DEBUG_MODE = True  # ì²« ë²ˆì§¸ ì²­í¬ë§Œ ì²˜ë¦¬
   ```

2. ë¡œê·¸ í™•ì¸:
   - selector ë°œê²¬ ì—¬ë¶€
   - ìŠ¤í¬ë¡¤ ì„±ê³µ ì—¬ë¶€
   - URL ë³€ê²½ ì—¬ë¶€

3. ì¬ìŠ¤í¬ë¡¤ í™•ì¸:
   - ë¬´í•œ ìŠ¤í¬ë¡¤ í˜ì´ì§€: `need_rescroll_after_back=True`
   - ì¼ë°˜ í˜ì´ì§€: `need_rescroll_after_back=False`

---

### ë¬¸ì œ 3: "ìƒì„¸ ì •ë³´ ì¶”ì¶œ ì‹¤íŒ¨"

**ì¦ìƒ**:
```
3ï¸âƒ£ ìƒì„¸ ì •ë³´ ì¶”ì¶œ:
   ìƒíƒœ: âŒ ì‹¤íŒ¨ (ìƒì„¸ ì •ë³´ í•„ë“œ ì—†ìŒ)
```

**í•´ê²° ë°©ë²•**:
1. LLM API í‚¤ í™•ì¸:
   ```bash
   echo $LLM_API_KEY
   echo $LLM_API_URL
   ```

2. LLM ëª¨ë¸ ë³€ê²½:
   ```python
   crawler = ProductCrawler(
       base_url=url,
       use_llm=True,
       model_name="claude"  # ax â†’ claude ë³€ê²½
   )
   ```

3. ìˆ˜ë™ìœ¼ë¡œ detail_url í™•ì¸:
   ```bash
   # detail_urlì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
   python -c "
   import pandas as pd
   df = pd.read_csv('output/test_auto_detect_with_details.csv')
   print(df['detail_url'].head())
   "
   ```

---

## ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

### ì˜ˆìƒ ì†Œìš” ì‹œê°„ (SKT Universe, 180ê°œ ìƒí’ˆ)

| í…ŒìŠ¤íŠ¸ | í˜ì´ì§€ íƒ€ì… | ì¬ìŠ¤í¬ë¡¤ | ìƒì„¸ í˜ì´ì§€ | ì†Œìš” ì‹œê°„ |
|--------|-----------|---------|-----------|---------|
| ìë™ ê°ì§€ (ëª©ë¡ë§Œ) | infinite_scroll | âœ… í•„ìš” | âŒ | ~2ë¶„ |
| ìë™ ê°ì§€ (ìƒì„¸ 3ê°œ) | infinite_scroll | âœ… í•„ìš” | 3ê°œ | ~3ë¶„ |
| ìë™ ê°ì§€ (ìƒì„¸ ì „ì²´) | infinite_scroll | âœ… í•„ìš” | 180ê°œ | ~15ë¶„ |
| ìˆ˜ë™ ì„¤ì • (ëª©ë¡ë§Œ) | ìˆ˜ë™ ì§€ì • | âœ… í•„ìš” | âŒ | ~2ë¶„ |
| ìë™ ê°ì§€ (ì •ì , ëª©ë¡) | static | âŒ ìƒëµ | âŒ | ~1ë¶„ |
| ìë™ ê°ì§€ (ì •ì , ìƒì„¸) | static | âŒ ìƒëµ | 180ê°œ | ~7.5ë¶„ |

**ì„±ëŠ¥ ê°œì„ **:
- ë¬´í•œ ìŠ¤í¬ë¡¤: ìë™/ìˆ˜ë™ ë™ì¼
- ì •ì  í˜ì´ì§€: **ìë™ ê°ì§€ê°€ 2ë°° ë¹ ë¦„!** (ì¬ìŠ¤í¬ë¡¤ ìƒëµ)

---

## ğŸ“ ì¶”ê°€ ì˜ˆì œ

### ì˜ˆì œ 1: ìµœì†Œí•œì˜ í…ŒìŠ¤íŠ¸

```bash
# 1ê°œ ìƒí’ˆë§Œ í…ŒìŠ¤íŠ¸ (ê°€ì¥ ë¹ ë¦„)
python product_crawler.py \
    "https://m.sktuniverse.co.kr/category/sub/tab/detail?ctanId=CC00000012&ctgId=CA00000001" \
    --details \
    --max-details 1 \
    --output output/minimal_test
```

### ì˜ˆì œ 2: Pythonì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸

```python
from product_crawler import ProductCrawler

url = "https://m.sktuniverse.co.kr/category/sub/tab/detail?ctanId=CC00000012&ctgId=CA00000001"

crawler = ProductCrawler(base_url=url, use_llm=True, model_name="ax")

# ìë™ ê°ì§€ + ìƒì„¸ 3ê°œ
df = crawler.run(
    url=url,
    auto_detect=True,
    crawl_details=True,
    max_detail_pages=3,
    output_path="output/python_test"
)

# ê²°ê³¼ í™•ì¸
print(f"ìƒí’ˆ: {len(df)}ê°œ")
print(f"ì»¬ëŸ¼: {list(df.columns)}")
print(df.head())
```

### ì˜ˆì œ 3: ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ í…ŒìŠ¤íŠ¸

```python
# ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ì—ì„œë„ ìë™ ê°ì§€ ì‘ë™ í™•ì¸
test_urls = [
    "https://example.com/products",
    "https://shop.example.com/items",
]

for url in test_urls:
    print(f"\ní…ŒìŠ¤íŠ¸: {url}")
    crawler = ProductCrawler(base_url=url, use_llm=True, model_name="ax")
    df = crawler.run(url=url, auto_detect=True, crawl_details=False)
    print(f"ê²°ê³¼: {len(df)}ê°œ ìƒí’ˆ")
```

---

## âœ… ê¶Œì¥ í…ŒìŠ¤íŠ¸ ìˆœì„œ

1. **ë¹ ë¥¸ CLI í…ŒìŠ¤íŠ¸** (2-3ë¶„)
   ```bash
   python product_crawler.py "URL" --details --max-details 3
   ```

2. **ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸** (2-3ë¶„)
   ```bash
   python test_auto_detect_with_details.py 1
   ```

3. **ë¹„êµ í…ŒìŠ¤íŠ¸** (5-6ë¶„, ì„ íƒ)
   ```bash
   python test_auto_detect_with_details.py 2
   ```

4. **ì „ì²´ í¬ë¡¤ë§** (15ë¶„, ì„ íƒ)
   ```bash
   python product_crawler.py "URL" --details
   ```

---

**ì‘ì„±ì¼**: 2025-11-03  
**ë²„ì „**: 1.0.0

