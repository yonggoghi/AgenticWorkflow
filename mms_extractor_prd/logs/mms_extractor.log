2025-09-11 11:29:38,937 - __main__ - INFO - MMS 추출기 초기화 중...
2025-09-11 11:29:38,937 - __main__ - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:29:38,937 - __main__ - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:29:38,937 - __main__ - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:29:38,937 - __main__ - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:29:38,938 - __main__ - INFO - 💻 디바이스 설정 중...
2025-09-11 11:29:38,957 - __main__ - INFO - Using device: mps
2025-09-11 11:29:38,957 - __main__ - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 11:29:38,957 - __main__ - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:29:38,957 - __main__ - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:29:38,957 - __main__ - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:29:38,957 - __main__ - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:29:38,957 - __main__ - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:29:38,957 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:29:38,957 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:29:39,990 - __main__ - INFO - Model loaded on mps
2025-09-11 11:29:39,990 - __main__ - INFO - _initialize_embedding_model 실행완료: 1.03초
2025-09-11 11:29:39,990 - __main__ - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:29:40,458 - __main__ - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:29:40,458 - __main__ - INFO - _initialize_kiwi 실행완료: 0.47초
2025-09-11 11:29:40,458 - __main__ - INFO - 📁 데이터 로드 중...
2025-09-11 11:29:40,458 - __main__ - INFO - ============================================================
2025-09-11 11:29:40,458 - __main__ - INFO - 📊 데이터 로딩 시작
2025-09-11 11:29:40,458 - __main__ - INFO - ============================================================
2025-09-11 11:29:40,458 - __main__ - INFO - 데이터 소스 모드: local
2025-09-11 11:29:40,458 - __main__ - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:29:40,458 - __main__ - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:29:40,458 - __main__ - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:29:40,459 - __main__ - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:29:40,459 - __main__ - ERROR - 상품 정보 로드 실패: [Errno 2] No such file or directory: './data/offer_master_data.csv'
2025-09-11 11:29:40,461 - __main__ - ERROR - 오류 상세: Traceback (most recent call last):
  File "/Users/1110566/workspace/AgenticWorkflow/mms_extractor_prd/mms_extractor.py", line 990, in _load_item_data
    item_pdf_raw = pd.read_csv(csv_path)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: './data/offer_master_data.csv'

2025-09-11 11:29:40,462 - __main__ - WARNING - 빈 DataFrame으로 fallback 설정됨
2025-09-11 11:29:40,462 - __main__ - INFO - 상품 정보 로드 후 데이터 크기: (0, 4)
2025-09-11 11:29:40,462 - __main__ - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn']
2025-09-11 11:29:40,462 - __main__ - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:29:40,462 - __main__ - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:29:40,462 - __main__ - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (0, 4)
2025-09-11 11:29:40,466 - __main__ - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:29:40,466 - __main__ - INFO - null이 아닌 상품명 수: 0개
2025-09-11 11:29:40,466 - __main__ - INFO - 기존 item_nm_alias 데이터가 없어 item_nm에서 별칭을 생성합니다.
2025-09-11 11:29:40,467 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: 0 -> 0
2025-09-11 11:29:40,467 - __main__ - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:29:40,467 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: (0, 5)
2025-09-11 11:29:40,467 - __main__ - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:29:40,468 - __main__ - INFO - 정지어 로드 완료: 166개
2025-09-11 11:29:40,468 - __main__ - INFO - 로드된 정지어 수: 166개
2025-09-11 11:29:40,468 - __main__ - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:29:40,468 - __main__ - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:29:40,468 - __main__ - INFO - 등록할 고유 별칭 수: 0개
2025-09-11 11:29:40,468 - __main__ - INFO - 유효한 별칭 수: 0개
2025-09-11 11:29:40,468 - __main__ - INFO - Kiwi에 상품명 등록 완료: 0개 성공, 0개 실패
2025-09-11 11:29:40,468 - __main__ - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:29:40,468 - __main__ - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:29:40,470 - __main__ - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:29:40,470 - __main__ - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:29:40,619 - __main__ - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:29:40,619 - __main__ - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:29:40,619 - __main__ - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:29:41,103 - __main__ - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:29:41,103 - __main__ - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:29:41,103 - __main__ - INFO - ============================================================
2025-09-11 11:29:41,103 - __main__ - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:29:41,103 - __main__ - INFO - ============================================================
2025-09-11 11:29:41,103 - __main__ - INFO - ✅ 상품 데이터: (0, 5)
2025-09-11 11:29:41,104 - __main__ - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:29:41,104 - __main__ - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:29:41,104 - __main__ - INFO - ✅ 정지어: 166개
2025-09-11 11:29:41,104 - __main__ - INFO - _load_data 실행완료: 0.65초
2025-09-11 11:29:41,104 - __main__ - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:29:41,104 - __main__ - INFO - 단일 메시지 처리 시작 (멀티스레드)
2025-09-11 11:29:41,104 - __main__ - INFO - 워커 프로세스에서 메시지 처리 시작: 
            '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[S...
2025-09-11 11:29:41,104 - __main__ - INFO - ============================================================
2025-09-11 11:29:41,104 - __main__ - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:29:41,104 - __main__ - INFO - ============================================================
2025-09-11 11:29:41,104 - __main__ - INFO - 메시지 내용: 
            '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04 고객님,_넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! __오직 T 우주에서만, _2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.__8월...
2025-09-11 11:29:41,104 - __main__ - INFO - 메시지 길이: 675 문자
2025-09-11 11:29:41,104 - __main__ - INFO - === 현재 추출기 설정 ===
2025-09-11 11:29:41,104 - __main__ - INFO - 데이터 소스: local
2025-09-11 11:29:41,104 - __main__ - INFO - 상품 정보 추출 모드: nlp
2025-09-11 11:29:41,104 - __main__ - INFO - 엔티티 추출 모드: llm
2025-09-11 11:29:41,104 - __main__ - INFO - LLM 모델: ax
2025-09-11 11:29:41,104 - __main__ - INFO - 상품 데이터 크기: (0, 5)
2025-09-11 11:29:41,104 - __main__ - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:29:41,104 - __main__ - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:29:41,104 - __main__ - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:29:41,104 - __main__ - INFO - 처리할 메시지 길이: 649 문자
2025-09-11 11:29:41,104 - __main__ - ERROR - 상품 데이터가 비어있습니다! 엔티티 추출 불가
2025-09-11 11:29:41,104 - __main__ - INFO - extract_entities_from_kiwi 실행완료: 0.00초
2025-09-11 11:29:41,104 - __main__ - INFO - 추출된 후보 엔티티: []
2025-09-11 11:29:41,104 - __main__ - INFO - 매칭된 상품 정보: (0, 0)
2025-09-11 11:29:41,104 - __main__ - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:29:41,203 - __main__ - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:29:41,203 - __main__ - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:29:41,203 - __main__ - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-11 11:29:41,203 - __main__ - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:29:41,203 - __main__ - WARNING - 후보 아이템이 없습니다!
2025-09-11 11:29:41,203 - __main__ - WARNING - 이는 다음 중 하나의 문제일 수 있습니다:
2025-09-11 11:29:41,203 - __main__ - WARNING - 1. 상품 데이터 로딩 실패
2025-09-11 11:29:41,203 - __main__ - WARNING - 2. 엔티티 추출 실패
2025-09-11 11:29:41,203 - __main__ - WARNING - 3. 유사도 매칭 임계값 문제
2025-09-11 11:29:41,204 - __main__ - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:29:41,204 - __main__ - INFO - 구성된 프롬프트 길이: 5837 문자
2025-09-11 11:29:41,204 - __main__ - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:29:41,204 - __main__ - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5837)
2025-09-11 11:29:41,204 - __main__ - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:29:41,204 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:29:46,839 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:29:46,852 - __main__ - INFO - LLM 응답 길이: 774 문자
2025-09-11 11:29:46,852 - __main__ - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[T 우주] 넷플릭스와 웨이브를 월 9,900원에!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "우주패스 Netflix(광고형 스탠다드)",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "사용"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/jAs/#74",
            "action": "추가 정보"
        },
        {
            ...
2025-09-11 11:29:46,852 - __main__ - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:29:46,852 - __main__ - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:29:46,852 - __main__ - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:29:46,853 - __main__ - INFO - 파싱된 JSON 내용: {'title': '[T 우주] 넷플릭스와 웨이브를 월 9,900원에!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '우주패스 Netflix(광고형 스탠다드)', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '사용'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-11 11:29:46,853 - __main__ - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:29:46,853 - __main__ - INFO - LLM 추출 엔티티: ['우주패스 Netflix(광고형 스탠다드)', 'Wavve 콘텐츠 팩']
2025-09-11 11:29:46,873 - __main__ - ERROR - LLM 기반 엔티티 추출 실패: 'item_nm_alias'
2025-09-11 11:29:46,874 - __main__ - INFO - extract_entities_by_llm 실행완료: 0.02초
2025-09-11 11:29:46,877 - __main__ - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:29:46,877 - __main__ - INFO - ============================================================
2025-09-11 11:29:46,877 - __main__ - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:29:46,877 - __main__ - INFO - ============================================================
2025-09-11 11:29:46,877 - __main__ - INFO - 제목: [T 우주] 넷플릭스와 웨이브를 월 9,900원에!
2025-09-11 11:29:46,877 - __main__ - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-11 11:29:46,877 - __main__ - INFO - 상품 수: 2개
2025-09-11 11:29:46,877 - __main__ - INFO - 채널 수: 3개
2025-09-11 11:29:46,877 - __main__ - INFO - 프로그램 수: 2개
2025-09-11 11:29:46,877 - __main__ - INFO - process_message 실행완료: 5.77초
2025-09-11 11:29:46,878 - __main__ - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 11:30:44,488 - __main__ - INFO - MMS 추출기 초기화 중...
2025-09-11 11:30:44,488 - __main__ - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:30:44,488 - __main__ - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:30:44,488 - __main__ - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:30:44,488 - __main__ - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:30:44,489 - __main__ - INFO - 💻 디바이스 설정 중...
2025-09-11 11:30:44,506 - __main__ - INFO - Using device: mps
2025-09-11 11:30:44,506 - __main__ - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 11:30:44,506 - __main__ - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:30:44,506 - __main__ - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:30:44,506 - __main__ - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:30:44,506 - __main__ - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:30:44,506 - __main__ - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:30:44,506 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:30:44,506 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:30:45,367 - __main__ - INFO - Model loaded on mps
2025-09-11 11:30:45,367 - __main__ - INFO - _initialize_embedding_model 실행완료: 0.86초
2025-09-11 11:30:45,367 - __main__ - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:30:45,805 - __main__ - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:30:45,805 - __main__ - INFO - _initialize_kiwi 실행완료: 0.44초
2025-09-11 11:30:45,805 - __main__ - INFO - 📁 데이터 로드 중...
2025-09-11 11:30:45,805 - __main__ - INFO - ============================================================
2025-09-11 11:30:45,805 - __main__ - INFO - 📊 데이터 로딩 시작
2025-09-11 11:30:45,805 - __main__ - INFO - ============================================================
2025-09-11 11:30:45,805 - __main__ - INFO - 데이터 소스 모드: local
2025-09-11 11:30:45,805 - __main__ - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:30:45,805 - __main__ - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:30:45,805 - __main__ - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:30:45,805 - __main__ - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:30:45,874 - __main__ - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (16316, 9)
2025-09-11 11:30:45,874 - __main__ - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-11 11:30:45,874 - __main__ - INFO - 컬럼 매핑: {'ITEM_NM': 'item_nm', 'ITEM_ID': 'item_id', 'ITEM_DESC': 'item_desc', 'ITEM_DMN': 'item_dmn', 'ITEM_ALS': 'item_nm_alias'}
2025-09-11 11:30:45,878 - __main__ - INFO - 중복 제거 후 데이터 크기: (16316, 5)
2025-09-11 11:30:45,879 - __main__ - INFO - item_nm_alias에서 16316개 null 값을 item_nm으로 채웁니다.
2025-09-11 11:30:45,879 - __main__ - INFO - 로컬 모드 최종 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 11:30:45,880 - __main__ - INFO - item_nm_alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 11:30:45,880 - __main__ - INFO - 로컬 모드 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70', '뉴스콤 관제30', '구축-Smart PayHub']
2025-09-11 11:30:45,880 - __main__ - INFO - 로컬 모드 데이터 샘플 (5개 행):
2025-09-11 11:30:45,882 - __main__ - INFO - [{'item_nm': '우주패스 Netflix 인증', 'item_id': 'NA00008735', 'item_desc': '우주패스 Netflix 인증&&T 우주패스 Netflix를 인증하면 가입되는 더미코드&&', 'item_dmn': 'P', 'item_nm_alias': '우주패스 Netflix 인증', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008735', 'oper_dt_hms': '20250101000000'}, {'item_nm': 'LTE-M10(24년_간선망)', 'item_id': 'NA00008782', 'item_desc': 'LTE-M10(24년_간선망)&&ㅇ 한전 AMI 간선망용 무선모뎀 사업수주에 따른 신규 전용상품(요금제) 출시   - 수주일자 : 4/3  - 수량 : 13,656대 (Cat.1 모뎀)  - 상품명 : LTE-M10(24년_한전 간선망)  - 제안요금 : 711원(Vat별도)     > “LTE-M 10 요금제” + “기업데이터 청구” 형태       >  총91MB 제공  - 부가서비스 상품명 : 한전_부가_PGW#37    > UUT 211 적용&&', 'item_dmn': 'P', 'item_nm_alias': 'LTE-M10(24년_간선망)', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008782', 'oper_dt_hms': '20250101000000'}, {'item_nm': '유선대체 70', 'item_id': 'NA00005883', 'item_desc': '유선대체 70&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건', 'item_dmn': 'P', 'item_nm_alias': '유선대체 70', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00005883', 'oper_dt_hms': '20250101000000'}, {'item_nm': '뉴스콤 관제30', 'item_id': 'NB00000764', 'item_desc': '뉴스콤 관제30&&고객사의 메인망은 초고속인터넷이고 백업망으로 당사의 이동통신망을 이용하는 무선라우터를 공급하는 경우, 원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off/ 원격조치 불가능시 출동후 장애 조치 서비스&&원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off / 원격조치 불가능시 출동후 장애 조치 서비스', 'item_dmn': 'P', 'item_nm_alias': '뉴스콤 관제30', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NB00000764', 'oper_dt_hms': '20250101000000'}, {'item_nm': '구축-Smart PayHub', 'item_id': 'PD00013310', 'item_desc': '구축-Smart PayHub&&&&', 'item_dmn': 'P', 'item_nm_alias': '구축-Smart PayHub', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'PD00013310', 'oper_dt_hms': '20250101000000'}]
2025-09-11 11:30:45,885 - __main__ - INFO - 도메인 필터링: 16316 -> 10551 (제외된 도메인: ['R'])
2025-09-11 11:30:45,885 - __main__ - INFO - === 상품 정보 로드 최종 완료: 10551개 상품 ===
2025-09-11 11:30:45,885 - __main__ - INFO - 최종 데이터 스키마: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 11:30:45,886 - __main__ - INFO - 최종 데이터 타입: {'item_nm': dtype('O'), 'item_id': dtype('O'), 'item_desc': dtype('O'), 'item_dmn': dtype('O'), 'item_nm_alias': dtype('O'), 'item_ctg': dtype('O'), 'item_emb_vec': dtype('O'), 'ofer_cd': dtype('O'), 'oper_dt_hms': dtype('O')}
2025-09-11 11:30:45,886 - __main__ - INFO - 모든 중요 컬럼이 존재합니다.
2025-09-11 11:30:45,886 - __main__ - INFO - 상품 정보 로드 후 데이터 크기: (10551, 9)
2025-09-11 11:30:45,886 - __main__ - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 11:30:45,886 - __main__ - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:30:45,886 - __main__ - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:30:45,886 - __main__ - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (10551, 9)
2025-09-11 11:30:45,887 - __main__ - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:30:45,887 - __main__ - INFO - null이 아닌 상품명 수: 10551개
2025-09-11 11:30:45,887 - __main__ - INFO - 별칭 적용 전 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 11:30:45,888 - __main__ - INFO - 기존 item_nm_alias 데이터를 발견했습니다. 별칭 규칙과 병합합니다.
2025-09-11 11:30:45,888 - __main__ - INFO - 기존 alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 11:30:46,019 - __main__ - INFO - 기존 ITEM_ALS 데이터와 별칭 규칙이 성공적으로 병합되었습니다.
2025-09-11 11:30:46,023 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: 10551 -> 21522
2025-09-11 11:30:46,024 - __main__ - INFO - 별칭 적용 후 샘플: ['우주PASS Netflix 인증', '우주Pass Netflix 인증', '우주pass Netflix 인증', '우주패스 Netflix 인증', '우주패스 넷플릭스 인증']
2025-09-11 11:30:46,024 - __main__ - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:30:46,024 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: (21522, 9)
2025-09-11 11:30:46,024 - __main__ - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:30:46,025 - __main__ - INFO - 정지어 로드 완료: 166개
2025-09-11 11:30:46,025 - __main__ - INFO - 로드된 정지어 수: 166개
2025-09-11 11:30:46,025 - __main__ - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:30:46,025 - __main__ - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:30:46,027 - __main__ - INFO - 등록할 고유 별칭 수: 16403개
2025-09-11 11:30:46,028 - __main__ - INFO - 유효한 별칭 수: 16403개
2025-09-11 11:30:46,028 - __main__ - INFO - 등록할 별칭 샘플: ['우주PASS Netflix 인증', '우주Pass Netflix 인증', '우주pass Netflix 인증', '우주패스 Netflix 인증', '우주패스 넷플릭스 인증']
2025-09-11 11:30:46,044 - __main__ - INFO - Kiwi에 상품명 등록 완료: 16403개 성공, 0개 실패
2025-09-11 11:30:46,044 - __main__ - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:30:46,044 - __main__ - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:30:46,045 - __main__ - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:30:46,045 - __main__ - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:30:46,202 - __main__ - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:30:46,202 - __main__ - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:30:46,202 - __main__ - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:30:46,714 - __main__ - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:30:46,714 - __main__ - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:30:46,714 - __main__ - INFO - ============================================================
2025-09-11 11:30:46,714 - __main__ - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:30:46,714 - __main__ - INFO - ============================================================
2025-09-11 11:30:46,714 - __main__ - INFO - ✅ 상품 데이터: (21522, 9)
2025-09-11 11:30:46,714 - __main__ - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:30:46,714 - __main__ - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:30:46,714 - __main__ - INFO - ✅ 정지어: 166개
2025-09-11 11:30:46,714 - __main__ - INFO - === 상품 데이터 상세 정보 ===
2025-09-11 11:30:46,716 - __main__ - INFO - 고유 상품명 수: 6847개
2025-09-11 11:30:46,718 - __main__ - INFO - 고유 별칭 수: 16403개
2025-09-11 11:30:46,719 - __main__ - INFO - 고유 상품ID 수: 10551개
2025-09-11 11:30:46,719 - __main__ - INFO - _load_data 실행완료: 0.91초
2025-09-11 11:30:46,719 - __main__ - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:30:46,719 - __main__ - INFO - 단일 메시지 처리 시작 (멀티스레드)
2025-09-11 11:30:46,719 - __main__ - INFO - 워커 프로세스에서 메시지 처리 시작: 
            '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[S...
2025-09-11 11:30:46,719 - __main__ - INFO - ============================================================
2025-09-11 11:30:46,719 - __main__ - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:30:46,719 - __main__ - INFO - ============================================================
2025-09-11 11:30:46,719 - __main__ - INFO - 메시지 내용: 
            '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04 고객님,_넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! __오직 T 우주에서만, _2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.__8월...
2025-09-11 11:30:46,719 - __main__ - INFO - 메시지 길이: 675 문자
2025-09-11 11:30:46,719 - __main__ - INFO - === 현재 추출기 설정 ===
2025-09-11 11:30:46,719 - __main__ - INFO - 데이터 소스: local
2025-09-11 11:30:46,719 - __main__ - INFO - 상품 정보 추출 모드: nlp
2025-09-11 11:30:46,719 - __main__ - INFO - 엔티티 추출 모드: llm
2025-09-11 11:30:46,719 - __main__ - INFO - LLM 모델: ax
2025-09-11 11:30:46,719 - __main__ - INFO - 상품 데이터 크기: (21522, 9)
2025-09-11 11:30:46,719 - __main__ - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:30:46,719 - __main__ - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:30:46,719 - __main__ - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:30:46,719 - __main__ - INFO - 처리할 메시지 길이: 649 문자
2025-09-11 11:30:46,720 - __main__ - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-11 11:30:47,220 - __main__ - INFO - 분할된 문장 수: 21개
2025-09-11 11:30:47,221 - __main__ - INFO - 필터링된 문장들: [' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', '넷플릭스 웨이브 월 이게 되네 ', ' 고객님 ']...
2025-09-11 11:30:47,226 - __main__ - INFO - 전체 토큰 수: 272개
2025-09-11 11:30:47,226 - __main__ - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-11 11:30:47,226 - __main__ - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix']
2025-09-11 11:30:47,226 - __main__ - INFO - 퍼지 매칭 시작...
2025-09-11 11:30:48,265 - __main__ - INFO - 퍼지 매칭 결과 크기: (5348, 3)
2025-09-11 11:30:48,266 - __main__ - INFO - 퍼지 매칭 성공: 5348개 결과
2025-09-11 11:30:48,266 - __main__ - INFO - 퍼지 매칭 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.6956521739130435}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '밴드 데이터 세이브', 'sim': 0.4}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '다이렉트5G 76(넷플릭스)', 'sim': 0.41666666666666663}]
2025-09-11 11:30:48,266 - __main__ - INFO - 시퀀스 유사도 계산 시작...
2025-09-11 11:30:48,363 - __main__ - INFO - 시퀀스 유사도 결과 크기: (5348, 3)
2025-09-11 11:30:48,364 - __main__ - INFO - 시퀀스 유사도 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5333333333333333}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '밴드 데이터 세이브', 'sim': 0.32000000000000006}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '다이렉트5G 76(넷플릭스)', 'sim': 0.34285714285714286}]
2025-09-11 11:30:48,364 - __main__ - INFO - 사용할 유사도 임계값: 0.7
2025-09-11 11:30:48,367 - __main__ - INFO - 임계값 필터링 후 후보 아이템 수: 58개
2025-09-11 11:30:48,369 - __main__ - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-11 11:30:48,370 - __main__ - INFO - 통합된 후보 아이템 수: 62개
2025-09-11 11:30:48,372 - __main__ - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드 이용권', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', '멤버십가입', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩(티비)', '타다 쿠폰', 'Netflix 단독', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 이용권', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄', '멤버십 미가입자', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩 PLUS', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-11 11:30:48,375 - __main__ - INFO - 최종 상품 정보 DataFrame 크기: (25, 2)
2025-09-11 11:30:48,375 - __main__ - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}, {'item_nm': 'Netflix 광고형 스탠다드 이용권', 'item_id': ['PR00000418', 'PR00000418']}]
2025-09-11 11:30:48,376 - __main__ - INFO - extract_entities_from_kiwi 실행완료: 1.66초
2025-09-11 11:30:48,376 - __main__ - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드 이용권', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', '멤버십가입', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩(티비)', '타다 쿠폰', 'Netflix 단독', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 이용권', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄', '멤버십 미가입자', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩 PLUS', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-11 11:30:48,376 - __main__ - INFO - 매칭된 상품 정보: (25, 2)
2025-09-11 11:30:48,376 - __main__ - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:30:48,474 - __main__ - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:30:48,474 - __main__ - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:30:48,474 - __main__ - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-11 11:30:48,474 - __main__ - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:30:48,474 - __main__ - INFO - 후보 아이템 리스트 크기: 34개
2025-09-11 11:30:48,474 - __main__ - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드 이용권', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', '멤버십가입', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩(티비)', '타다 쿠폰', 'Netflix 단독', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 이용권', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄', '멤버십 미가입자', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩 PLUS', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-11 11:30:48,474 - __main__ - INFO - extra_item_pdf 크기: (25, 2)
2025-09-11 11:30:48,474 - __main__ - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-11 11:30:48,475 - __main__ - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-11 11:30:48,476 - __main__ - INFO - NLP 모드: 제품 요소 준비 완료 - 25개
2025-09-11 11:30:48,476 - __main__ - INFO - NLP 모드 제품 요소 샘플: [{'name': 'FLO 콘텐츠 팩', 'action': '기타'}, {'name': 'Netflix', 'action': '기타'}]
2025-09-11 11:30:48,476 - __main__ - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:30:48,476 - __main__ - INFO - 구성된 프롬프트 길이: 7259 문자
2025-09-11 11:30:48,476 - __main__ - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:30:48,476 - __main__ - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7259)
2025-09-11 11:30:48,476 - __main__ - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:30:48,476 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:30:56,235 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:30:56,243 - __main__ - INFO - LLM 응답 길이: 1176 문자
2025-09-11 11:30:56,243 - __main__ - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[T 우주] 넷플릭스와 웨이브를 월 9,900원에!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix",
            "action": "가입"
        },
        {
            "name": "Wavve",
            "action": "가입"
        },
        {
            "name": "우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
          ...
2025-09-11 11:30:56,243 - __main__ - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:30:56,244 - __main__ - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:30:56,244 - __main__ - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:30:56,244 - __main__ - INFO - 파싱된 JSON 내용: {'title': '[T 우주] 넷플릭스와 웨이브를 월 9,900원에!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix', 'action': '가입'}, {'name': 'Wavve', 'action': '가입'}, {'name': '우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-11 11:30:56,244 - __main__ - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:30:56,244 - __main__ - INFO - LLM 추출 엔티티: ['Netflix', 'Wavve', '우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-11 11:30:56,540 - __main__ - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 4224)
2025-09-11 11:30:56,540 - __main__ - INFO - 현재 저장된 프롬프트 수: 2
2025-09-11 11:30:56,540 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-11 11:30:57,218 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:30:57,507 - __main__ - INFO - extract_entities_by_llm 실행완료: 1.26초
2025-09-11 11:30:57,511 - __main__ - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:30:57,511 - __main__ - INFO - ============================================================
2025-09-11 11:30:57,511 - __main__ - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:30:57,511 - __main__ - INFO - ============================================================
2025-09-11 11:30:57,511 - __main__ - INFO - 제목: [T 우주] 넷플릭스와 웨이브를 월 9,900원에!
2025-09-11 11:30:57,511 - __main__ - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-11 11:30:57,511 - __main__ - INFO - 상품 수: 5개
2025-09-11 11:30:57,511 - __main__ - INFO - 채널 수: 3개
2025-09-11 11:30:57,511 - __main__ - INFO - 프로그램 수: 2개
2025-09-11 11:30:57,512 - __main__ - INFO - process_message 실행완료: 10.79초
2025-09-11 11:30:57,512 - __main__ - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 12:39:21,002 - __main__ - INFO - MMS 추출기 초기화 중...
2025-09-11 12:39:21,003 - __main__ - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 12:39:21,003 - __main__ - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 12:39:21,003 - __main__ - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 12:39:21,003 - __main__ - INFO - 🔑 환경변수 로드 중...
2025-09-11 12:39:21,004 - __main__ - INFO - 💻 디바이스 설정 중...
2025-09-11 12:39:21,021 - __main__ - INFO - Using device: mps
2025-09-11 12:39:21,021 - __main__ - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 12:39:21,021 - __main__ - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 12:39:21,021 - __main__ - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 12:39:21,022 - __main__ - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 12:39:21,022 - __main__ - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 12:39:21,022 - __main__ - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 12:39:21,022 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 12:39:21,022 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 12:39:22,057 - __main__ - INFO - Model loaded on mps
2025-09-11 12:39:22,057 - __main__ - INFO - _initialize_embedding_model 실행완료: 1.04초
2025-09-11 12:39:22,057 - __main__ - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 12:39:22,466 - __main__ - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 12:39:22,466 - __main__ - INFO - _initialize_kiwi 실행완료: 0.41초
2025-09-11 12:39:22,466 - __main__ - INFO - 📁 데이터 로드 중...
2025-09-11 12:39:22,466 - __main__ - INFO - ============================================================
2025-09-11 12:39:22,466 - __main__ - INFO - 📊 데이터 로딩 시작
2025-09-11 12:39:22,466 - __main__ - INFO - ============================================================
2025-09-11 12:39:22,466 - __main__ - INFO - 데이터 소스 모드: local
2025-09-11 12:39:22,466 - __main__ - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 12:39:22,466 - __main__ - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 12:39:22,467 - __main__ - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 12:39:22,467 - __main__ - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 12:39:22,540 - __main__ - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (16316, 9)
2025-09-11 12:39:22,540 - __main__ - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-11 12:39:22,540 - __main__ - INFO - 컬럼 매핑: {'ITEM_NM': 'item_nm', 'ITEM_ID': 'item_id', 'ITEM_DESC': 'item_desc', 'ITEM_DMN': 'item_dmn', 'ITEM_ALS': 'item_nm_alias'}
2025-09-11 12:39:22,543 - __main__ - INFO - 중복 제거 후 데이터 크기: (16316, 5)
2025-09-11 12:39:22,544 - __main__ - INFO - item_nm_alias에서 16316개 null 값을 item_nm으로 채웁니다.
2025-09-11 12:39:22,544 - __main__ - INFO - 로컬 모드 최종 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 12:39:22,545 - __main__ - INFO - item_nm_alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 12:39:22,545 - __main__ - INFO - 로컬 모드 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70', '뉴스콤 관제30', '구축-Smart PayHub']
2025-09-11 12:39:22,545 - __main__ - INFO - 로컬 모드 데이터 샘플 (5개 행):
2025-09-11 12:39:22,546 - __main__ - INFO - [{'item_nm': '우주패스 Netflix 인증', 'item_id': 'NA00008735', 'item_desc': '우주패스 Netflix 인증&&T 우주패스 Netflix를 인증하면 가입되는 더미코드&&', 'item_dmn': 'P', 'item_nm_alias': '우주패스 Netflix 인증', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008735', 'oper_dt_hms': '20250101000000'}, {'item_nm': 'LTE-M10(24년_간선망)', 'item_id': 'NA00008782', 'item_desc': 'LTE-M10(24년_간선망)&&ㅇ 한전 AMI 간선망용 무선모뎀 사업수주에 따른 신규 전용상품(요금제) 출시   - 수주일자 : 4/3  - 수량 : 13,656대 (Cat.1 모뎀)  - 상품명 : LTE-M10(24년_한전 간선망)  - 제안요금 : 711원(Vat별도)     > “LTE-M 10 요금제” + “기업데이터 청구” 형태       >  총91MB 제공  - 부가서비스 상품명 : 한전_부가_PGW#37    > UUT 211 적용&&', 'item_dmn': 'P', 'item_nm_alias': 'LTE-M10(24년_간선망)', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008782', 'oper_dt_hms': '20250101000000'}, {'item_nm': '유선대체 70', 'item_id': 'NA00005883', 'item_desc': '유선대체 70&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건', 'item_dmn': 'P', 'item_nm_alias': '유선대체 70', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00005883', 'oper_dt_hms': '20250101000000'}, {'item_nm': '뉴스콤 관제30', 'item_id': 'NB00000764', 'item_desc': '뉴스콤 관제30&&고객사의 메인망은 초고속인터넷이고 백업망으로 당사의 이동통신망을 이용하는 무선라우터를 공급하는 경우, 원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off/ 원격조치 불가능시 출동후 장애 조치 서비스&&원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off / 원격조치 불가능시 출동후 장애 조치 서비스', 'item_dmn': 'P', 'item_nm_alias': '뉴스콤 관제30', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NB00000764', 'oper_dt_hms': '20250101000000'}, {'item_nm': '구축-Smart PayHub', 'item_id': 'PD00013310', 'item_desc': '구축-Smart PayHub&&&&', 'item_dmn': 'P', 'item_nm_alias': '구축-Smart PayHub', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'PD00013310', 'oper_dt_hms': '20250101000000'}]
2025-09-11 12:39:22,549 - __main__ - INFO - 도메인 필터링: 16316 -> 10551 (제외된 도메인: ['R'])
2025-09-11 12:39:22,549 - __main__ - INFO - === 상품 정보 로드 최종 완료: 10551개 상품 ===
2025-09-11 12:39:22,549 - __main__ - INFO - 최종 데이터 스키마: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 12:39:22,549 - __main__ - INFO - 최종 데이터 타입: {'item_nm': dtype('O'), 'item_id': dtype('O'), 'item_desc': dtype('O'), 'item_dmn': dtype('O'), 'item_nm_alias': dtype('O'), 'item_ctg': dtype('O'), 'item_emb_vec': dtype('O'), 'ofer_cd': dtype('O'), 'oper_dt_hms': dtype('O')}
2025-09-11 12:39:22,549 - __main__ - INFO - 모든 중요 컬럼이 존재합니다.
2025-09-11 12:39:22,550 - __main__ - INFO - 상품 정보 로드 후 데이터 크기: (10551, 9)
2025-09-11 12:39:22,550 - __main__ - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 12:39:22,550 - __main__ - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 12:39:22,550 - __main__ - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 12:39:22,550 - __main__ - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (10551, 9)
2025-09-11 12:39:22,557 - __main__ - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 12:39:22,557 - __main__ - INFO - null이 아닌 상품명 수: 10551개
2025-09-11 12:39:22,557 - __main__ - INFO - 별칭 적용 전 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 12:39:22,558 - __main__ - INFO - 기존 item_nm_alias 데이터를 발견했습니다. 별칭 규칙과 병합합니다.
2025-09-11 12:39:22,558 - __main__ - INFO - 기존 alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 12:39:22,682 - __main__ - INFO - 기존 ITEM_ALS 데이터와 별칭 규칙이 성공적으로 병합되었습니다.
2025-09-11 12:39:22,686 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: 10551 -> 21522
2025-09-11 12:39:22,687 - __main__ - INFO - 별칭 적용 후 샘플: ['우주패스 넷플릭스 인증', '우주pass Netflix 인증', '우주Pass Netflix 인증', '우주PASS Netflix 인증', '우주패스 Netflix 인증']
2025-09-11 12:39:22,687 - __main__ - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 12:39:22,687 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: (21522, 9)
2025-09-11 12:39:22,687 - __main__ - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 12:39:22,688 - __main__ - INFO - 정지어 로드 완료: 166개
2025-09-11 12:39:22,688 - __main__ - INFO - 로드된 정지어 수: 166개
2025-09-11 12:39:22,689 - __main__ - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 12:39:22,689 - __main__ - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 12:39:22,690 - __main__ - INFO - 등록할 고유 별칭 수: 16403개
2025-09-11 12:39:22,691 - __main__ - INFO - 유효한 별칭 수: 16403개
2025-09-11 12:39:22,691 - __main__ - INFO - 등록할 별칭 샘플: ['우주패스 넷플릭스 인증', '우주pass Netflix 인증', '우주Pass Netflix 인증', '우주PASS Netflix 인증', '우주패스 Netflix 인증']
2025-09-11 12:39:22,704 - __main__ - INFO - Kiwi에 상품명 등록 완료: 16403개 성공, 0개 실패
2025-09-11 12:39:22,704 - __main__ - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 12:39:22,704 - __main__ - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 12:39:22,708 - __main__ - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 12:39:22,708 - __main__ - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 12:39:22,856 - __main__ - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 12:39:22,856 - __main__ - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 12:39:22,856 - __main__ - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 12:39:22,866 - __main__ - WARNING - 조직 정보 로드 실패: 'utf-8' codec can't decode byte 0xb4 in position 104: invalid start byte
2025-09-11 12:39:22,868 - __main__ - INFO - 조직 정보 로드 후 데이터 크기: (0, 3)
2025-09-11 12:39:22,868 - __main__ - INFO - ============================================================
2025-09-11 12:39:22,868 - __main__ - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 12:39:22,868 - __main__ - INFO - ============================================================
2025-09-11 12:39:22,868 - __main__ - INFO - ✅ 상품 데이터: (21522, 9)
2025-09-11 12:39:22,868 - __main__ - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 12:39:22,868 - __main__ - INFO - ✅ 조직 데이터: (0, 3)
2025-09-11 12:39:22,868 - __main__ - INFO - ✅ 정지어: 166개
2025-09-11 12:39:22,868 - __main__ - INFO - === 상품 데이터 상세 정보 ===
2025-09-11 12:39:22,869 - __main__ - INFO - 고유 상품명 수: 6847개
2025-09-11 12:39:22,871 - __main__ - INFO - 고유 별칭 수: 16403개
2025-09-11 12:39:22,872 - __main__ - INFO - 고유 상품ID 수: 10551개
2025-09-11 12:39:22,872 - __main__ - INFO - _load_data 실행완료: 0.41초
2025-09-11 12:39:22,872 - __main__ - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 12:39:22,872 - __main__ - INFO - 단일 메시지 처리 시작 (멀티스레드)
2025-09-11 12:39:22,872 - __main__ - INFO - 워커 프로세스에서 메시지 처리 시작: 
[Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 ...
2025-09-11 12:39:22,872 - __main__ - INFO - ============================================================
2025-09-11 12:39:22,872 - __main__ - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 12:39:22,872 - __main__ - INFO - ============================================================
2025-09-11 12:39:22,872 - __main__ - INFO - 메시지 내용: 
[Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜택받9, 구매하9

【갤럭시 마지막 특가】
① 와이드8 ▶기기값 5만원
② A36 ▶기기값 10만원
③ S24 FE ▶기기값 20만원
☞ 제휴카드 사용 시 최대 72만원 추가할인

【SK로 통신사 이동 시】
① 쓰던 폰 그대로 이동시 상품권 20만원
② 인터넷+TV ...
2025-09-11 12:39:22,872 - __main__ - INFO - 메시지 길이: 420 문자
2025-09-11 12:39:22,872 - __main__ - INFO - === 현재 추출기 설정 ===
2025-09-11 12:39:22,872 - __main__ - INFO - 데이터 소스: local
2025-09-11 12:39:22,872 - __main__ - INFO - 상품 정보 추출 모드: nlp
2025-09-11 12:39:22,872 - __main__ - INFO - 엔티티 추출 모드: llm
2025-09-11 12:39:22,872 - __main__ - INFO - LLM 모델: ax
2025-09-11 12:39:22,873 - __main__ - INFO - 상품 데이터 크기: (21522, 9)
2025-09-11 12:39:22,873 - __main__ - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 12:39:22,873 - __main__ - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 12:39:22,873 - __main__ - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 12:39:22,873 - __main__ - INFO - 처리할 메시지 길이: 407 문자
2025-09-11 12:39:22,874 - __main__ - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-11 12:39:23,328 - __main__ - INFO - 분할된 문장 수: 7개
2025-09-11 12:39:23,329 - __main__ - INFO - 필터링된 문장들: [' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', ' 갤럭시 마지막 특가 와이드8 기기값 5만원 A36 기기값 10만원 S24 FE 기기값 20만원 제휴카드 사용 시 최대 72만원 추가할인', ' SK로 통신사 이동 시 쓰던 폰 그대로 이동시 상품권 20만원 인터넷 TV 가입 최대 70만원']...
2025-09-11 12:39:23,332 - __main__ - INFO - 전체 토큰 수: 155개
2025-09-11 12:39:23,332 - __main__ - INFO - NNP 태그 토큰들: ['을지로', '구매하', '갤럭시', 'A', '기기값', '아이폰', '을지로입구역', '하나은행', '명동']
2025-09-11 12:39:23,332 - __main__ - INFO - 필터링 후 Kiwi 추출 엔티티: ['명동', '을지로입구역', '갤럭시', '하나은행', '아이폰', '기기값', '구매하']
2025-09-11 12:39:23,332 - __main__ - INFO - 퍼지 매칭 시작...
2025-09-11 12:39:24,099 - __main__ - INFO - 퍼지 매칭 결과 크기: (1047, 3)
2025-09-11 12:39:24,099 - __main__ - INFO - 퍼지 매칭 성공: 1047개 결과
2025-09-11 12:39:24,100 - __main__ - INFO - 퍼지 매칭 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '노트7고객', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코web툰프리_할인', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코 web툰 프리_인증', 'sim': 0.4}]
2025-09-11 12:39:24,100 - __main__ - INFO - 시퀀스 유사도 계산 시작...
2025-09-11 12:39:24,140 - __main__ - INFO - 시퀀스 유사도 결과 크기: (1047, 3)
2025-09-11 12:39:24,140 - __main__ - INFO - 시퀀스 유사도 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '노트7고객', 'sim': 0.32000000000000006}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코web툰프리_할인', 'sim': 0.2}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코 web툰 프리_인증', 'sim': 0.22857142857142856}]
2025-09-11 12:39:24,141 - __main__ - INFO - 사용할 유사도 임계값: 0.7
2025-09-11 12:39:24,143 - __main__ - INFO - 임계값 필터링 후 후보 아이템 수: 1개
2025-09-11 12:39:24,145 - __main__ - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-11 12:39:24,145 - __main__ - INFO - 통합된 후보 아이템 수: 2개
2025-09-11 12:39:24,147 - __main__ - INFO - 최종 후보 아이템 리스트: ['갤럭시']
2025-09-11 12:39:24,149 - __main__ - INFO - 최종 상품 정보 DataFrame 크기: (1, 2)
2025-09-11 12:39:24,150 - __main__ - INFO - 최종 상품 정보 샘플: [{'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-11 12:39:24,150 - __main__ - INFO - extract_entities_from_kiwi 실행완료: 1.28초
2025-09-11 12:39:24,150 - __main__ - INFO - 추출된 후보 엔티티: ['갤럭시']
2025-09-11 12:39:24,150 - __main__ - INFO - 매칭된 상품 정보: (1, 2)
2025-09-11 12:39:24,150 - __main__ - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 12:39:24,235 - __main__ - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 12:39:24,235 - __main__ - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 12:39:24,235 - __main__ - INFO - 프로그램 분류 컨텍스트 길이: 416 문자
2025-09-11 12:39:24,235 - __main__ - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 12:39:24,235 - __main__ - INFO - 후보 아이템 리스트 크기: 1개
2025-09-11 12:39:24,236 - __main__ - INFO - 후보 아이템 리스트: ['갤럭시']
2025-09-11 12:39:24,236 - __main__ - INFO - extra_item_pdf 크기: (1, 2)
2025-09-11 12:39:24,236 - __main__ - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-11 12:39:24,236 - __main__ - INFO - extra_item_pdf 샘플: [{'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-11 12:39:24,237 - __main__ - INFO - NLP 모드: 제품 요소 준비 완료 - 1개
2025-09-11 12:39:24,237 - __main__ - INFO - NLP 모드 제품 요소 샘플: [{'name': 'GALAXY', 'action': '기타'}]
2025-09-11 12:39:24,237 - __main__ - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 12:39:24,237 - __main__ - INFO - 구성된 프롬프트 길이: 5000 문자
2025-09-11 12:39:24,237 - __main__ - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 12:39:24,237 - __main__ - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5000)
2025-09-11 12:39:24,237 - __main__ - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 12:39:24,237 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 12:39:32,574 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 12:39:32,583 - __main__ - INFO - LLM 응답 길이: 1245 문자
2025-09-11 12:39:32,583 - __main__ - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "9월은 SKT 직영점에서 혜택받9, 구매하9",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "대리점/매장 방문 유도"
    ],
    "product": [
        {
            "name": "갤럭시 와이드8",
            "action": "구매"
        },
        {
            "name": "갤럭시 A36",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24 FE",
            "action": "구매"
        },
        {
            "name": "아이폰17",
            "action": "사전예약"
        },
        {
            "name"...
2025-09-11 12:39:32,583 - __main__ - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 12:39:32,584 - __main__ - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 12:39:32,584 - __main__ - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 12:39:32,584 - __main__ - INFO - 파싱된 JSON 내용: {'title': '9월은 SKT 직영점에서 혜택받9, 구매하9', 'purpose': ['상품 가입 유도', '혜택 안내', '대리점/매장 방문 유도'], 'product': [{'name': '갤럭시 와이드8', 'action': '구매'}, {'name': '갤럭시 A36', 'action': '구매'}, {'name': '갤럭시 S24 FE', 'action': '구매'}, {'name': '아이폰17', 'action': '사전예약'}, {'name': '인터넷+TV', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'https://naver.me/FTM8rdfj', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://naver.me/GipIR3Lg', 'action': '추가 정보'}, {'type': '전화번호', 'value': '0507-1399-6011', 'action': '문의'}, {'type': '대리점', 'value': 'SKT 을지로점', 'action': '가입'}, {'type': '전화번호', 'value': '080-801-0011', 'action': '수신 거부'}], 'pgm': ['기변유도및해지방어', '상품및부가서비스가입유도_단말']}
2025-09-11 12:39:32,584 - __main__ - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 12:39:32,584 - __main__ - INFO - LLM 추출 엔티티: ['갤럭시 와이드8', '갤럭시 A36', '갤럭시 S24 FE', '아이폰17', '인터넷+TV']
2025-09-11 12:39:32,782 - __main__ - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3050)
2025-09-11 12:39:32,782 - __main__ - INFO - 현재 저장된 프롬프트 수: 2
2025-09-11 12:39:32,782 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-11 12:39:33,470 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 12:39:33,750 - __main__ - INFO - extract_entities_by_llm 실행완료: 1.17초
2025-09-11 12:39:33,754 - __main__ - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 12:39:33,754 - __main__ - INFO - ============================================================
2025-09-11 12:39:33,754 - __main__ - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 12:39:33,754 - __main__ - INFO - ============================================================
2025-09-11 12:39:33,754 - __main__ - INFO - 제목: 9월은 SKT 직영점에서 혜택받9, 구매하9
2025-09-11 12:39:33,754 - __main__ - INFO - 목적: ['상품 가입 유도', '혜택 안내', '대리점/매장 방문 유도']
2025-09-11 12:39:33,754 - __main__ - INFO - 상품 수: 2개
2025-09-11 12:39:33,754 - __main__ - INFO - 채널 수: 5개
2025-09-11 12:39:33,755 - __main__ - INFO - 프로그램 수: 2개
2025-09-11 12:39:33,755 - __main__ - INFO - process_message 실행완료: 10.88초
2025-09-11 12:39:33,755 - __main__ - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 12:41:43,778 - __main__ - INFO - MMS 추출기 초기화 중...
2025-09-11 12:41:43,778 - __main__ - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 12:41:43,778 - __main__ - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 12:41:43,778 - __main__ - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 12:41:43,778 - __main__ - INFO - 🔑 환경변수 로드 중...
2025-09-11 12:41:43,779 - __main__ - INFO - 💻 디바이스 설정 중...
2025-09-11 12:41:43,796 - __main__ - INFO - Using device: mps
2025-09-11 12:41:43,796 - __main__ - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 12:41:43,796 - __main__ - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 12:41:43,796 - __main__ - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 12:41:43,797 - __main__ - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 12:41:43,797 - __main__ - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 12:41:43,797 - __main__ - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 12:41:43,797 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 12:41:43,797 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 12:41:44,625 - __main__ - INFO - Model loaded on mps
2025-09-11 12:41:44,625 - __main__ - INFO - _initialize_embedding_model 실행완료: 0.83초
2025-09-11 12:41:44,625 - __main__ - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 12:41:45,033 - __main__ - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 12:41:45,033 - __main__ - INFO - _initialize_kiwi 실행완료: 0.41초
2025-09-11 12:41:45,033 - __main__ - INFO - 📁 데이터 로드 중...
2025-09-11 12:41:45,033 - __main__ - INFO - ============================================================
2025-09-11 12:41:45,033 - __main__ - INFO - 📊 데이터 로딩 시작
2025-09-11 12:41:45,033 - __main__ - INFO - ============================================================
2025-09-11 12:41:45,033 - __main__ - INFO - 데이터 소스 모드: local
2025-09-11 12:41:45,033 - __main__ - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 12:41:45,033 - __main__ - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 12:41:45,033 - __main__ - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 12:41:45,033 - __main__ - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 12:41:45,097 - __main__ - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (16316, 9)
2025-09-11 12:41:45,097 - __main__ - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-11 12:41:45,097 - __main__ - INFO - 컬럼 매핑: {'ITEM_NM': 'item_nm', 'ITEM_ID': 'item_id', 'ITEM_DESC': 'item_desc', 'ITEM_DMN': 'item_dmn', 'ITEM_ALS': 'item_nm_alias'}
2025-09-11 12:41:45,101 - __main__ - INFO - 중복 제거 후 데이터 크기: (16316, 5)
2025-09-11 12:41:45,101 - __main__ - INFO - item_nm_alias에서 16316개 null 값을 item_nm으로 채웁니다.
2025-09-11 12:41:45,102 - __main__ - INFO - 로컬 모드 최종 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 12:41:45,102 - __main__ - INFO - item_nm_alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 12:41:45,102 - __main__ - INFO - 로컬 모드 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70', '뉴스콤 관제30', '구축-Smart PayHub']
2025-09-11 12:41:45,103 - __main__ - INFO - 로컬 모드 데이터 샘플 (5개 행):
2025-09-11 12:41:45,104 - __main__ - INFO - [{'item_nm': '우주패스 Netflix 인증', 'item_id': 'NA00008735', 'item_desc': '우주패스 Netflix 인증&&T 우주패스 Netflix를 인증하면 가입되는 더미코드&&', 'item_dmn': 'P', 'item_nm_alias': '우주패스 Netflix 인증', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008735', 'oper_dt_hms': '20250101000000'}, {'item_nm': 'LTE-M10(24년_간선망)', 'item_id': 'NA00008782', 'item_desc': 'LTE-M10(24년_간선망)&&ㅇ 한전 AMI 간선망용 무선모뎀 사업수주에 따른 신규 전용상품(요금제) 출시   - 수주일자 : 4/3  - 수량 : 13,656대 (Cat.1 모뎀)  - 상품명 : LTE-M10(24년_한전 간선망)  - 제안요금 : 711원(Vat별도)     > “LTE-M 10 요금제” + “기업데이터 청구” 형태       >  총91MB 제공  - 부가서비스 상품명 : 한전_부가_PGW#37    > UUT 211 적용&&', 'item_dmn': 'P', 'item_nm_alias': 'LTE-M10(24년_간선망)', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008782', 'oper_dt_hms': '20250101000000'}, {'item_nm': '유선대체 70', 'item_id': 'NA00005883', 'item_desc': '유선대체 70&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건', 'item_dmn': 'P', 'item_nm_alias': '유선대체 70', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00005883', 'oper_dt_hms': '20250101000000'}, {'item_nm': '뉴스콤 관제30', 'item_id': 'NB00000764', 'item_desc': '뉴스콤 관제30&&고객사의 메인망은 초고속인터넷이고 백업망으로 당사의 이동통신망을 이용하는 무선라우터를 공급하는 경우, 원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off/ 원격조치 불가능시 출동후 장애 조치 서비스&&원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off / 원격조치 불가능시 출동후 장애 조치 서비스', 'item_dmn': 'P', 'item_nm_alias': '뉴스콤 관제30', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NB00000764', 'oper_dt_hms': '20250101000000'}, {'item_nm': '구축-Smart PayHub', 'item_id': 'PD00013310', 'item_desc': '구축-Smart PayHub&&&&', 'item_dmn': 'P', 'item_nm_alias': '구축-Smart PayHub', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'PD00013310', 'oper_dt_hms': '20250101000000'}]
2025-09-11 12:41:45,106 - __main__ - INFO - 도메인 필터링: 16316 -> 10551 (제외된 도메인: ['R'])
2025-09-11 12:41:45,106 - __main__ - INFO - === 상품 정보 로드 최종 완료: 10551개 상품 ===
2025-09-11 12:41:45,106 - __main__ - INFO - 최종 데이터 스키마: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 12:41:45,107 - __main__ - INFO - 최종 데이터 타입: {'item_nm': dtype('O'), 'item_id': dtype('O'), 'item_desc': dtype('O'), 'item_dmn': dtype('O'), 'item_nm_alias': dtype('O'), 'item_ctg': dtype('O'), 'item_emb_vec': dtype('O'), 'ofer_cd': dtype('O'), 'oper_dt_hms': dtype('O')}
2025-09-11 12:41:45,107 - __main__ - INFO - 모든 중요 컬럼이 존재합니다.
2025-09-11 12:41:45,107 - __main__ - INFO - 상품 정보 로드 후 데이터 크기: (10551, 9)
2025-09-11 12:41:45,107 - __main__ - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 12:41:45,107 - __main__ - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 12:41:45,107 - __main__ - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 12:41:45,107 - __main__ - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (10551, 9)
2025-09-11 12:41:45,108 - __main__ - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 12:41:45,109 - __main__ - INFO - null이 아닌 상품명 수: 10551개
2025-09-11 12:41:45,109 - __main__ - INFO - 별칭 적용 전 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 12:41:45,109 - __main__ - INFO - 기존 item_nm_alias 데이터를 발견했습니다. 별칭 규칙과 병합합니다.
2025-09-11 12:41:45,109 - __main__ - INFO - 기존 alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 12:41:45,233 - __main__ - INFO - 기존 ITEM_ALS 데이터와 별칭 규칙이 성공적으로 병합되었습니다.
2025-09-11 12:41:45,238 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: 10551 -> 21522
2025-09-11 12:41:45,239 - __main__ - INFO - 별칭 적용 후 샘플: ['우주pass Netflix 인증', '우주PASS Netflix 인증', '우주패스 Netflix 인증', '우주Pass Netflix 인증', '우주패스 넷플릭스 인증']
2025-09-11 12:41:45,239 - __main__ - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 12:41:45,239 - __main__ - INFO - 별칭 규칙 적용 후 데이터 크기: (21522, 9)
2025-09-11 12:41:45,239 - __main__ - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 12:41:45,240 - __main__ - INFO - 정지어 로드 완료: 166개
2025-09-11 12:41:45,240 - __main__ - INFO - 로드된 정지어 수: 166개
2025-09-11 12:41:45,240 - __main__ - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 12:41:45,240 - __main__ - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 12:41:45,242 - __main__ - INFO - 등록할 고유 별칭 수: 16403개
2025-09-11 12:41:45,243 - __main__ - INFO - 유효한 별칭 수: 16403개
2025-09-11 12:41:45,243 - __main__ - INFO - 등록할 별칭 샘플: ['우주pass Netflix 인증', '우주PASS Netflix 인증', '우주패스 Netflix 인증', '우주Pass Netflix 인증', '우주패스 넷플릭스 인증']
2025-09-11 12:41:45,255 - __main__ - INFO - Kiwi에 상품명 등록 완료: 16403개 성공, 0개 실패
2025-09-11 12:41:45,255 - __main__ - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 12:41:45,255 - __main__ - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 12:41:45,256 - __main__ - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 12:41:45,257 - __main__ - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 12:41:45,406 - __main__ - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 12:41:45,406 - __main__ - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 12:41:45,406 - __main__ - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 12:41:45,475 - __main__ - INFO - 조직 정보 로드 완료: 5765개 조직
2025-09-11 12:41:45,475 - __main__ - INFO - 조직 정보 로드 후 데이터 크기: (5765, 9)
2025-09-11 12:41:45,475 - __main__ - INFO - ============================================================
2025-09-11 12:41:45,475 - __main__ - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 12:41:45,475 - __main__ - INFO - ============================================================
2025-09-11 12:41:45,475 - __main__ - INFO - ✅ 상품 데이터: (21522, 9)
2025-09-11 12:41:45,475 - __main__ - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 12:41:45,475 - __main__ - INFO - ✅ 조직 데이터: (5765, 9)
2025-09-11 12:41:45,475 - __main__ - INFO - ✅ 정지어: 166개
2025-09-11 12:41:45,475 - __main__ - INFO - === 상품 데이터 상세 정보 ===
2025-09-11 12:41:45,476 - __main__ - INFO - 고유 상품명 수: 6847개
2025-09-11 12:41:45,478 - __main__ - INFO - 고유 별칭 수: 16403개
2025-09-11 12:41:45,479 - __main__ - INFO - 고유 상품ID 수: 10551개
2025-09-11 12:41:45,479 - __main__ - INFO - _load_data 실행완료: 0.45초
2025-09-11 12:41:45,479 - __main__ - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 12:41:45,479 - __main__ - INFO - 단일 메시지 처리 시작 (멀티스레드)
2025-09-11 12:41:45,479 - __main__ - INFO - 워커 프로세스에서 메시지 처리 시작: 
[Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 ...
2025-09-11 12:41:45,479 - __main__ - INFO - ============================================================
2025-09-11 12:41:45,479 - __main__ - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 12:41:45,479 - __main__ - INFO - ============================================================
2025-09-11 12:41:45,479 - __main__ - INFO - 메시지 내용: 
[Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜택받9, 구매하9

【갤럭시 마지막 특가】
① 와이드8 ▶기기값 5만원
② A36 ▶기기값 10만원
③ S24 FE ▶기기값 20만원
☞ 제휴카드 사용 시 최대 72만원 추가할인

【SK로 통신사 이동 시】
① 쓰던 폰 그대로 이동시 상품권 20만원
② 인터넷+TV ...
2025-09-11 12:41:45,479 - __main__ - INFO - 메시지 길이: 420 문자
2025-09-11 12:41:45,479 - __main__ - INFO - === 현재 추출기 설정 ===
2025-09-11 12:41:45,479 - __main__ - INFO - 데이터 소스: local
2025-09-11 12:41:45,479 - __main__ - INFO - 상품 정보 추출 모드: nlp
2025-09-11 12:41:45,480 - __main__ - INFO - 엔티티 추출 모드: llm
2025-09-11 12:41:45,480 - __main__ - INFO - LLM 모델: ax
2025-09-11 12:41:45,480 - __main__ - INFO - 상품 데이터 크기: (21522, 9)
2025-09-11 12:41:45,480 - __main__ - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 12:41:45,480 - __main__ - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 12:41:45,480 - __main__ - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 12:41:45,480 - __main__ - INFO - 처리할 메시지 길이: 407 문자
2025-09-11 12:41:45,481 - __main__ - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-11 12:41:45,942 - __main__ - INFO - 분할된 문장 수: 7개
2025-09-11 12:41:45,943 - __main__ - INFO - 필터링된 문장들: [' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', ' 갤럭시 마지막 특가 와이드8 기기값 5만원 A36 기기값 10만원 S24 FE 기기값 20만원 제휴카드 사용 시 최대 72만원 추가할인', ' SK로 통신사 이동 시 쓰던 폰 그대로 이동시 상품권 20만원 인터넷 TV 가입 최대 70만원']...
2025-09-11 12:41:45,946 - __main__ - INFO - 전체 토큰 수: 155개
2025-09-11 12:41:45,946 - __main__ - INFO - NNP 태그 토큰들: ['을지로', '구매하', '갤럭시', 'A', '기기값', '아이폰', '을지로입구역', '하나은행', '명동']
2025-09-11 12:41:45,946 - __main__ - INFO - 필터링 후 Kiwi 추출 엔티티: ['갤럭시', '아이폰', '구매하', '하나은행', '명동', '을지로입구역', '기기값']
2025-09-11 12:41:45,946 - __main__ - INFO - 퍼지 매칭 시작...
2025-09-11 12:41:46,713 - __main__ - INFO - 퍼지 매칭 결과 크기: (1047, 3)
2025-09-11 12:41:46,713 - __main__ - INFO - 퍼지 매칭 성공: 1047개 결과
2025-09-11 12:41:46,714 - __main__ - INFO - 퍼지 매칭 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '노트7고객', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코web툰프리_할인', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코 web툰 프리_인증', 'sim': 0.4}]
2025-09-11 12:41:46,714 - __main__ - INFO - 시퀀스 유사도 계산 시작...
2025-09-11 12:41:46,753 - __main__ - INFO - 시퀀스 유사도 결과 크기: (1047, 3)
2025-09-11 12:41:46,753 - __main__ - INFO - 시퀀스 유사도 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '노트7고객', 'sim': 0.32000000000000006}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코web툰프리_할인', 'sim': 0.2}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': '코미코 web툰 프리_인증', 'sim': 0.22857142857142856}]
2025-09-11 12:41:46,754 - __main__ - INFO - 사용할 유사도 임계값: 0.7
2025-09-11 12:41:46,756 - __main__ - INFO - 임계값 필터링 후 후보 아이템 수: 1개
2025-09-11 12:41:46,758 - __main__ - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-09-11 12:41:46,758 - __main__ - INFO - 통합된 후보 아이템 수: 2개
2025-09-11 12:41:46,760 - __main__ - INFO - 최종 후보 아이템 리스트: ['갤럭시']
2025-09-11 12:41:46,762 - __main__ - INFO - 최종 상품 정보 DataFrame 크기: (1, 2)
2025-09-11 12:41:46,762 - __main__ - INFO - 최종 상품 정보 샘플: [{'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-11 12:41:46,762 - __main__ - INFO - extract_entities_from_kiwi 실행완료: 1.28초
2025-09-11 12:41:46,762 - __main__ - INFO - 추출된 후보 엔티티: ['갤럭시']
2025-09-11 12:41:46,762 - __main__ - INFO - 매칭된 상품 정보: (1, 2)
2025-09-11 12:41:46,763 - __main__ - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 12:41:46,848 - __main__ - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 12:41:46,848 - __main__ - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 12:41:46,848 - __main__ - INFO - 프로그램 분류 컨텍스트 길이: 416 문자
2025-09-11 12:41:46,848 - __main__ - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 12:41:46,848 - __main__ - INFO - 후보 아이템 리스트 크기: 1개
2025-09-11 12:41:46,848 - __main__ - INFO - 후보 아이템 리스트: ['갤럭시']
2025-09-11 12:41:46,848 - __main__ - INFO - extra_item_pdf 크기: (1, 2)
2025-09-11 12:41:46,848 - __main__ - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-11 12:41:46,848 - __main__ - INFO - extra_item_pdf 샘플: [{'item_nm': 'GALAXY', 'item_id': ['SSM2']}]
2025-09-11 12:41:46,849 - __main__ - INFO - NLP 모드: 제품 요소 준비 완료 - 1개
2025-09-11 12:41:46,849 - __main__ - INFO - NLP 모드 제품 요소 샘플: [{'name': 'GALAXY', 'action': '기타'}]
2025-09-11 12:41:46,849 - __main__ - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 12:41:46,849 - __main__ - INFO - 구성된 프롬프트 길이: 5000 문자
2025-09-11 12:41:46,849 - __main__ - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 12:41:46,849 - __main__ - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5000)
2025-09-11 12:41:46,849 - __main__ - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 12:41:46,849 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 12:41:55,198 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 12:41:55,206 - __main__ - INFO - LLM 응답 길이: 1245 문자
2025-09-11 12:41:55,207 - __main__ - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "9월은 SKT 직영점에서 혜택받9, 구매하9",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "대리점/매장 방문 유도"
    ],
    "product": [
        {
            "name": "갤럭시 와이드8",
            "action": "구매"
        },
        {
            "name": "갤럭시 A36",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24 FE",
            "action": "구매"
        },
        {
            "name": "아이폰17",
            "action": "사전예약"
        },
        {
            "name"...
2025-09-11 12:41:55,207 - __main__ - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 12:41:55,207 - __main__ - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 12:41:55,207 - __main__ - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 12:41:55,207 - __main__ - INFO - 파싱된 JSON 내용: {'title': '9월은 SKT 직영점에서 혜택받9, 구매하9', 'purpose': ['상품 가입 유도', '혜택 안내', '대리점/매장 방문 유도'], 'product': [{'name': '갤럭시 와이드8', 'action': '구매'}, {'name': '갤럭시 A36', 'action': '구매'}, {'name': '갤럭시 S24 FE', 'action': '구매'}, {'name': '아이폰17', 'action': '사전예약'}, {'name': '인터넷+TV', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'https://naver.me/FTM8rdfj', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://naver.me/GipIR3Lg', 'action': '추가 정보'}, {'type': '전화번호', 'value': '0507-1399-6011', 'action': '문의'}, {'type': '대리점', 'value': 'SKT 을지로점', 'action': '가입'}, {'type': '전화번호', 'value': '080-801-0011', 'action': '수신 거부'}], 'pgm': ['기변유도및해지방어', '상품및부가서비스가입유도_단말']}
2025-09-11 12:41:55,207 - __main__ - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 12:41:55,207 - __main__ - INFO - LLM 추출 엔티티: ['갤럭시 와이드8', '갤럭시 A36', '갤럭시 S24 FE', '아이폰17', '인터넷+TV']
2025-09-11 12:41:55,403 - __main__ - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3050)
2025-09-11 12:41:55,403 - __main__ - INFO - 현재 저장된 프롬프트 수: 2
2025-09-11 12:41:55,403 - __main__ - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-11 12:41:55,951 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 12:41:56,244 - __main__ - INFO - extract_entities_by_llm 실행완료: 1.04초
2025-09-11 12:41:56,301 - __main__ - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 12:41:56,301 - __main__ - INFO - ============================================================
2025-09-11 12:41:56,301 - __main__ - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 12:41:56,301 - __main__ - INFO - ============================================================
2025-09-11 12:41:56,301 - __main__ - INFO - 제목: 9월은 SKT 직영점에서 혜택받9, 구매하9
2025-09-11 12:41:56,301 - __main__ - INFO - 목적: ['상품 가입 유도', '혜택 안내', '대리점/매장 방문 유도']
2025-09-11 12:41:56,301 - __main__ - INFO - 상품 수: 2개
2025-09-11 12:41:56,301 - __main__ - INFO - 채널 수: 5개
2025-09-11 12:41:56,301 - __main__ - INFO - 프로그램 수: 2개
2025-09-11 12:41:56,301 - __main__ - INFO - process_message 실행완료: 10.82초
2025-09-11 12:41:56,301 - __main__ - INFO - 워커 프로세스에서 메시지 처리 완료
