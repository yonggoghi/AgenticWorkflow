2025-08-27 13:24:45,894 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-08-27 13:24:45,894 - __main__ - INFO - 전역 추출기 초기화 중...
2025-08-27 13:24:45,894 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-08-27 13:24:45,894 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-08-27 13:24:45,894 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-08-27 13:24:45,918 - mms_extractor - INFO - Using device: mps
2025-08-27 13:24:45,918 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-08-27 13:24:45,919 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-08-27 13:24:45,919 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-08-27 13:24:45,919 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-08-27 13:24:45,919 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-08-27 13:24:45,919 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-08-27 13:24:47,101 - mms_extractor - INFO - Model loaded on mps
2025-08-27 13:24:47,101 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.18초
2025-08-27 13:24:47,585 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-08-27 13:24:47,585 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.48초
2025-08-27 13:24:47,585 - mms_extractor - INFO - ============================================================
2025-08-27 13:24:47,585 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-08-27 13:24:47,585 - mms_extractor - INFO - ============================================================
2025-08-27 13:24:47,585 - mms_extractor - INFO - 데이터 소스 모드: local
2025-08-27 13:24:47,585 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-08-27 13:24:47,585 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-08-27 13:24:47,585 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-08-27 13:24:47,585 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-08-27 13:24:47,702 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-08-27 13:24:47,702 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-08-27 13:24:47,711 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-08-27 13:24:47,716 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-08-27 13:24:47,717 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-08-27 13:24:47,721 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-08-27 13:24:47,721 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-08-27 13:24:47,721 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-08-27 13:24:47,721 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-08-27 13:24:47,721 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-08-27 13:24:47,721 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-08-27 13:24:47,721 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-08-27 13:24:47,724 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-08-27 13:24:47,725 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-08-27 13:24:47,725 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-08-27 13:24:48,060 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-08-27 13:24:48,063 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-08-27 13:24:48,063 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-08-27 13:24:48,063 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-08-27 13:24:48,063 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-08-27 13:24:48,066 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-08-27 13:24:48,066 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-08-27 13:24:48,066 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-08-27 13:24:48,066 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-08-27 13:24:48,074 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-08-27 13:24:48,077 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-08-27 13:24:48,077 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-08-27 13:24:48,137 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-08-27 13:24:48,138 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-08-27 13:24:48,138 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-08-27 13:24:48,140 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-08-27 13:24:48,140 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-08-27 13:24:48,359 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-08-27 13:24:48,359 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-08-27 13:24:48,359 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-08-27 13:24:48,918 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-08-27 13:24:48,918 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-08-27 13:24:48,918 - mms_extractor - INFO - ============================================================
2025-08-27 13:24:48,918 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-08-27 13:24:48,918 - mms_extractor - INFO - ============================================================
2025-08-27 13:24:48,918 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-08-27 13:24:48,918 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-08-27 13:24:48,918 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-08-27 13:24:48,918 - mms_extractor - INFO - ✅ 정지어: 166개
2025-08-27 13:24:48,918 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-08-27 13:24:48,923 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-08-27 13:24:48,931 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-08-27 13:24:48,935 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-08-27 13:24:48,935 - mms_extractor - INFO - _load_data 실행완료: 1.35초
2025-08-27 13:24:48,935 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-08-27 13:24:48,935 - __main__ - INFO - 전역 추출기 초기화 완료
2025-08-27 13:24:48,935 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-08-27 13:24:48,935 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-08-27 13:24:48,935 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-08-27 13:24:48,935 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-08-27 13:24:48,935 - __main__ - INFO -   GET  /health - 헬스체크
2025-08-27 13:24:48,935 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-08-27 13:24:48,935 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-08-27 13:24:48,935 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-08-27 13:24:48,935 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
 * Serving Flask app 'api'
 * Debug mode: off
2025-08-27 13:24:48,946 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.113.49:8000
2025-08-27 13:24:48,946 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-27 13:25:04,994 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:25:04] "GET /health HTTP/1.1" 200 -
2025-08-27 13:25:15,684 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-08-27 13:25:15,684 - mms_extractor - INFO - ============================================================
2025-08-27 13:25:15,684 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-08-27 13:25:15,684 - mms_extractor - INFO - ============================================================
2025-08-27 13:25:15,684 - mms_extractor - INFO - 메시지 내용: Netflix 프리미엄 가입하고 혜택 받으세요...
2025-08-27 13:25:15,684 - mms_extractor - INFO - 메시지 길이: 25 문자
2025-08-27 13:25:15,684 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-08-27 13:25:15,684 - mms_extractor - INFO - 데이터 소스: local
2025-08-27 13:25:15,684 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-08-27 13:25:15,684 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-08-27 13:25:15,684 - mms_extractor - INFO - LLM 모델: ax
2025-08-27 13:25:15,684 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-08-27 13:25:15,684 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-08-27 13:25:15,684 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-08-27 13:25:15,684 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-08-27 13:25:15,684 - mms_extractor - INFO - 처리할 메시지 길이: 25 문자
2025-08-27 13:25:15,691 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-08-27 13:25:16,285 - mms_extractor - INFO - 분할된 문장 수: 1개
2025-08-27 13:25:16,286 - mms_extractor - INFO - 필터링된 문장들: ['Netflix 프리미엄 가입하고 혜택 받으세요']...
2025-08-27 13:25:16,286 - mms_extractor - INFO - 전체 토큰 수: 6개
2025-08-27 13:25:16,286 - mms_extractor - INFO - NNP 태그 토큰들: ['Netflix 프리미엄', '가입']
2025-08-27 13:25:16,286 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Netflix 프리미엄']
2025-08-27 13:25:16,286 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-08-27 13:25:23,791 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (711, 3)
2025-08-27 13:25:23,791 - mms_extractor - INFO - 퍼지 매칭 성공: 711개 결과
2025-08-27 13:25:23,795 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'item_nm_alias': 'G6 프로', 'sim': 0.4}, {'sent': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'item_nm_alias': '미정', 'sim': 0.5}, {'sent': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'item_nm_alias': 'PPS스마트폰 프리미엄', 'sim': 0.5}]
2025-08-27 13:25:23,795 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-08-27 13:25:23,823 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (711, 3)
2025-08-27 13:25:23,824 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'item_nm_alias': 'G6 프로', 'sim': 0.32000000000000006}, {'sent': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'item_nm_alias': '미정', 'sim': 0.4}, {'sent': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'item_nm_alias': 'PPS스마트폰 프리미엄', 'sim': 0.43333333333333335}]
2025-08-27 13:25:23,824 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-08-27 13:25:23,826 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 8개
2025-08-27 13:25:23,831 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-08-27 13:25:23,832 - mms_extractor - INFO - 통합된 후보 아이템 수: 9개
2025-08-27 13:25:23,834 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 프리미엄', 'Netflix', '(T)프리미엄', 'I-프리미엄', 'Netflix 프리미엄 이용권', 'Netflix 단독', '웹ex_프리미엄', '클럽T 프리미엄']
2025-08-27 13:25:23,838 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (8, 2)
2025-08-27 13:25:23,838 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': 'I-PREMIUM', 'item_id': ['NA00002268']}, {'item_nm': 'Netflix', 'item_id': ['NM00000390', 'PR00000501']}]
2025-08-27 13:25:23,839 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 8.15초
2025-08-27 13:25:23,839 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 프리미엄', 'Netflix', '(T)프리미엄', 'I-프리미엄', 'Netflix 프리미엄 이용권', 'Netflix 단독', '웹ex_프리미엄', '클럽T 프리미엄']
2025-08-27 13:25:23,839 - mms_extractor - INFO - 매칭된 상품 정보: (8, 2)
2025-08-27 13:25:23,839 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-08-27 13:25:23,997 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-08-27 13:25:23,997 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-08-27 13:25:23,997 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-08-27 13:25:23,997 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-08-27 13:25:23,997 - mms_extractor - INFO - 후보 아이템 리스트 크기: 8개
2025-08-27 13:25:23,997 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 프리미엄', 'Netflix', '(T)프리미엄', 'I-프리미엄', 'Netflix 프리미엄 이용권', 'Netflix 단독', '웹ex_프리미엄', '클럽T 프리미엄']
2025-08-27 13:25:23,997 - mms_extractor - INFO - extra_item_pdf 크기: (8, 2)
2025-08-27 13:25:23,997 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-08-27 13:25:23,997 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': 'I-PREMIUM', 'item_id': ['NA00002268']}]
2025-08-27 13:25:23,997 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-08-27 13:25:23,997 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-08-27 13:25:23,997 - mms_extractor - INFO - 구성된 프롬프트 길이: 5910 문자
2025-08-27 13:25:23,998 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-08-27 13:25:23,998 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5910)
2025-08-27 13:25:23,998 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-08-27 13:25:23,998 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-08-27 13:25:26,744 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:25:26,754 - mms_extractor - INFO - LLM 응답 길이: 315 문자
2025-08-27 13:25:26,755 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "Netflix 프리미엄 가입하고 혜택 받으세요",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "Netflix 프리미엄",
            "action": "가입"
        }
    ],
    "channel": [],
    "pgm": [
        "상품및부가서비스가입유도_구독",
        "사용법/혜택/이벤트안내_구독"
    ]
}
```...
2025-08-27 13:25:26,755 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-08-27 13:25:26,755 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-08-27 13:25:26,755 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-08-27 13:25:26,755 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': 'Netflix 프리미엄 가입하고 혜택 받으세요', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-08-27 13:25:26,755 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-08-27 13:25:26,755 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 프리미엄']
2025-08-27 13:25:26,881 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-08-27 13:25:26,881 - mms_extractor - INFO - ============================================================
2025-08-27 13:25:26,881 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-08-27 13:25:26,881 - mms_extractor - INFO - ============================================================
2025-08-27 13:25:26,881 - mms_extractor - INFO - 제목: Netflix 프리미엄 가입하고 혜택 받으세요
2025-08-27 13:25:26,881 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-08-27 13:25:26,881 - mms_extractor - INFO - 상품 수: 1개
2025-08-27 13:25:26,881 - mms_extractor - INFO - 채널 수: 0개
2025-08-27 13:25:26,881 - mms_extractor - INFO - 프로그램 수: 2개
2025-08-27 13:25:26,881 - mms_extractor - INFO - process_message 실행완료: 11.20초
2025-08-27 13:25:26,881 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:299: UserWarning: resource_tracker: There appear to be 12 leaked semloc/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:299: UserWarning: resource_tracker: There appear to be 12 leaked semlock objects to clean up at shutdown
  warnings.warn(
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:299: UserWarning: resource_tracker: There appear to be 10 leaked folder objects to clean up at shutdown
  warnings.warn(
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_e56fb0834a0745e4877fd08eb318bcde_544fdc200680420691523439b7f16148: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_e56fb0834a0745e4877fd08eb318bcde_89dd97c5d6d64032bb19fb14ee570a20: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_41a68e26944e400d96e1c903cbddf9a3_e280e76df3874053ae2e32639af13127: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_e56fb0834a0745e4877fd08eb318bcde_8c845d5c01ce4444a129551d6c8efb7a: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_6b9a76582dad43429f5713ffb56aae64_428f14cf00ad4865a24c45953453584d: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_e56fb0834a0745e4877fd08eb318bcde_af56483cd7b6407a9ce6e23d24a09ba7: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_195cadbd12194c67a3739c5c5422f108_0c2349e3652649cb9af36da1097010b6: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_e56fb0834a0745e4877fd08eb318bcde_2b48b3ae0f184d4ea44758223a6e3aa1: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_3030e65af4c2413c9b362272ce3764ee_b4b8361e9fb14c56a39265398ef5ea02: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/joblib/externals/loky/backend/resource_tracker.py:315: UserWarning: resource_tracker: /var/folders/0h/3c1x50w901n85pq5kbbn9mn020dh7m/T/joblib_memmapping_folder_38271_e56fb0834a0745e4877fd08eb318bcde_85240f79720745c9b2c12e45341c9488: FileNotFoundError(2, 'No such file or directory')
  warnings.warn(f"resource_tracker: {name}: {e!r}")
/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/multiprocessing/resource_tracker.py:279: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
n__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-08-27 13:27:43,347 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-08-27 13:27:43,347 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-08-27 13:27:43,369 - mms_extractor - INFO - Using device: mps
2025-08-27 13:27:43,370 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-08-27 13:27:43,370 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-08-27 13:27:43,370 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-08-27 13:27:43,370 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-08-27 13:27:43,370 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-08-27 13:27:43,370 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-08-27 13:27:44,647 - mms_extractor - INFO - Model loaded on mps
2025-08-27 13:27:44,647 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.28초
2025-08-27 13:27:45,211 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-08-27 13:27:45,211 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.56초
2025-08-27 13:27:45,211 - mms_extractor - INFO - ============================================================
2025-08-27 13:27:45,211 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-08-27 13:27:45,211 - mms_extractor - INFO - ============================================================
2025-08-27 13:27:45,211 - mms_extractor - INFO - 데이터 소스 모드: local
2025-08-27 13:27:45,211 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-08-27 13:27:45,211 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-08-27 13:27:45,211 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-08-27 13:27:45,211 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-08-27 13:27:45,354 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-08-27 13:27:45,354 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-08-27 13:27:45,363 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-08-27 13:27:45,368 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-08-27 13:27:45,370 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-08-27 13:27:45,374 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-08-27 13:27:45,374 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-08-27 13:27:45,374 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-08-27 13:27:45,374 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-08-27 13:27:45,374 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-08-27 13:27:45,374 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-08-27 13:27:45,374 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-08-27 13:27:45,380 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-08-27 13:27:45,381 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-08-27 13:27:45,381 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-08-27 13:27:45,713 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-08-27 13:27:45,716 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-08-27 13:27:45,716 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-08-27 13:27:45,716 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-08-27 13:27:45,716 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-08-27 13:27:45,717 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-08-27 13:27:45,717 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-08-27 13:27:45,717 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-08-27 13:27:45,717 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-08-27 13:27:45,725 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-08-27 13:27:45,728 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-08-27 13:27:45,728 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-08-27 13:27:45,789 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-08-27 13:27:45,789 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-08-27 13:27:45,789 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-08-27 13:27:45,791 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-08-27 13:27:45,791 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-08-27 13:27:46,032 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-08-27 13:27:46,033 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-08-27 13:27:46,033 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-08-27 13:27:46,586 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-08-27 13:27:46,586 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-08-27 13:27:46,586 - mms_extractor - INFO - ============================================================
2025-08-27 13:27:46,586 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-08-27 13:27:46,586 - mms_extractor - INFO - ============================================================
2025-08-27 13:27:46,586 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-08-27 13:27:46,586 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-08-27 13:27:46,586 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-08-27 13:27:46,586 - mms_extractor - INFO - ✅ 정지어: 166개
2025-08-27 13:27:46,586 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-08-27 13:27:46,592 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-08-27 13:27:46,599 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-08-27 13:27:46,603 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-08-27 13:27:46,603 - mms_extractor - INFO - _load_data 실행완료: 1.39초
2025-08-27 13:27:46,603 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-08-27 13:27:46,603 - __main__ - INFO - 전역 추출기 초기화 완료
2025-08-27 13:27:46,603 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-08-27 13:27:46,603 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-08-27 13:27:46,603 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-08-27 13:27:46,603 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-08-27 13:27:46,603 - __main__ - INFO -   GET  /health - 헬스체크
2025-08-27 13:27:46,603 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-08-27 13:27:46,603 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-08-27 13:27:46,604 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-08-27 13:27:46,604 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-08-27 13:27:46,718 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.113.49:8000
2025-08-27 13:27:46,718 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-27 13:27:57,906 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:27:57] "GET /health HTTP/1.1" 200 -
2025-08-27 13:28:08,019 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:28:08] "GET /health HTTP/1.1" 200 -
2025-08-27 13:28:09,203 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:28:09] "GET /health HTTP/1.1" 200 -
2025-08-27 13:28:11,204 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:28:11] "GET /health HTTP/1.1" 200 -
2025-08-27 13:28:14,311 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:28:14] "GET /health HTTP/1.1" 200 -
2025-08-27 13:28:14,322 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 663자
2025-08-27 13:28:14,322 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-08-27 13:28:14,322 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-08-27 13:28:14,322 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작:             '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! \n(광고)[S...
2025-08-27 13:28:14,322 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-08-27 13:28:14,322 - mms_extractor - INFO - ============================================================
2025-08-27 13:28:14,322 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-08-27 13:28:14,322 - mms_extractor - INFO - ============================================================
2025-08-27 13:28:14,322 - mms_extractor - INFO - 메시지 내용:             '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! \n(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04 고객님,_넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! __오직 T 우주에서만, _2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.__8월...
2025-08-27 13:28:14,322 - mms_extractor - INFO - 메시지 길이: 663 문자
2025-08-27 13:28:14,322 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-08-27 13:28:14,322 - mms_extractor - INFO - 데이터 소스: local
2025-08-27 13:28:14,322 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-08-27 13:28:14,322 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-08-27 13:28:14,322 - mms_extractor - INFO - LLM 모델: ax
2025-08-27 13:28:14,323 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-08-27 13:28:14,323 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-08-27 13:28:14,323 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-08-27 13:28:14,323 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-08-27 13:28:14,323 - mms_extractor - INFO - 처리할 메시지 길이: 650 문자
2025-08-27 13:28:14,334 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-08-27 13:28:14,914 - mms_extractor - INFO - 분할된 문장 수: 20개
2025-08-27 13:28:14,915 - mms_extractor - INFO - 필터링된 문장들: [' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 ', '넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ']...
2025-08-27 13:28:14,921 - mms_extractor - INFO - 전체 토큰 수: 263개
2025-08-27 13:28:14,921 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '웨이브', '광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', '-', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-08-27 13:28:14,921 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 스탠다드', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '웨이브', '넷플릭스']
2025-08-27 13:28:14,921 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-08-27 13:28:24,313 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (13747, 3)
2025-08-27 13:28:24,313 - mms_extractor - INFO - 퍼지 매칭 성공: 13747개 결과
2025-08-27 13:28:24,315 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-08-27 13:28:24,315 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-08-27 13:28:24,506 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (13747, 3)
2025-08-27 13:28:24,506 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-08-27 13:28:24,506 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-08-27 13:28:24,511 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 110개
2025-08-27 13:28:24,517 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-08-27 13:28:24,517 - mms_extractor - INFO - 통합된 후보 아이템 수: 118개
2025-08-27 13:28:24,519 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄', '웨이브', 'Netflix', 'wavve', '스탠다드+', '스탠다드', 'Netflix 광고형 스탠다드 이용권', '(T)프리미엄', 'I-프리미엄', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', 'T 우주패스 넷플릭스', 'T쿠폰', '우드', '나우', '기본형.', '기본형', '플로', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 구독', 'Netflix 조합상품', '우주패스 넷플릭스', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', 'Netflix 단독', '타다 쿠폰', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'tving 광고형 스탠다드', '플로 콘텐츠 팩', 'TVING 광고형 스탠다드', '멜론 콘텐츠 팩', '우주패스 life', '우주패스 mini', '우주패스 slim', '넷플릭스 광고형 스탠다드 이용권', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', '웹ex_프리미엄', 'Wavve 콘텐츠 팩 PLUS', '클럽T 프리미엄', '클럽T 스탠다드', '스탠다드 Netflix', '웹ex_스탠다드', 'Wavve 콘텐츠 팩 Plus', '우주패스 배달형', '우주패스 all', 'Wavve 콘텐츠 팩 프리미엄', 'BTP(프로모션)', 'Wavve 콘텐츠 팩 plus']
2025-08-27 13:28:24,524 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (52, 2)
2025-08-27 13:28:24,524 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': 'BTP(프로모션)', 'item_id': ['NA00005178']}, {'item_nm': 'FLO', 'item_id': ['V683']}]
2025-08-27 13:28:24,525 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 10.20초
2025-08-27 13:28:24,525 - mms_extractor - INFO - 추출된 후보 엔티티: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄', '웨이브', 'Netflix', 'wavve', '스탠다드+', '스탠다드', 'Netflix 광고형 스탠다드 이용권', '(T)프리미엄', 'I-프리미엄', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', 'T 우주패스 넷플릭스', 'T쿠폰', '우드', '나우', '기본형.', '기본형', '플로', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 구독', 'Netflix 조합상품', '우주패스 넷플릭스', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', 'Netflix 단독', '타다 쿠폰', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'tving 광고형 스탠다드', '플로 콘텐츠 팩', 'TVING 광고형 스탠다드', '멜론 콘텐츠 팩', '우주패스 life', '우주패스 mini', '우주패스 slim', '넷플릭스 광고형 스탠다드 이용권', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', '웹ex_프리미엄', 'Wavve 콘텐츠 팩 PLUS', '클럽T 프리미엄', '클럽T 스탠다드', '스탠다드 Netflix', '웹ex_스탠다드', 'Wavve 콘텐츠 팩 Plus', '우주패스 배달형', '우주패스 all', 'Wavve 콘텐츠 팩 프리미엄', 'BTP(프로모션)', 'Wavve 콘텐츠 팩 plus']
2025-08-27 13:28:24,525 - mms_extractor - INFO - 매칭된 상품 정보: (52, 2)
2025-08-27 13:28:24,525 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-08-27 13:28:24,761 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-08-27 13:28:24,761 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-08-27 13:28:24,761 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-08-27 13:28:24,761 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-08-27 13:28:24,761 - mms_extractor - INFO - 후보 아이템 리스트 크기: 64개
2025-08-27 13:28:24,761 - mms_extractor - INFO - 후보 아이템 리스트: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄', '웨이브', 'Netflix', 'wavve', '스탠다드+', '스탠다드', 'Netflix 광고형 스탠다드 이용권', '(T)프리미엄', 'I-프리미엄', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', 'T 우주패스 넷플릭스', 'T쿠폰', '우드', '나우', '기본형.', '기본형', '플로', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 구독', 'Netflix 조합상품', '우주패스 넷플릭스', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', 'Netflix 단독', '타다 쿠폰', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'tving 광고형 스탠다드', '플로 콘텐츠 팩', 'TVING 광고형 스탠다드', '멜론 콘텐츠 팩', '우주패스 life', '우주패스 mini', '우주패스 slim', '넷플릭스 광고형 스탠다드 이용권', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', '웹ex_프리미엄', 'Wavve 콘텐츠 팩 PLUS', '클럽T 프리미엄', '클럽T 스탠다드', '스탠다드 Netflix', '웹ex_스탠다드', 'Wavve 콘텐츠 팩 Plus', '우주패스 배달형', '우주패스 all', 'Wavve 콘텐츠 팩 프리미엄', 'BTP(프로모션)', 'Wavve 콘텐츠 팩 plus']
2025-08-27 13:28:24,761 - mms_extractor - INFO - extra_item_pdf 크기: (52, 2)
2025-08-27 13:28:24,761 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-08-27 13:28:24,761 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': 'BTP(프로모션)', 'item_id': ['NA00005178']}]
2025-08-27 13:28:24,761 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-08-27 13:28:24,761 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-08-27 13:28:24,761 - mms_extractor - INFO - 구성된 프롬프트 길이: 6984 문자
2025-08-27 13:28:24,761 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-08-27 13:28:24,761 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6984)
2025-08-27 13:28:24,761 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-08-27 13:28:24,761 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-08-27 13:28:31,140 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:28:31,146 - mms_extractor - INFO - LLM 응답 길이: 934 문자
2025-08-27 13:28:31,146 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "넷플릭스",
            "action": "가입"
        },
        {
            "name": "웨이브",
            "action": "가입"
        },
        {
            "name": "우주패스 Netflix(광고형 스탠다드)",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        }
    ],
    "...
2025-08-27 13:28:31,146 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-08-27 13:28:31,146 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-08-27 13:28:31,146 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-08-27 13:28:31,146 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '넷플릭스', 'action': '가입'}, {'name': '웨이브', 'action': '가입'}, {'name': '우주패스 Netflix(광고형 스탠다드)', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-08-27 13:28:31,146 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-08-27 13:28:31,146 - mms_extractor - INFO - LLM 추출 엔티티: ['넷플릭스', '웨이브', '우주패스 Netflix(광고형 스탠다드)', 'Wavve 콘텐츠 팩']
2025-08-27 13:28:31,690 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 5023)
2025-08-27 13:28:31,691 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-08-27 13:28:31,691 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-08-27 13:28:32,858 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:28:33,153 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 2.01초
2025-08-27 13:28:33,161 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-08-27 13:28:33,161 - mms_extractor - INFO - ============================================================
2025-08-27 13:28:33,161 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-08-27 13:28:33,161 - mms_extractor - INFO - ============================================================
2025-08-27 13:28:33,161 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04
2025-08-27 13:28:33,161 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-08-27 13:28:33,161 - mms_extractor - INFO - 상품 수: 4개
2025-08-27 13:28:33,161 - mms_extractor - INFO - 채널 수: 3개
2025-08-27 13:28:33,161 - mms_extractor - INFO - 프로그램 수: 2개
2025-08-27 13:28:33,162 - mms_extractor - INFO - process_message 실행완료: 18.84초
2025-08-27 13:28:33,162 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-08-27 13:28:33,162 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-08-27 13:28:33,162 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 663자
2025-08-27 13:28:33,162 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3274424b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x327442b10> root_client=<openai.OpenAI object at 0x32721cf50> root_async_client=<openai.AsyncOpenAI object at 0x327441580> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-08-27 13:28:33,162 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-08-27 13:28:33,162 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3608자
2025-08-27 13:29:09,702 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:29:09,705 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 3395자
2025-08-27 13:29:09,705 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT의 T 우주 구독 서비스에서 넷플릭스와 웨이브(Wavve)를 2개월 동안 월 9,900원에 이용할 수 있는 특별 프로모션을 광고함. 이 프로모션은 8월 31일까지 진행되며, 이후 정상가로 자동 전환됨. 또한, 우주패스 Netflix(월 12,000원)의 기본 혜택과 추가 혜택(Wavve 콘...
2025-08-27 13:29:09,705 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-08-27 13:29:09,706 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 269자
2025-08-27 13:29:09,706 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-08-27 13:29:09,706 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-08-27 13:29:09,707 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용', '2개월 월 9,900원:수령', '프로모션 쿠폰:다운로드', '추가 요금 지불:선택', '넷플릭스 스탠다드/프리미엄:사용']
2025-08-27 13:29:09,707 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '2개월 월 9,900원:수령'), ('우주패스 Netflix:가입', '프로모션 쿠폰:다운로드'), ('우주패스 Netflix:가입', '추가 요금 지불:선택'), ('추가 요금 지불:선택', '넷플릭스 스탠다드/프리미엄:사용')]
2025-08-27 13:29:09,707 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-08-27 13:29:09,707 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_25f4d3100781709718c13fb4d5fdcd63e8489dbd60faab612fc2e2744bfd53d6
2025-08-27 13:29:09,708 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-08-27 13:29:09,709 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-08-27 13:29:10,182 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_25f4d3100781709718c13fb4d5fdcd63e8489dbd60faab612fc2e2744bfd53d6.png
2025-08-27 13:29:10,182 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_25f4d3100781709718c13fb4d5fdcd63e8489dbd60faab612fc2e2744bfd53d6
2025-08-27 13:29:10,182 - mms_extractor - INFO - 🕒 DAG 처리 시간: 37.021초
2025-08-27 13:29:10,182 - mms_extractor - INFO - 📏 DAG 섹션 길이: 269자
2025-08-27 13:29:10,182 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용)
(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원:수령)
(우주패스 Netflix:가입) -[가입후]-> (프로모션 쿠폰:다운로드)
(우주패스 Netflix:가...
2025-08-27 13:29:10,182 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-08-27 13:29:10,182 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-08-27 13:29:10,182 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-08-27 13:29:10,183 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)', '(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원:수령)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입후]-> (추가 요금 지불:선택)', '(우주패스 Netflix:가입) -[가입후]-> (프로모션 쿠폰:다운로드)', '(추가 요금 지불:선택) -[선택하면]-> (넷플릭스 스탠다드/프리미엄:사용)']...
2025-08-27 13:29:10,183 - __main__ - INFO - 추출 완료: 55.861초
2025-08-27 13:29:10,183 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:29:10] "POST /extract HTTP/1.1" 200 -
2025-08-27 13:29:10,207 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:29:10] "GET /health HTTP/1.1" 200 -
2025-08-27 13:29:46,030 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:29:46] "GET /health HTTP/1.1" 200 -
2025-08-27 13:29:46,057 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:29:46] "GET /health HTTP/1.1" 200 -
2025-08-27 13:29:47,218 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:29:47] "GET /health HTTP/1.1" 200 -
2025-08-27 13:29:47,224 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 323자
2025-08-27 13:29:47,224 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-08-27 13:29:47,224 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-08-27 13:29:47,224 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
(광고)[SKT] 우리 아이 첫 번째 스마트폰,...
2025-08-27 13:29:47,224 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-08-27 13:29:47,224 - mms_extractor - INFO - ============================================================
2025-08-27 13:29:47,224 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-08-27 13:29:47,224 - mms_extractor - INFO - ============================================================
2025-08-27 13:29:47,224 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
(광고)[SKT] 우리 아이 첫 번째 스마트폰, ZEM 키즈폰__#04 고객님, 안녕하세요!
우리 아이 스마트폰 고민 중이셨다면, 자녀 스마트폰 관리 앱 ZEM이 설치된 SKT만의 안전한 키즈폰,
ZEM폰 포켓몬에디션3으로 우리 아이 취향을 저격해 보세요!

✨ 특별 혜택
- 월 요금 20% 할인 (첫 6개월)
-...
2025-08-27 13:29:47,225 - mms_extractor - INFO - 메시지 길이: 323 문자
2025-08-27 13:29:47,225 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-08-27 13:29:47,225 - mms_extractor - INFO - 데이터 소스: local
2025-08-27 13:29:47,225 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-08-27 13:29:47,225 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-08-27 13:29:47,225 - mms_extractor - INFO - LLM 모델: ax
2025-08-27 13:29:47,225 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-08-27 13:29:47,225 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-08-27 13:29:47,225 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-08-27 13:29:47,225 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-08-27 13:29:47,225 - mms_extractor - INFO - 처리할 메시지 길이: 323 문자
2025-08-27 13:29:47,234 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-08-27 13:29:47,243 - mms_extractor - INFO - 분할된 문장 수: 7개
2025-08-27 13:29:47,243 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', ' 고객님 안녕하세요 ', '우리 아이 스마트폰 고민 중이셨다면 자녀 스마트폰 관리 앱 ZEM이 설치된 SKT만의 안전 키즈폰 ZEM폰 포켓몬에디션3으로 우리 아이 취향 저격 보세요 ']...
2025-08-27 13:29:47,246 - mms_extractor - INFO - 전체 토큰 수: 119개
2025-08-27 13:29:47,246 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', 'ZEM폰 포켓몬에디션3', '광고', '우리', '스마트폰', '우리', '아이', '스마트폰', '키즈폰', 'ZEM폰 포켓몬에디션3', '-', '포켓몬', '-', '프리미엄', '매장', '수신거부']
2025-08-27 13:29:47,246 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['키즈폰', 'ZEM폰 포켓몬에디션3', '아이']
2025-08-27 13:29:47,246 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-08-27 13:29:47,883 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (4784, 3)
2025-08-27 13:29:47,884 - mms_extractor - INFO - 퍼지 매칭 성공: 4784개 결과
2025-08-27 13:29:47,884 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '아이폰 14', 'sim': 0.5}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트피싱보호', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': 'PPS스마트폰 프리미엄', 'sim': 0.41666666666666663}]
2025-08-27 13:29:47,884 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-08-27 13:29:48,002 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (4784, 3)
2025-08-27 13:29:48,003 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '아이폰 14', 'sim': 0.4}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트피싱보호', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': 'PPS스마트폰 프리미엄', 'sim': 0.4}]
2025-08-27 13:29:48,003 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-08-27 13:29:48,006 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 26개
2025-08-27 13:29:48,011 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-08-27 13:29:48,011 - mms_extractor - INFO - 통합된 후보 아이템 수: 27개
2025-08-27 13:29:48,012 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['ZEM폰 포켓몬에디션3', 'ZEM폰 포켓몬에디션2', '리안', '이마트', '포미', '치안', 'kt키즈폰', '레이', '포켓원-프리미엄', '0서비스', '스마트로', '스키', '우리아이', 'SK텔레콤(주)', '(T)프리미엄', 'I-프리미엄', 'T 서비스', '포켓원-무료서비스', '미스테리 서비스', '프리미엄 플러스']
2025-08-27 13:29:48,017 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (20, 2)
2025-08-27 13:29:48,018 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '0서비스', 'item_id': ['NA00008607']}, {'item_nm': 'I-PREMIUM', 'item_id': ['NA00002268']}]
2025-08-27 13:29:48,019 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.79초
2025-08-27 13:29:48,019 - mms_extractor - INFO - 추출된 후보 엔티티: ['ZEM폰 포켓몬에디션3', 'ZEM폰 포켓몬에디션2', '리안', '이마트', '포미', '치안', 'kt키즈폰', '레이', '포켓원-프리미엄', '0서비스', '스마트로', '스키', '우리아이', 'SK텔레콤(주)', '(T)프리미엄', 'I-프리미엄', 'T 서비스', '포켓원-무료서비스', '미스테리 서비스', '프리미엄 플러스']
2025-08-27 13:29:48,019 - mms_extractor - INFO - 매칭된 상품 정보: (20, 2)
2025-08-27 13:29:48,019 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-08-27 13:29:48,150 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-08-27 13:29:48,150 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-08-27 13:29:48,150 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 400 문자
2025-08-27 13:29:48,150 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-08-27 13:29:48,150 - mms_extractor - INFO - 후보 아이템 리스트 크기: 20개
2025-08-27 13:29:48,150 - mms_extractor - INFO - 후보 아이템 리스트: ['ZEM폰 포켓몬에디션3', 'ZEM폰 포켓몬에디션2', '리안', '이마트', '포미', '치안', 'kt키즈폰', '레이', '포켓원-프리미엄', '0서비스', '스마트로', '스키', '우리아이', 'SK텔레콤(주)', '(T)프리미엄', 'I-프리미엄', 'T 서비스', '포켓원-무료서비스', '미스테리 서비스', '프리미엄 플러스']
2025-08-27 13:29:48,150 - mms_extractor - INFO - extra_item_pdf 크기: (20, 2)
2025-08-27 13:29:48,150 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-08-27 13:29:48,150 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '0서비스', 'item_id': ['NA00008607']}]
2025-08-27 13:29:48,150 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-08-27 13:29:48,150 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-08-27 13:29:48,150 - mms_extractor - INFO - 구성된 프롬프트 길이: 5894 문자
2025-08-27 13:29:48,150 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-08-27 13:29:48,150 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5894)
2025-08-27 13:29:48,150 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-08-27 13:29:48,150 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-08-27 13:29:54,554 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:29:54,559 - mms_extractor - INFO - LLM 응답 길이: 779 문자
2025-08-27 13:29:54,559 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] ZEM폰 포켓몬에디션3 안내",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "ZEM폰 포켓몬에디션3",
            "action": "가입"
        }
    ],
    "channel": [
        {
            "type": "전화번호",
            "value": "1588-0011",
            "action": "문의"
        },
        {
            "type": "대리점",
            "value": "가까운 T world 매장",
            "action": "추가 정보"
        },
        {
            "type": "URL",
  ...
2025-08-27 13:29:54,559 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-08-27 13:29:54,560 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-08-27 13:29:54,560 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-08-27 13:29:54,560 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] ZEM폰 포켓몬에디션3 안내', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': 'ZEM폰 포켓몬에디션3', 'action': '가입'}], 'channel': [{'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '대리점', 'value': '가까운 T world 매장', 'action': '추가 정보'}, {'type': 'URL', 'value': 'www.tworld.co.kr', 'action': '추가 정보'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-08-27 13:29:54,561 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-08-27 13:29:54,561 - mms_extractor - INFO - LLM 추출 엔티티: ['ZEM폰 포켓몬에디션3']
2025-08-27 13:29:54,826 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3253)
2025-08-27 13:29:54,826 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-08-27 13:29:54,826 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-08-27 13:29:55,230 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:29:55,360 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 0.80초
2025-08-27 13:29:55,576 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-08-27 13:29:55,576 - mms_extractor - INFO - ============================================================
2025-08-27 13:29:55,576 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-08-27 13:29:55,576 - mms_extractor - INFO - ============================================================
2025-08-27 13:29:55,576 - mms_extractor - INFO - 제목: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
2025-08-27 13:29:55,576 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-08-27 13:29:55,576 - mms_extractor - INFO - 상품 수: 1개
2025-08-27 13:29:55,576 - mms_extractor - INFO - 채널 수: 4개
2025-08-27 13:29:55,576 - mms_extractor - INFO - 프로그램 수: 2개
2025-08-27 13:29:55,576 - mms_extractor - INFO - process_message 실행완료: 8.35초
2025-08-27 13:29:55,576 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-08-27 13:29:55,576 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-08-27 13:29:55,576 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 323자
2025-08-27 13:29:55,576 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3274424b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x327442b10> root_client=<openai.OpenAI object at 0x32721cf50> root_async_client=<openai.AsyncOpenAI object at 0x327441580> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-08-27 13:29:55,576 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-08-27 13:29:55,576 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3268자
2025-08-27 13:30:18,702 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2620자
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SK텔레콤은 자녀의 첫 스마트폰으로 ZEM폰 포켓몬에디션3을 추천하며, 안전한 사용 환경과 다양한 특별 혜택을 강조합니다. 월 요금 20% 할인(첫 6개월), 포켓몬 케이스 무료 증정, ZEM 프리미엄 서비스 3개월 무료 등의 혜택을 통해 구매를 유도하고 있습니다.

[식별된 가치 제안 목록]
...
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 309자
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 매장:방문', 'ZEM폰 포켓몬에디션3:구매', 'www.tworld.co.kr:접속', '월 요금 20% 할인:수령', '포켓몬 케이스:수령', 'ZEM 프리미엄 서비스 3개월 무료:수령', 'ZEM 앱:사용', '안전한 스마트폰 환경:경험']
2025-08-27 13:30:18,704 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 매장:방문', 'ZEM폰 포켓몬에디션3:구매'), ('ZEM폰 포켓몬에디션3:구매', '월 요금 20% 할인:수령'), ('ZEM폰 포켓몬에디션3:구매', '포켓몬 케이스:수령'), ('ZEM폰 포켓몬에디션3:구매', 'ZEM 프리미엄 서비스 3개월 무료:수령'), ('ZEM폰 포켓몬에디션3:구매', 'ZEM 앱:사용'), ('www.tworld.co.kr:접속', 'ZEM폰 포켓몬에디션3:구매'), ('ZEM 앱:사용', '안전한 스마트폰 환경:경험')]
2025-08-27 13:30:18,705 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-08-27 13:30:18,705 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be
2025-08-27 13:30:18,705 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-08-27 13:30:18,706 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-08-27 13:30:18,959 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be.png
2025-08-27 13:30:18,959 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be
2025-08-27 13:30:18,959 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.384초
2025-08-27 13:30:18,959 - mms_extractor - INFO - 📏 DAG 섹션 길이: 309자
2025-08-27 13:30:18,960 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 매장:방문) -[방문하여]-> (ZEM폰 포켓몬에디션3:구매)
(www.tworld.co.kr:접속) -[접속하여]-> (ZEM폰 포켓몬에디션3:구매)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (월 요금 20% 할인:수령)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (포켓몬 케이스:수령)
(ZEM폰 포켓몬에디션3:구매) -[...
2025-08-27 13:30:18,960 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-08-27 13:30:18,960 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-08-27 13:30:18,960 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-08-27 13:30:18,960 - __main__ - INFO - DAG 내용 미리보기: ['(T world 매장:방문) -[방문하여]-> (ZEM폰 포켓몬에디션3:구매)', '(ZEM 앱:사용) -[사용하면]-> (안전한 스마트폰 환경:경험)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 앱:사용)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 프리미엄 서비스 3개월 무료:수령)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (월 요금 20% 할인:수령)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (포켓몬 케이스:수령)', '(www.tworld.co.kr:접속) -[접속하여]-> (ZEM폰 포켓몬에디션3:구매)']...
2025-08-27 13:30:18,960 - __main__ - INFO - 추출 완료: 31.735초
2025-08-27 13:30:18,961 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:30:18] "POST /extract HTTP/1.1" 200 -
2025-08-27 13:30:18,981 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:30:18] "GET /health HTTP/1.1" 200 -
2025-08-27 13:30:37,245 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:30:37] "GET /health HTTP/1.1" 200 -
2025-08-27 13:30:37,267 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:30:37] "GET /health HTTP/1.1" 200 -
2025-08-27 13:30:38,837 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:30:38] "GET /health HTTP/1.1" 200 -
2025-08-27 13:30:38,846 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 284자
2025-08-27 13:30:38,846 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-08-27 13:30:38,846 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-08-27 13:30:38,846 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [T world] 5G 요금제 특가 혜택
(광고) 5G 슈퍼플랜 특가 이벤트 진행 중!

...
2025-08-27 13:30:38,846 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-08-27 13:30:38,846 - mms_extractor - INFO - ============================================================
2025-08-27 13:30:38,846 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-08-27 13:30:38,846 - mms_extractor - INFO - ============================================================
2025-08-27 13:30:38,846 - mms_extractor - INFO - 메시지 내용: [T world] 5G 요금제 특가 혜택
(광고) 5G 슈퍼플랜 특가 이벤트 진행 중!

🎯 이달의 특가
- 5G 슈퍼플랜 (데이터 무제한): 월 79,000원 → 39,000원 (50% 할인)
- 가족 추가 회선: 월 29,000원
- YouTube Premium 6개월 무료

📅 이벤트 기간: 2024.01.01 ~ 2024.01.31
🎁 신규 가입 시...
2025-08-27 13:30:38,846 - mms_extractor - INFO - 메시지 길이: 284 문자
2025-08-27 13:30:38,846 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-08-27 13:30:38,846 - mms_extractor - INFO - 데이터 소스: local
2025-08-27 13:30:38,846 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-08-27 13:30:38,846 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-08-27 13:30:38,846 - mms_extractor - INFO - LLM 모델: ax
2025-08-27 13:30:38,847 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-08-27 13:30:38,847 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-08-27 13:30:38,847 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-08-27 13:30:38,847 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-08-27 13:30:38,847 - mms_extractor - INFO - 처리할 메시지 길이: 284 문자
2025-08-27 13:30:38,856 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-08-27 13:30:38,860 - mms_extractor - INFO - 분할된 문장 수: 5개
2025-08-27 13:30:38,860 - mms_extractor - INFO - 필터링된 문장들: [' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', '🎯 이달의 특가 5G 슈퍼플랜 데이터 무제한 월 79,000원 50 할인 - 가족 추가 회선 월 - YouTube Premium 무료', '📅 이벤트 기간 🎁 신규 가입 시 갤럭시 버즈 증정']...
2025-08-27 13:30:38,862 - mms_extractor - INFO - 전체 토큰 수: 95개
2025-08-27 13:30:38,862 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '데이터', '-', '-', 'YouTube Premium', '이벤트', '갤럭시', '버즈', '가입', '매장', '매장', '수신거부']
2025-08-27 13:30:38,862 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['갤럭시', '버즈', 'YouTube Premium']
2025-08-27 13:30:38,862 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-08-27 13:30:39,334 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (6527, 3)
2025-08-27 13:30:39,334 - mms_extractor - INFO - 퍼지 매칭 성공: 6527개 결과
2025-08-27 13:30:39,335 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', 'item_nm_alias': 'X5', 'sim': 0.5}, {'sent': ' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', 'item_nm_alias': 'T-world_국제문자_SureM', 'sim': 0.4}, {'sent': ' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', 'item_nm_alias': '6월 영화 이벤트', 'sim': 0.5555555555555556}]
2025-08-27 13:30:39,335 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-08-27 13:30:39,491 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (6527, 3)
2025-08-27 13:30:39,491 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', 'item_nm_alias': 'X5', 'sim': 0.4}, {'sent': ' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', 'item_nm_alias': 'T-world_국제문자_SureM', 'sim': 0.4555555555555556}, {'sent': ' T world 5G 요금제 특가 혜택 광고 5G 슈퍼플랜 특가 이벤트 진행 중 ', 'item_nm_alias': '6월 영화 이벤트', 'sim': 0.5111111111111112}]
2025-08-27 13:30:39,491 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-08-27 13:30:39,495 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 46개
2025-08-27 13:30:39,499 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 2개
2025-08-27 13:30:39,499 - mms_extractor - INFO - 통합된 후보 아이템 수: 48개
2025-08-27 13:30:39,500 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['YouTube Premium', 'premium', 'Premium', '(T)Premium', '(T)premium', 'YouTube Premium 구독', '데이터 속도 premium', '데이터 속도 Premium', 'YouTube Preium(구)', 'YouTube Premium_구독', '광랜', 'G7', 'MT1', '데이터 100', '비즈데이터 월 50', '갤럭시 버디', '플로 무제한', 'T1 요금제', '클럽T Premium', '포켓원-Premium', '데이터15000 할인', '클럽T premium', '포켓원-premium', '5G 45', '티빙 premium', '티빙 Premium', '5G 69', '데이터10000할인', '우주패스(YouTube Premium)②ⓐ', '우주패스(YouTube Premium)②ⓓ', '우주패스(YouTube Premium)②ⓑ', '우주패스(YouTube Premium)②ⓒ', '포인트캠 premium', '포인트캠 Premium', 'T메모링 premium', '안전결제 premium', '안전결제 Premium', 'T알리미 Premium', 'premium2', 'premium1', 'Premium1', 'Premium2', 'T메모링 Premium', 'T알리미 premium', '데이터차단 50']
2025-08-27 13:30:39,505 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (33, 2)
2025-08-27 13:30:39,505 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005', 'NS00000005']}, {'item_nm': '5G 45', 'item_id': ['NA00007199']}, {'item_nm': '5G 69', 'item_id': ['NA00007200']}]
2025-08-27 13:30:39,505 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.66초
2025-08-27 13:30:39,506 - mms_extractor - INFO - 추출된 후보 엔티티: ['YouTube Premium', 'premium', 'Premium', '(T)Premium', '(T)premium', 'YouTube Premium 구독', '데이터 속도 premium', '데이터 속도 Premium', 'YouTube Preium(구)', 'YouTube Premium_구독', '광랜', 'G7', 'MT1', '데이터 100', '비즈데이터 월 50', '갤럭시 버디', '플로 무제한', 'T1 요금제', '클럽T Premium', '포켓원-Premium', '데이터15000 할인', '클럽T premium', '포켓원-premium', '5G 45', '티빙 premium', '티빙 Premium', '5G 69', '데이터10000할인', '우주패스(YouTube Premium)②ⓐ', '우주패스(YouTube Premium)②ⓓ', '우주패스(YouTube Premium)②ⓑ', '우주패스(YouTube Premium)②ⓒ', '포인트캠 premium', '포인트캠 Premium', 'T메모링 premium', '안전결제 premium', '안전결제 Premium', 'T알리미 Premium', 'premium2', 'premium1', 'Premium1', 'Premium2', 'T메모링 Premium', 'T알리미 premium', '데이터차단 50']
2025-08-27 13:30:39,506 - mms_extractor - INFO - 매칭된 상품 정보: (33, 2)
2025-08-27 13:30:39,506 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-08-27 13:30:39,546 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-08-27 13:30:39,547 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-08-27 13:30:39,547 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 417 문자
2025-08-27 13:30:39,547 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-08-27 13:30:39,547 - mms_extractor - INFO - 후보 아이템 리스트 크기: 45개
2025-08-27 13:30:39,547 - mms_extractor - INFO - 후보 아이템 리스트: ['YouTube Premium', 'premium', 'Premium', '(T)Premium', '(T)premium', 'YouTube Premium 구독', '데이터 속도 premium', '데이터 속도 Premium', 'YouTube Preium(구)', 'YouTube Premium_구독', '광랜', 'G7', 'MT1', '데이터 100', '비즈데이터 월 50', '갤럭시 버디', '플로 무제한', 'T1 요금제', '클럽T Premium', '포켓원-Premium', '데이터15000 할인', '클럽T premium', '포켓원-premium', '5G 45', '티빙 premium', '티빙 Premium', '5G 69', '데이터10000할인', '우주패스(YouTube Premium)②ⓐ', '우주패스(YouTube Premium)②ⓓ', '우주패스(YouTube Premium)②ⓑ', '우주패스(YouTube Premium)②ⓒ', '포인트캠 premium', '포인트캠 Premium', 'T메모링 premium', '안전결제 premium', '안전결제 Premium', 'T알리미 Premium', 'premium2', 'premium1', 'Premium1', 'Premium2', 'T메모링 Premium', 'T알리미 premium', '데이터차단 50']
2025-08-27 13:30:39,547 - mms_extractor - INFO - extra_item_pdf 크기: (33, 2)
2025-08-27 13:30:39,547 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-08-27 13:30:39,547 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005', 'NS00000005']}, {'item_nm': '5G 45', 'item_id': ['NA00007199']}]
2025-08-27 13:30:39,547 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-08-27 13:30:39,547 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-08-27 13:30:39,547 - mms_extractor - INFO - 구성된 프롬프트 길이: 6354 문자
2025-08-27 13:30:39,547 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-08-27 13:30:39,547 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6354)
2025-08-27 13:30:39,547 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-08-27 13:30:39,547 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-08-27 13:30:46,578 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:30:46,581 - mms_extractor - INFO - LLM 응답 길이: 1034 문자
2025-08-27 13:30:46,582 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[T world] 5G 요금제 특가 혜택",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "경품 제공 안내"
    ],
    "product": [
        {
            "name": "5G 슈퍼플랜 (데이터 무제한)",
            "action": "가입"
        },
        {
            "name": "가족 추가 회선",
            "action": "가입"
        },
        {
            "name": "YouTube Premium",
            "action": "사용"
        },
        {
            "name": "갤럭시 버즈",
            "action": "증정"
        }
    ],
    "channel":...
2025-08-27 13:30:46,582 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-08-27 13:30:46,583 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-08-27 13:30:46,583 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-08-27 13:30:46,583 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[T world] 5G 요금제 특가 혜택', 'purpose': ['상품 가입 유도', '혜택 안내', '경품 제공 안내'], 'product': [{'name': '5G 슈퍼플랜 (데이터 무제한)', 'action': '가입'}, {'name': '가족 추가 회선', 'action': '가입'}, {'name': 'YouTube Premium', 'action': '사용'}, {'name': '갤럭시 버즈', 'action': '증정'}], 'channel': [{'type': 'URL', 'value': 'm.tworld.co.kr', 'action': '가입'}, {'type': '대리점', 'value': '전국 T world 매장', 'action': '가입'}, {'type': '전화번호', 'value': '114', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_요금제', '상품및부가서비스가입유도_단말']}
2025-08-27 13:30:46,583 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-08-27 13:30:46,583 - mms_extractor - INFO - LLM 추출 엔티티: ['5G 슈퍼플랜 (데이터 무제한)', '가족 추가 회선', 'YouTube Premium', '갤럭시 버즈']
2025-08-27 13:30:46,847 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 4056)
2025-08-27 13:30:46,847 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-08-27 13:30:46,847 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-08-27 13:30:47,437 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:30:47,615 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.03초
2025-08-27 13:30:47,811 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-08-27 13:30:47,811 - mms_extractor - INFO - ============================================================
2025-08-27 13:30:47,811 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-08-27 13:30:47,811 - mms_extractor - INFO - ============================================================
2025-08-27 13:30:47,811 - mms_extractor - INFO - 제목: [T world] 5G 요금제 특가 혜택
2025-08-27 13:30:47,811 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '경품 제공 안내']
2025-08-27 13:30:47,811 - mms_extractor - INFO - 상품 수: 1개
2025-08-27 13:30:47,811 - mms_extractor - INFO - 채널 수: 4개
2025-08-27 13:30:47,811 - mms_extractor - INFO - 프로그램 수: 2개
2025-08-27 13:30:47,812 - mms_extractor - INFO - process_message 실행완료: 8.97초
2025-08-27 13:30:47,812 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-08-27 13:30:47,812 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-08-27 13:30:47,812 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 284자
2025-08-27 13:30:47,812 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3274424b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x327442b10> root_client=<openai.OpenAI object at 0x32721cf50> root_async_client=<openai.AsyncOpenAI object at 0x327441580> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-08-27 13:30:47,812 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-08-27 13:30:47,812 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3229자
2025-08-27 13:31:11,430 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:31:11,432 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2631자
2025-08-27 13:31:11,432 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
T world에서 5G 슈퍼플랜 요금제의 특가 이벤트를 진행 중이며, 신규 가입자에게 다양한 혜택을 제공하고자 합니다. 주요 혜택은 50% 할인, 가족 추가 회선 할인, YouTube Premium 6개월 무료, 그리고 신규 가입 시 갤럭시 버즈 증정입니다. 가입은 온라인, 매장, 고객센터를 통...
2025-08-27 13:31:11,432 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-08-27 13:31:11,433 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 570자
2025-08-27 13:31:11,433 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-08-27 13:31:11,433 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 4
2025-08-27 13:31:11,433 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['온라인:가입', '5G 슈퍼플랜:가입', '매장:방문', '고객센터:연락', '가족추가회선:가입']
2025-08-27 13:31:11,433 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('온라인:가입', '5G 슈퍼플랜:가입'), ('5G 슈퍼플랜:가입', '가족추가회선:가입'), ('매장:방문', '5G 슈퍼플랜:가입'), ('고객센터:연락', '5G 슈퍼플랜:가입')]
2025-08-27 13:31:11,433 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-08-27 13:31:11,433 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_c131c6fa4c3b3e8cf5c90a6d769ab54d2eda841fc185e5633f1e2c0948a18c00
2025-08-27 13:31:11,434 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 4
2025-08-27 13:31:11,435 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-08-27 13:31:11,953 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_c131c6fa4c3b3e8cf5c90a6d769ab54d2eda841fc185e5633f1e2c0948a18c00.png
2025-08-27 13:31:11,954 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_c131c6fa4c3b3e8cf5c90a6d769ab54d2eda841fc185e5633f1e2c0948a18c00
2025-08-27 13:31:11,954 - mms_extractor - INFO - 🕒 DAG 처리 시간: 24.142초
2025-08-27 13:31:11,954 - mms_extractor - INFO - 📏 DAG 섹션 길이: 570자
2025-08-27 13:31:11,954 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (온라인:가입) -[가입하면]-> (5G 슈퍼플랜:가입) -[가입하면]-> (50%할인:수령)
(온라인:가입) -[가입하면]-> (5G 슈퍼플랜:가입) -[가입하면]-> (YouTube Premium:무료이용)
(온라인:가입) -[가입하면]-> (5G 슈퍼플랜:가입) -[가입하면]-> (갤럭시버즈:수령)
(매장:방문) -[방문하여]-> (5G 슈퍼플랜:가입...
2025-08-27 13:31:11,954 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-08-27 13:31:11,954 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-08-27 13:31:11,954 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 10자
2025-08-27 13:31:11,954 - __main__ - INFO - DAG 내용 미리보기: ['(5G 슈퍼플랜:가입) -[가입후]-> (가족추가회선:가입) -[가입하면]-> (가족추가회선할인:수령)', '(고객센터:연락) -[연락하여]-> (5G 슈퍼플랜:가입) -[가입하면]-> (50%할인:수령)', '(고객센터:연락) -[연락하여]-> (5G 슈퍼플랜:가입) -[가입하면]-> (YouTube Premium:무료이용)', '(고객센터:연락) -[연락하여]-> (5G 슈퍼플랜:가입) -[가입하면]-> (갤럭시버즈:수령)', '(매장:방문) -[방문하여]-> (5G 슈퍼플랜:가입) -[가입하면]-> (50%할인:수령)', '(매장:방문) -[방문하여]-> (5G 슈퍼플랜:가입) -[가입하면]-> (YouTube Premium:무료이용)', '(매장:방문) -[방문하여]-> (5G 슈퍼플랜:가입) -[가입하면]-> (갤럭시버즈:수령)', '(온라인:가입) -[가입하면]-> (5G 슈퍼플랜:가입) -[가입하면]-> (50%할인:수령)', '(온라인:가입) -[가입하면]-> (5G 슈퍼플랜:가입) -[가입하면]-> (YouTube Premium:무료이용)', '(온라인:가입) -[가입하면]-> (5G 슈퍼플랜:가입) -[가입하면]-> (갤럭시버즈:수령)']...
2025-08-27 13:31:11,954 - __main__ - INFO - 추출 완료: 33.108초
2025-08-27 13:31:11,954 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:31:11] "POST /extract HTTP/1.1" 200 -
2025-08-27 13:31:11,972 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:31:11] "GET /health HTTP/1.1" 200 -
2025-08-27 13:41:55,757 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:41:55] "GET /health HTTP/1.1" 200 -
2025-08-27 13:41:55,786 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:41:55] "GET /health HTTP/1.1" 200 -
2025-08-27 13:41:57,301 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:41:57] "GET /health HTTP/1.1" 200 -
2025-08-27 13:41:57,309 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-08-27 13:41:57,310 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-08-27 13:41:57,310 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-08-27 13:41:57,310 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-08-27 13:41:57,310 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-08-27 13:41:57,310 - mms_extractor - INFO - ============================================================
2025-08-27 13:41:57,310 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-08-27 13:41:57,310 - mms_extractor - INFO - ============================================================
2025-08-27 13:41:57,310 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-08-27 13:41:57,310 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-08-27 13:41:57,310 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-08-27 13:41:57,310 - mms_extractor - INFO - 데이터 소스: local
2025-08-27 13:41:57,310 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-08-27 13:41:57,310 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-08-27 13:41:57,310 - mms_extractor - INFO - LLM 모델: ax
2025-08-27 13:41:57,310 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-08-27 13:41:57,310 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-08-27 13:41:57,311 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-08-27 13:41:57,311 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-08-27 13:41:57,311 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-08-27 13:41:57,322 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-08-27 13:41:57,326 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-08-27 13:41:57,327 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 - 갤럭시 S24 Ultra 최대 30만원 할인 - 갤럭시 S24 최대 25만원 할인 - 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 - 갤럭시 워치6 50 할인 - 무선충전기 무료 증정 - 케어플러스 무료']...
2025-08-27 13:41:57,328 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-08-27 13:41:57,328 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '광고', '갤럭시', '-', '갤럭시', '할인', '-', '갤럭시', '할인', '-', '갤럭시', '할인', '-', '갤럭시', '워치6', '할인', '-', '충전기', '-', '매장', '수신거부']
2025-08-27 13:41:57,328 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['워치6', '갤럭시', '충전기']
2025-08-27 13:41:57,328 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-08-27 13:42:16,468 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (8009, 3)
2025-08-27 13:42:16,468 - mms_extractor - INFO - 퍼지 매칭 성공: 8009개 결과
2025-08-27 13:42:16,469 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 S20 FE', 'sim': 0.6}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'KT_갤럭시 A32', 'sim': 0.5}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 퀀텀5', 'sim': 0.6}]
2025-08-27 13:42:16,469 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-08-27 13:42:16,660 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (8009, 3)
2025-08-27 13:42:16,660 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 S20 FE', 'sim': 0.6266666666666666}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'KT_갤럭시 A32', 'sim': 0.5466666666666666}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 퀀텀5', 'sim': 0.5571428571428572}]
2025-08-27 13:42:16,660 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-08-27 13:42:16,664 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 140개
2025-08-27 13:42:16,668 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-08-27 13:42:16,668 - mms_extractor - INFO - 통합된 후보 아이템 수: 140개
2025-08-27 13:42:16,670 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['ultra', 'Ultra', '갤럭시 S25+', '갤럭시 A25', '갤럭시 S22', '갤럭시 S25', '갤럭시 S22+', '갤럭시 A30', '갤럭시 S25 ultra', '갤럭시 S25 ULTRA', '갤럭시 S25 Ultra', '갤럭시 A40', '갤럭시 A24', '갤럭시 S24 ultra_256G', '갤럭시 S24 Ultra_256G', '갤럭시 S24 ULTRA_256G', '갤럭시S', '갤럭시A', '갤럭시S2', '갤럭시 워치 ultra', '갤럭시S4', '갤럭시 워치 Ultra', '갤럭시A5', '갤럭시S5', '갤럭시S3', '갤럭시 S24 ULTRA_1T', '갤럭시 S24 Ultra_1T', 'S20', 'R300', 'L2', 'I8', 'D2', '갤럭시 S24 ultra_1T', '갤럭시 워치 ULTRA', '갤럭시A3', '갤럭시 S24 ULTRA_512G', '갤럭시 S24 Ultra_512G', '갤럭시 S24 ultra_512G', '갤럭시 TAB S4', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 Tab S4', '갤럭시 A32', '갤럭시 A34', '갤럭시 A33', '갤럭시 A15', '갤럭시 S10', '갤럭시 A53', '갤럭시 S21+', '갤럭시 A31', '갤럭시 A23', '상시20%할인', 'SK텔레콤(주)', '갤럭시 S21', '갤럭시 A80', '갤럭시 S24 FE', '상시 30% 할인', '갤럭시 북S', '갤럭시 J4+', '갤럭시 A6', '갤럭시 탭 S4', '갤럭시 탭 S2', '갤럭시 A8', '갤럭시 노트20 Ultra', '갤럭시 S24+_256G', 'CU 할인', '갤럭시 워치6 40mm', '갤럭시 S24_256G', 'T 탭 24', 'T 탭 18', '갤럭시 A12', '갤럭시 탭 S9 Ultra', '갤럭시 탭 S8 Ultra', '갤럭시 S22 ULTRA_256G', '갤럭시 S20 ULTRA_256G', '갤럭시 S20 Ultra_256G', '갤럭시 S23 ultra_256G', '갤럭시 S23 Ultra_256G', '갤럭시 S23 ULTRA_256G', '갤럭시 S22 ultra_256G', '갤럭시 S22 Ultra_256G', '갤럭시 S21 ultra_256G', '갤럭시 S21 Ultra_256G', '갤럭시 S21 ULTRA_256G', '갤럭시 S20 ultra_256G', '갤럭시 A5(2016)', '갤럭시 A5(2017)', '갤럭시 TAB S10+', '갤럭시 S24+_512G', '(KTF)갤럭시 S25 ultra', '(LGU)갤럭시 S25 ultra', '(LGU)갤럭시 S25 Ultra', '(KTF)갤럭시 S25 Ultra', '갤럭시S2 LTE', '갤럭시 TAB S6', '갤럭시S22 Ultra 클럽', '갤럭시 Tab S6', '갤럭시 Tab S8', '갤럭시 Tab S8+', '갤럭시 Tab S9', '갤럭시 Tab S9+', '갤럭시 tab S6', 'T 탭 9', '더 예약', '갤럭시 S23 ultra_512G', '갤럭시 노트20', '갤럭시 S21 ultra_512G', 'T LoL팩', 'Ultra 햅틱', 'ultra 햅틱', '갤럭시 A10e', '갤럭시 A21S', '갤럭시 S10e', '갤럭시 S21 Ultra_512G', '갤럭시 S22 Ultra_512G', '갤럭시 S25 ultra_512G', '갤럭시 S22 ultra_512G', '갤럭시 S23 Ultra_512G', '갤럭시 S24_512G', '갤럭시 S25 ULTRA_1T', '갤럭시 S25 Ultra_1T', '갤럭시 S25 Ultra_512G', '갤럭시 S25 ultra_1T', '일상플러스(무료)']
2025-08-27 13:42:16,675 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (90, 2)
2025-08-27 13:42:16,676 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(KTF)갤럭시 S25 울트라', 'item_id': ['A66Z', 'A66Z']}, {'item_nm': '(LGU)갤럭시 S25 울트라', 'item_id': ['A67A', 'A67A']}, {'item_nm': 'CU 할인', 'item_id': ['PR00000344']}]
2025-08-27 13:42:16,676 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 19.37초
2025-08-27 13:42:16,676 - mms_extractor - INFO - 추출된 후보 엔티티: ['ultra', 'Ultra', '갤럭시 S25+', '갤럭시 A25', '갤럭시 S22', '갤럭시 S25', '갤럭시 S22+', '갤럭시 A30', '갤럭시 S25 ultra', '갤럭시 S25 ULTRA', '갤럭시 S25 Ultra', '갤럭시 A40', '갤럭시 A24', '갤럭시 S24 ultra_256G', '갤럭시 S24 Ultra_256G', '갤럭시 S24 ULTRA_256G', '갤럭시S', '갤럭시A', '갤럭시S2', '갤럭시 워치 ultra', '갤럭시S4', '갤럭시 워치 Ultra', '갤럭시A5', '갤럭시S5', '갤럭시S3', '갤럭시 S24 ULTRA_1T', '갤럭시 S24 Ultra_1T', 'S20', 'R300', 'L2', 'I8', 'D2', '갤럭시 S24 ultra_1T', '갤럭시 워치 ULTRA', '갤럭시A3', '갤럭시 S24 ULTRA_512G', '갤럭시 S24 Ultra_512G', '갤럭시 S24 ultra_512G', '갤럭시 TAB S4', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 Tab S4', '갤럭시 A32', '갤럭시 A34', '갤럭시 A33', '갤럭시 A15', '갤럭시 S10', '갤럭시 A53', '갤럭시 S21+', '갤럭시 A31', '갤럭시 A23', '상시20%할인', 'SK텔레콤(주)', '갤럭시 S21', '갤럭시 A80', '갤럭시 S24 FE', '상시 30% 할인', '갤럭시 북S', '갤럭시 J4+', '갤럭시 A6', '갤럭시 탭 S4', '갤럭시 탭 S2', '갤럭시 A8', '갤럭시 노트20 Ultra', '갤럭시 S24+_256G', 'CU 할인', '갤럭시 워치6 40mm', '갤럭시 S24_256G', 'T 탭 24', 'T 탭 18', '갤럭시 A12', '갤럭시 탭 S9 Ultra', '갤럭시 탭 S8 Ultra', '갤럭시 S22 ULTRA_256G', '갤럭시 S20 ULTRA_256G', '갤럭시 S20 Ultra_256G', '갤럭시 S23 ultra_256G', '갤럭시 S23 Ultra_256G', '갤럭시 S23 ULTRA_256G', '갤럭시 S22 ultra_256G', '갤럭시 S22 Ultra_256G', '갤럭시 S21 ultra_256G', '갤럭시 S21 Ultra_256G', '갤럭시 S21 ULTRA_256G', '갤럭시 S20 ultra_256G', '갤럭시 A5(2016)', '갤럭시 A5(2017)', '갤럭시 TAB S10+', '갤럭시 S24+_512G', '(KTF)갤럭시 S25 ultra', '(LGU)갤럭시 S25 ultra', '(LGU)갤럭시 S25 Ultra', '(KTF)갤럭시 S25 Ultra', '갤럭시S2 LTE', '갤럭시 TAB S6', '갤럭시S22 Ultra 클럽', '갤럭시 Tab S6', '갤럭시 Tab S8', '갤럭시 Tab S8+', '갤럭시 Tab S9', '갤럭시 Tab S9+', '갤럭시 tab S6', 'T 탭 9', '더 예약', '갤럭시 S23 ultra_512G', '갤럭시 노트20', '갤럭시 S21 ultra_512G', 'T LoL팩', 'Ultra 햅틱', 'ultra 햅틱', '갤럭시 A10e', '갤럭시 A21S', '갤럭시 S10e', '갤럭시 S21 Ultra_512G', '갤럭시 S22 Ultra_512G', '갤럭시 S25 ultra_512G', '갤럭시 S22 ultra_512G', '갤럭시 S23 Ultra_512G', '갤럭시 S24_512G', '갤럭시 S25 ULTRA_1T', '갤럭시 S25 Ultra_1T', '갤럭시 S25 Ultra_512G', '갤럭시 S25 ultra_1T', '일상플러스(무료)']
2025-08-27 13:42:16,676 - mms_extractor - INFO - 매칭된 상품 정보: (90, 2)
2025-08-27 13:42:16,676 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-08-27 13:42:16,728 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-08-27 13:42:16,728 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-08-27 13:42:16,728 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-08-27 13:42:16,728 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-08-27 13:42:16,728 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-08-27 13:42:16,728 - mms_extractor - INFO - 후보 아이템 리스트: ['ultra', 'Ultra', '갤럭시 S25+', '갤럭시 A25', '갤럭시 S22', '갤럭시 S25', '갤럭시 S22+', '갤럭시 A30', '갤럭시 S25 ultra', '갤럭시 S25 ULTRA', '갤럭시 S25 Ultra', '갤럭시 A40', '갤럭시 A24', '갤럭시 S24 ultra_256G', '갤럭시 S24 Ultra_256G', '갤럭시 S24 ULTRA_256G', '갤럭시S', '갤럭시A', '갤럭시S2', '갤럭시 워치 ultra', '갤럭시S4', '갤럭시 워치 Ultra', '갤럭시A5', '갤럭시S5', '갤럭시S3', '갤럭시 S24 ULTRA_1T', '갤럭시 S24 Ultra_1T', 'S20', 'R300', 'L2', 'I8', 'D2', '갤럭시 S24 ultra_1T', '갤럭시 워치 ULTRA', '갤럭시A3', '갤럭시 S24 ULTRA_512G', '갤럭시 S24 Ultra_512G', '갤럭시 S24 ultra_512G', '갤럭시 TAB S4', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 Tab S4', '갤럭시 A32', '갤럭시 A34', '갤럭시 A33', '갤럭시 A15', '갤럭시 S10', '갤럭시 A53', '갤럭시 S21+', '갤럭시 A31', '갤럭시 A23', '상시20%할인', 'SK텔레콤(주)', '갤럭시 S21', '갤럭시 A80', '갤럭시 S24 FE', '상시 30% 할인', '갤럭시 북S', '갤럭시 J4+', '갤럭시 A6', '갤럭시 탭 S4', '갤럭시 탭 S2', '갤럭시 A8', '갤럭시 노트20 Ultra', '갤럭시 S24+_256G', 'CU 할인', '갤럭시 워치6 40mm', '갤럭시 S24_256G', 'T 탭 24', 'T 탭 18', '갤럭시 A12', '갤럭시 탭 S9 Ultra', '갤럭시 탭 S8 Ultra', '갤럭시 S22 ULTRA_256G', '갤럭시 S20 ULTRA_256G', '갤럭시 S20 Ultra_256G', '갤럭시 S23 ultra_256G', '갤럭시 S23 Ultra_256G', '갤럭시 S23 ULTRA_256G', '갤럭시 S22 ultra_256G', '갤럭시 S22 Ultra_256G', '갤럭시 S21 ultra_256G', '갤럭시 S21 Ultra_256G', '갤럭시 S21 ULTRA_256G', '갤럭시 S20 ultra_256G', '갤럭시 A5(2016)', '갤럭시 A5(2017)', '갤럭시 TAB S10+', '갤럭시 S24+_512G', '(KTF)갤럭시 S25 ultra', '(LGU)갤럭시 S25 ultra', '(LGU)갤럭시 S25 Ultra', '(KTF)갤럭시 S25 Ultra', '갤럭시S2 LTE', '갤럭시 TAB S6', '갤럭시S22 Ultra 클럽', '갤럭시 Tab S6', '갤럭시 Tab S8', '갤럭시 Tab S8+', '갤럭시 Tab S9', '갤럭시 Tab S9+', '갤럭시 tab S6', 'T 탭 9', '더 예약', '갤럭시 S23 ultra_512G', '갤럭시 노트20', '갤럭시 S21 ultra_512G', 'T LoL팩', 'Ultra 햅틱', 'ultra 햅틱', '갤럭시 A10e', '갤럭시 A21S', '갤럭시 S10e', '갤럭시 S21 Ultra_512G', '갤럭시 S22 Ultra_512G', '갤럭시 S25 ultra_512G', '갤럭시 S22 ultra_512G', '갤럭시 S23 Ultra_512G', '갤럭시 S24_512G', '갤럭시 S25 ULTRA_1T', '갤럭시 S25 Ultra_1T', '갤럭시 S25 Ultra_512G', '갤럭시 S25 ultra_1T', '일상플러스(무료)']
2025-08-27 13:42:16,729 - mms_extractor - INFO - extra_item_pdf 크기: (90, 2)
2025-08-27 13:42:16,729 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-08-27 13:42:16,729 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(KTF)갤럭시 S25 울트라', 'item_id': ['A66Z', 'A66Z']}, {'item_nm': '(LGU)갤럭시 S25 울트라', 'item_id': ['A67A', 'A67A']}]
2025-08-27 13:42:16,729 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-08-27 13:42:16,729 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-08-27 13:42:16,729 - mms_extractor - INFO - 구성된 프롬프트 길이: 7563 문자
2025-08-27 13:42:16,729 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-08-27 13:42:16,729 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7563)
2025-08-27 13:42:16,729 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-08-27 13:42:16,729 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-08-27 13:42:24,692 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:42:24,696 - mms_extractor - INFO - LLM 응답 길이: 1170 문자
2025-08-27 13:42:24,697 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "갤럭시 S24 Ultra",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24+",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24",
            "action": "구매"
        },
        {
            "name": "갤럭시 워치6",
            "action": "구매"
        },
        {
            "name": "무선충전기",
            "a...
2025-08-27 13:42:24,697 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-08-27 13:42:24,699 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-08-27 13:42:24,699 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-08-27 13:42:24,699 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '가입'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '가입'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-08-27 13:42:24,699 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-08-27 13:42:24,700 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-08-27 13:42:24,976 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3577)
2025-08-27 13:42:24,976 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-08-27 13:42:24,976 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-08-27 13:42:25,829 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:42:26,794 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 2.09초
2025-08-27 13:42:26,802 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-08-27 13:42:26,802 - mms_extractor - INFO - ============================================================
2025-08-27 13:42:26,802 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-08-27 13:42:26,802 - mms_extractor - INFO - ============================================================
2025-08-27 13:42:26,802 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-08-27 13:42:26,802 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-08-27 13:42:26,802 - mms_extractor - INFO - 상품 수: 4개
2025-08-27 13:42:26,802 - mms_extractor - INFO - 채널 수: 4개
2025-08-27 13:42:26,802 - mms_extractor - INFO - 프로그램 수: 2개
2025-08-27 13:42:26,802 - mms_extractor - INFO - process_message 실행완료: 29.49초
2025-08-27 13:42:26,802 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-08-27 13:42:26,802 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-08-27 13:42:26,802 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-08-27 13:42:26,803 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3274424b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x327442b10> root_client=<openai.OpenAI object at 0x32721cf50> root_async_client=<openai.AsyncOpenAI object at 0x327441580> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-08-27 13:42:26,803 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-08-27 13:42:26,803 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3273자
2025-08-27 13:42:51,027 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-27 13:42:51,033 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2702자
2025-08-27 13:42:51,033 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 고객은 T world 앱 또는 지정된 매장 링크를 통해 사전예약을 할 수 있습니다.

[식별된 가치 제안 목록]
- 갤럭시 S24 시리즈 구매 시 모델별 최대 할인 혜...
2025-08-27 13:42:51,033 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-08-27 13:42:51,034 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 238자
2025-08-27 13:42:51,034 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-08-27 13:42:51,034 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-08-27 13:42:51,034 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱:예약', '갤럭시 S24 시리즈:구매', '매장:예약', '모델별 할인:수령', '갤럭시 워치6:50%할인', '무선충전기:무료증정', '케어플러스:6개월무료']
2025-08-27 13:42:51,034 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱:예약', '갤럭시 S24 시리즈:구매'), ('갤럭시 S24 시리즈:구매', '모델별 할인:수령'), ('갤럭시 S24 시리즈:구매', '갤럭시 워치6:50%할인'), ('갤럭시 S24 시리즈:구매', '무선충전기:무료증정'), ('갤럭시 S24 시리즈:구매', '케어플러스:6개월무료'), ('매장:예약', '갤럭시 S24 시리즈:구매')]
2025-08-27 13:42:51,035 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-08-27 13:42:51,035 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-08-27 13:42:51,035 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-08-27 13:42:51,038 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-08-27 13:42:51,338 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-08-27 13:42:51,339 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-08-27 13:42:51,339 - mms_extractor - INFO - 🕒 DAG 처리 시간: 24.536초
2025-08-27 13:42:51,339 - mms_extractor - INFO - 📏 DAG 섹션 길이: 238자
2025-08-27 13:42:51,339 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱:예약) -[예약후]-> (갤럭시 S24 시리즈:구매)
(매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매)

(갤럭시 S24 시리즈:구매) -[구매하면]-> (모델별 할인:수령)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50%할인)
(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:무료증정)
(갤...
2025-08-27 13:42:51,339 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-08-27 13:42:51,339 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-08-27 13:42:51,339 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-08-27 13:42:51,339 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱:예약) -[예약후]-> (갤럭시 S24 시리즈:구매)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:50%할인)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (모델별 할인:수령)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:무료증정)', '(갤럭시 S24 시리즈:구매) -[구매하면]-> (케어플러스:6개월무료)', '(매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매)']...
2025-08-27 13:42:51,339 - __main__ - INFO - 추출 완료: 54.029초
2025-08-27 13:42:51,340 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:42:51] "POST /extract HTTP/1.1" 200 -
2025-08-27 13:42:51,357 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 13:42:51] "GET /health HTTP/1.1" 200 -
2025-08-27 15:50:48,096 - werkzeug - INFO - 127.0.0.1 - - [27/Aug/2025 15:50:48] "GET /health HTTP/1.1" 200 -
2025-08-28 11:58:34,649 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 11:58:34] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:41,971 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:27:41] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:42,002 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:27:42] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:48,334 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:27:48] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:50,616 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:27:50] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:53,031 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:27:53] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:54,352 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:27:54] "GET /health HTTP/1.1" 200 -
2025-08-28 13:27:54,361 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 323자
2025-08-28 13:27:54,361 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-08-28 13:27:54,362 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-08-28 13:27:54,362 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
(광고)[SKT] 우리 아이 첫 번째 스마트폰,...
2025-08-28 13:27:54,362 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-08-28 13:27:54,362 - mms_extractor - INFO - ============================================================
2025-08-28 13:27:54,362 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-08-28 13:27:54,362 - mms_extractor - INFO - ============================================================
2025-08-28 13:27:54,362 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
(광고)[SKT] 우리 아이 첫 번째 스마트폰, ZEM 키즈폰__#04 고객님, 안녕하세요!
우리 아이 스마트폰 고민 중이셨다면, 자녀 스마트폰 관리 앱 ZEM이 설치된 SKT만의 안전한 키즈폰,
ZEM폰 포켓몬에디션3으로 우리 아이 취향을 저격해 보세요!

✨ 특별 혜택
- 월 요금 20% 할인 (첫 6개월)
-...
2025-08-28 13:27:54,362 - mms_extractor - INFO - 메시지 길이: 323 문자
2025-08-28 13:27:54,362 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-08-28 13:27:54,362 - mms_extractor - INFO - 데이터 소스: local
2025-08-28 13:27:54,362 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-08-28 13:27:54,362 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-08-28 13:27:54,362 - mms_extractor - INFO - LLM 모델: ax
2025-08-28 13:27:54,363 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-08-28 13:27:54,363 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-08-28 13:27:54,363 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-08-28 13:27:54,363 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-08-28 13:27:54,363 - mms_extractor - INFO - 처리할 메시지 길이: 323 문자
2025-08-28 13:27:54,377 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-08-28 13:27:54,396 - mms_extractor - INFO - 분할된 문장 수: 7개
2025-08-28 13:27:54,397 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', ' 고객님 안녕하세요 ', '우리 아이 스마트폰 고민 중이셨다면 자녀 스마트폰 관리 앱 ZEM이 설치된 SKT만의 안전 키즈폰 ZEM폰 포켓몬에디션3으로 우리 아이 취향 저격 보세요 ']...
2025-08-28 13:27:54,400 - mms_extractor - INFO - 전체 토큰 수: 119개
2025-08-28 13:27:54,400 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', 'ZEM폰 포켓몬에디션3', '광고', '우리', '스마트폰', '우리', '아이', '스마트폰', '키즈폰', 'ZEM폰 포켓몬에디션3', '-', '포켓몬', '-', '프리미엄', '매장', '수신거부']
2025-08-28 13:27:54,400 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['키즈폰', 'ZEM폰 포켓몬에디션3', '아이']
2025-08-28 13:27:54,400 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-08-28 13:28:11,272 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (4784, 3)
2025-08-28 13:28:11,272 - mms_extractor - INFO - 퍼지 매칭 성공: 4784개 결과
2025-08-28 13:28:11,274 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '아이폰 14', 'sim': 0.5}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트피싱보호', 'sim': 0.4285714285714286}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': 'PPS스마트폰 프리미엄', 'sim': 0.41666666666666663}]
2025-08-28 13:28:11,274 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-08-28 13:28:11,383 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (4784, 3)
2025-08-28 13:28:11,384 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '아이폰 14', 'sim': 0.4}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': '스마트피싱보호', 'sim': 0.34285714285714286}, {'sent': ' SK텔레콤 ZEM폰 포켓몬에디션3 안내 광고 SKT 우리 아이 첫 번째 스마트폰 ZEM 키즈폰', 'item_nm_alias': 'PPS스마트폰 프리미엄', 'sim': 0.4}]
2025-08-28 13:28:11,384 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-08-28 13:28:11,388 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 26개
2025-08-28 13:28:11,392 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 1개
2025-08-28 13:28:11,393 - mms_extractor - INFO - 통합된 후보 아이템 수: 27개
2025-08-28 13:28:11,395 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['ZEM폰 포켓몬에디션3', 'ZEM폰 포켓몬에디션2', '리안', '이마트', '포미', '치안', 'kt키즈폰', '레이', '포켓원-프리미엄', '0서비스', '스마트로', '스키', '우리아이', 'SK텔레콤(주)', '(T)프리미엄', 'I-프리미엄', 'T 서비스', '포켓원-무료서비스', '미스테리 서비스', '프리미엄 플러스']
2025-08-28 13:28:11,399 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (20, 2)
2025-08-28 13:28:11,399 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '0서비스', 'item_id': ['NA00008607']}, {'item_nm': 'I-PREMIUM', 'item_id': ['NA00002268']}]
2025-08-28 13:28:11,400 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 17.04초
2025-08-28 13:28:11,400 - mms_extractor - INFO - 추출된 후보 엔티티: ['ZEM폰 포켓몬에디션3', 'ZEM폰 포켓몬에디션2', '리안', '이마트', '포미', '치안', 'kt키즈폰', '레이', '포켓원-프리미엄', '0서비스', '스마트로', '스키', '우리아이', 'SK텔레콤(주)', '(T)프리미엄', 'I-프리미엄', 'T 서비스', '포켓원-무료서비스', '미스테리 서비스', '프리미엄 플러스']
2025-08-28 13:28:11,400 - mms_extractor - INFO - 매칭된 상품 정보: (20, 2)
2025-08-28 13:28:11,400 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-08-28 13:28:11,648 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-08-28 13:28:11,648 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-08-28 13:28:11,648 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 400 문자
2025-08-28 13:28:11,648 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-08-28 13:28:11,649 - mms_extractor - INFO - 후보 아이템 리스트 크기: 20개
2025-08-28 13:28:11,649 - mms_extractor - INFO - 후보 아이템 리스트: ['ZEM폰 포켓몬에디션3', 'ZEM폰 포켓몬에디션2', '리안', '이마트', '포미', '치안', 'kt키즈폰', '레이', '포켓원-프리미엄', '0서비스', '스마트로', '스키', '우리아이', 'SK텔레콤(주)', '(T)프리미엄', 'I-프리미엄', 'T 서비스', '포켓원-무료서비스', '미스테리 서비스', '프리미엄 플러스']
2025-08-28 13:28:11,649 - mms_extractor - INFO - extra_item_pdf 크기: (20, 2)
2025-08-28 13:28:11,649 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-08-28 13:28:11,649 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '0서비스', 'item_id': ['NA00008607']}]
2025-08-28 13:28:11,649 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-08-28 13:28:11,649 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-08-28 13:28:11,649 - mms_extractor - INFO - 구성된 프롬프트 길이: 5894 문자
2025-08-28 13:28:11,650 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-08-28 13:28:11,650 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5894)
2025-08-28 13:28:11,651 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-08-28 13:28:11,652 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-08-28 13:28:17,288 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-28 13:28:17,295 - mms_extractor - INFO - LLM 응답 길이: 779 문자
2025-08-28 13:28:17,295 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] ZEM폰 포켓몬에디션3 안내",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "ZEM폰 포켓몬에디션3",
            "action": "가입"
        }
    ],
    "channel": [
        {
            "type": "전화번호",
            "value": "1588-0011",
            "action": "문의"
        },
        {
            "type": "대리점",
            "value": "가까운 T world 매장",
            "action": "추가 정보"
        },
        {
            "type": "URL",
  ...
2025-08-28 13:28:17,295 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-08-28 13:28:17,296 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-08-28 13:28:17,296 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-08-28 13:28:17,296 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] ZEM폰 포켓몬에디션3 안내', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': 'ZEM폰 포켓몬에디션3', 'action': '가입'}], 'channel': [{'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '대리점', 'value': '가까운 T world 매장', 'action': '추가 정보'}, {'type': 'URL', 'value': 'www.tworld.co.kr', 'action': '추가 정보'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-08-28 13:28:17,296 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-08-28 13:28:17,296 - mms_extractor - INFO - LLM 추출 엔티티: ['ZEM폰 포켓몬에디션3']
2025-08-28 13:28:17,559 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3253)
2025-08-28 13:28:17,559 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-08-28 13:28:17,559 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-08-28 13:28:18,140 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-28 13:28:18,264 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 0.97초
2025-08-28 13:28:18,524 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-08-28 13:28:18,525 - mms_extractor - INFO - ============================================================
2025-08-28 13:28:18,525 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-08-28 13:28:18,525 - mms_extractor - INFO - ============================================================
2025-08-28 13:28:18,525 - mms_extractor - INFO - 제목: [SK텔레콤] ZEM폰 포켓몬에디션3 안내
2025-08-28 13:28:18,525 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-08-28 13:28:18,525 - mms_extractor - INFO - 상품 수: 1개
2025-08-28 13:28:18,525 - mms_extractor - INFO - 채널 수: 4개
2025-08-28 13:28:18,525 - mms_extractor - INFO - 프로그램 수: 2개
2025-08-28 13:28:18,525 - mms_extractor - INFO - process_message 실행완료: 24.16초
2025-08-28 13:28:18,525 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-08-28 13:28:18,525 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-08-28 13:28:18,525 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 323자
2025-08-28 13:28:18,525 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3274424b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x327442b10> root_client=<openai.OpenAI object at 0x32721cf50> root_async_client=<openai.AsyncOpenAI object at 0x327441580> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-08-28 13:28:18,525 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-08-28 13:28:18,525 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3268자
2025-08-28 13:28:39,368 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-28 13:28:39,371 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2326자
2025-08-28 13:28:39,373 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SK텔레콤은 자녀의 첫 스마트폰으로 ZEM폰 포켓몬에디션3을 추천하며, 안전한 사용 환경과 다양한 특별 혜택을 강조합니다. 월 요금 20% 할인(첫 6개월), 포켓몬 케이스 무료 증정, ZEM 프리미엄 서비스 3개월 무료 등의 혜택을 통해 구매를 유도하고 있습니다.

[식별된 가치 제안 목록]
...
2025-08-28 13:28:39,373 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-08-28 13:28:39,374 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 271자
2025-08-28 13:28:39,375 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-08-28 13:28:39,376 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-08-28 13:28:39,376 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 매장:방문', 'ZEM폰 포켓몬에디션3:구매', 'www.tworld.co.kr:접속', '월 요금 20% 할인:수령', '포켓몬 케이스:수령', 'ZEM 프리미엄 서비스 3개월 무료:수령', 'ZEM 앱:사용']
2025-08-28 13:28:39,376 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 매장:방문', 'ZEM폰 포켓몬에디션3:구매'), ('ZEM폰 포켓몬에디션3:구매', '월 요금 20% 할인:수령'), ('ZEM폰 포켓몬에디션3:구매', '포켓몬 케이스:수령'), ('ZEM폰 포켓몬에디션3:구매', 'ZEM 프리미엄 서비스 3개월 무료:수령'), ('ZEM폰 포켓몬에디션3:구매', 'ZEM 앱:사용'), ('www.tworld.co.kr:접속', 'ZEM폰 포켓몬에디션3:구매')]
2025-08-28 13:28:39,376 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-08-28 13:28:39,376 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be
2025-08-28 13:28:39,376 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-08-28 13:28:39,377 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-08-28 13:28:40,622 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be.png
2025-08-28 13:28:40,622 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7918d9d4d4c330a6d67eec805db2f25918f6da467b9c0f04752a6d08c07595be
2025-08-28 13:28:40,622 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.097초
2025-08-28 13:28:40,622 - mms_extractor - INFO - 📏 DAG 섹션 길이: 271자
2025-08-28 13:28:40,622 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 매장:방문) -[방문하여]-> (ZEM폰 포켓몬에디션3:구매)
(www.tworld.co.kr:접속) -[접속하여]-> (ZEM폰 포켓몬에디션3:구매)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (월 요금 20% 할인:수령)
(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (포켓몬 케이스:수령)
(ZEM폰 포켓몬에디션3:구매) -[...
2025-08-28 13:28:40,622 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-08-28 13:28:40,622 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-08-28 13:28:40,622 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-08-28 13:28:40,622 - __main__ - INFO - DAG 내용 미리보기: ['(T world 매장:방문) -[방문하여]-> (ZEM폰 포켓몬에디션3:구매)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 앱:사용)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (ZEM 프리미엄 서비스 3개월 무료:수령)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (월 요금 20% 할인:수령)', '(ZEM폰 포켓몬에디션3:구매) -[구매하면]-> (포켓몬 케이스:수령)', '(www.tworld.co.kr:접속) -[접속하여]-> (ZEM폰 포켓몬에디션3:구매)']...
2025-08-28 13:28:40,622 - __main__ - INFO - 추출 완료: 46.261초
2025-08-28 13:28:40,623 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:28:40] "POST /extract HTTP/1.1" 200 -
2025-08-28 13:28:40,641 - werkzeug - INFO - 127.0.0.1 - - [28/Aug/2025 13:28:40] "GET /health HTTP/1.1" 200 -
2025-08-29 08:24:15,347 - werkzeug - INFO - 127.0.0.1 - - [29/Aug/2025 08:24:15] "GET /health HTTP/1.1" 200 -
2025-08-29 08:54:11,627 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-08-29 08:54:11,628 - __main__ - INFO - 전역 추출기 초기화 중...
2025-08-29 08:54:11,628 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-08-29 08:54:11,628 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-08-29 08:54:11,628 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-08-29 08:54:11,695 - mms_extractor - INFO - Using device: mps
2025-08-29 08:54:11,695 - mms_extractor - INFO - _initialize_device 실행완료: 0.06초
2025-08-29 08:54:11,695 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-08-29 08:54:11,696 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-08-29 08:54:11,696 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-08-29 08:54:11,696 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-08-29 08:54:11,696 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-08-29 08:54:17,102 - mms_extractor - INFO - Model loaded on mps
2025-08-29 08:54:17,102 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 5.41초
2025-08-29 08:54:17,659 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-08-29 08:54:17,659 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.56초
2025-08-29 08:54:17,659 - mms_extractor - INFO - ============================================================
2025-08-29 08:54:17,659 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-08-29 08:54:17,659 - mms_extractor - INFO - ============================================================
2025-08-29 08:54:17,659 - mms_extractor - INFO - 데이터 소스 모드: local
2025-08-29 08:54:17,660 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-08-29 08:54:17,660 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-08-29 08:54:17,660 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-08-29 08:54:17,660 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-08-29 08:54:17,780 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-08-29 08:54:17,780 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-08-29 08:54:17,792 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-08-29 08:54:17,797 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-08-29 08:54:17,798 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-08-29 08:54:17,803 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-08-29 08:54:17,803 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-08-29 08:54:17,804 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-08-29 08:54:17,804 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-08-29 08:54:17,804 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-08-29 08:54:17,804 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-08-29 08:54:17,804 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-08-29 08:54:17,815 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-08-29 08:54:17,816 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-08-29 08:54:17,816 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-08-29 08:54:18,139 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-08-29 08:54:18,141 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-08-29 08:54:18,141 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-08-29 08:54:18,142 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-08-29 08:54:18,142 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-08-29 08:54:18,143 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-08-29 08:54:18,143 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-08-29 08:54:18,143 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-08-29 08:54:18,143 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-08-29 08:54:18,150 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-08-29 08:54:18,153 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-08-29 08:54:18,153 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-08-29 08:54:18,213 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-08-29 08:54:18,213 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-08-29 08:54:18,213 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-08-29 08:54:18,219 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-08-29 08:54:18,219 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-08-29 08:54:18,461 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-08-29 08:54:18,461 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-08-29 08:54:18,461 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-08-29 08:54:18,988 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-08-29 08:54:18,988 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-08-29 08:54:18,988 - mms_extractor - INFO - ============================================================
2025-08-29 08:54:18,988 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-08-29 08:54:18,988 - mms_extractor - INFO - ============================================================
2025-08-29 08:54:18,988 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-08-29 08:54:18,988 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-08-29 08:54:18,988 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-08-29 08:54:18,988 - mms_extractor - INFO - ✅ 정지어: 166개
2025-08-29 08:54:18,988 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-08-29 08:54:18,993 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-08-29 08:54:19,000 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-08-29 08:54:19,005 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-08-29 08:54:19,005 - mms_extractor - INFO - _load_data 실행완료: 1.35초
2025-08-29 08:54:19,005 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-08-29 08:54:19,005 - __main__ - INFO - 전역 추출기 초기화 완료
2025-08-29 08:54:19,005 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-08-29 08:54:19,005 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-08-29 08:54:19,005 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-08-29 08:54:19,005 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-08-29 08:54:19,005 - __main__ - INFO -   GET  /health - 헬스체크
2025-08-29 08:54:19,005 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-08-29 08:54:19,005 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-08-29 08:54:19,005 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-08-29 08:54:19,005 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-08-29 08:54:19,022 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.17:8000
2025-08-29 08:54:19,022 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-29 09:01:23,648 - werkzeug - INFO - 127.0.0.1 - - [29/Aug/2025 09:01:23] "GET /health HTTP/1.1" 200 -
2025-08-29 09:01:23,768 - werkzeug - INFO - 127.0.0.1 - - [29/Aug/2025 09:01:23] "GET /health HTTP/1.1" 200 -
2025-09-01 10:41:39,845 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 10:41:39] "GET /health HTTP/1.1" 200 -
2025-09-01 11:14:14,458 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-01 11:14:14,458 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-01 11:14:14,458 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-01 11:14:14,458 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-01 11:14:14,458 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-01 11:14:14,854 - mms_extractor - INFO - Using device: mps
2025-09-01 11:14:14,870 - mms_extractor - INFO - _initialize_device 실행완료: 0.37초
2025-09-01 11:14:14,874 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-01 11:14:14,874 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-01 11:14:14,874 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-01 11:14:14,874 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-01 11:14:14,874 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-01 11:14:21,621 - mms_extractor - INFO - Model loaded on mps
2025-09-01 11:14:21,622 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 6.75초
2025-09-01 11:14:22,154 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-01 11:14:22,154 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.53초
2025-09-01 11:14:22,154 - mms_extractor - INFO - ============================================================
2025-09-01 11:14:22,154 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-01 11:14:22,154 - mms_extractor - INFO - ============================================================
2025-09-01 11:14:22,154 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-01 11:14:22,155 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-01 11:14:22,155 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-01 11:14:22,155 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-01 11:14:22,155 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-01 11:14:22,266 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-01 11:14:22,266 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-01 11:14:22,277 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-01 11:14:22,281 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-01 11:14:22,282 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-01 11:14:22,286 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-01 11:14:22,286 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-01 11:14:22,286 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-01 11:14:22,287 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-01 11:14:22,287 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-01 11:14:22,287 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-01 11:14:22,287 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-01 11:14:22,294 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-01 11:14:22,295 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-01 11:14:22,295 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-01 11:14:22,599 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-01 11:14:22,601 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-01 11:14:22,601 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-01 11:14:22,601 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-01 11:14:22,601 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-01 11:14:22,602 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-01 11:14:22,602 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-01 11:14:22,602 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-01 11:14:22,602 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-01 11:14:22,609 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-01 11:14:22,611 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-01 11:14:22,611 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-01 11:14:22,661 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-01 11:14:22,661 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-01 11:14:22,661 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-01 11:14:22,673 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-01 11:14:22,673 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-01 11:14:22,910 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-01 11:14:22,910 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-01 11:14:22,910 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-01 11:14:23,405 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-01 11:14:23,405 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-01 11:14:23,405 - mms_extractor - INFO - ============================================================
2025-09-01 11:14:23,405 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-01 11:14:23,405 - mms_extractor - INFO - ============================================================
2025-09-01 11:14:23,405 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-01 11:14:23,405 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-01 11:14:23,405 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-01 11:14:23,405 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-01 11:14:23,405 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-01 11:14:23,410 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-01 11:14:23,417 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-01 11:14:23,420 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-01 11:14:23,420 - mms_extractor - INFO - _load_data 실행완료: 1.27초
2025-09-01 11:14:23,420 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-01 11:14:23,421 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-01 11:14:23,421 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-01 11:14:23,421 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-01 11:14:23,421 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-01 11:14:23,421 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-01 11:14:23,421 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-01 11:14:23,421 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-01 11:14:23,421 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-01 11:14:23,421 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-01 11:14:23,421 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-01 11:14:23,432 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.27.146:8000
2025-09-01 11:14:23,432 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-01 12:12:12,939 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 12:12:12] "GET /health HTTP/1.1" 200 -
2025-09-01 12:12:16,126 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 12:12:16] "GET /health HTTP/1.1" 200 -
2025-09-01 12:12:19,488 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 12:12:19] "GET /health HTTP/1.1" 200 -
2025-09-01 12:12:21,552 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 12:12:21] "GET /health HTTP/1.1" 200 -
2025-09-01 12:12:21,563 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 663자
2025-09-01 12:12:21,564 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-01 12:12:21,564 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-01 12:12:21,564 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작:             '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! \n(광고)[S...
2025-09-01 12:12:21,564 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-01 12:12:21,564 - mms_extractor - INFO - ============================================================
2025-09-01 12:12:21,564 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-01 12:12:21,564 - mms_extractor - INFO - ============================================================
2025-09-01 12:12:21,564 - mms_extractor - INFO - 메시지 내용:             '[T 우주] 넷플릭스와 웨이브를 월 9,900원에! \n(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04 고객님,_넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! __오직 T 우주에서만, _2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.__8월...
2025-09-01 12:12:21,564 - mms_extractor - INFO - 메시지 길이: 663 문자
2025-09-01 12:12:21,564 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-01 12:12:21,564 - mms_extractor - INFO - 데이터 소스: local
2025-09-01 12:12:21,564 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-09-01 12:12:21,564 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-01 12:12:21,564 - mms_extractor - INFO - LLM 모델: ax
2025-09-01 12:12:21,565 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-01 12:12:21,565 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-01 12:12:21,565 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-01 12:12:21,565 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-01 12:12:21,565 - mms_extractor - INFO - 처리할 메시지 길이: 650 문자
2025-09-01 12:12:21,576 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-01 12:12:22,131 - mms_extractor - INFO - 분할된 문장 수: 20개
2025-09-01 12:12:22,131 - mms_extractor - INFO - 필터링된 문장들: [' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 ', '넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ']...
2025-09-01 12:12:22,136 - mms_extractor - INFO - 전체 토큰 수: 263개
2025-09-01 12:12:22,136 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '웨이브', '광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', '-', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-01 12:12:22,137 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '넷플릭스', 'Netflix 스탠다드', '웨이브']
2025-09-01 12:12:22,137 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-01 12:12:47,955 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (13747, 3)
2025-09-01 12:12:47,955 - mms_extractor - INFO - 퍼지 매칭 성공: 13747개 결과
2025-09-01 12:12:47,964 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-01 12:12:47,964 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-01 12:12:48,154 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (13747, 3)
2025-09-01 12:12:48,155 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 n 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-01 12:12:48,155 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-01 12:12:48,159 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 110개
2025-09-01 12:12:48,165 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-01 12:12:48,165 - mms_extractor - INFO - 통합된 후보 아이템 수: 118개
2025-09-01 12:12:48,168 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄', '웨이브', 'Netflix', 'wavve', '스탠다드+', '스탠다드', 'Netflix 광고형 스탠다드 이용권', '(T)프리미엄', 'I-프리미엄', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', 'T 우주패스 넷플릭스', 'T쿠폰', '우드', '나우', '기본형.', '기본형', '플로', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 구독', 'Netflix 조합상품', '우주패스 넷플릭스', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', 'Netflix 단독', '타다 쿠폰', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'tving 광고형 스탠다드', '플로 콘텐츠 팩', 'TVING 광고형 스탠다드', '멜론 콘텐츠 팩', '우주패스 life', '우주패스 mini', '우주패스 slim', '넷플릭스 광고형 스탠다드 이용권', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', '웹ex_프리미엄', 'Wavve 콘텐츠 팩 PLUS', '클럽T 프리미엄', '클럽T 스탠다드', '스탠다드 Netflix', '웹ex_스탠다드', 'Wavve 콘텐츠 팩 Plus', '우주패스 배달형', '우주패스 all', 'Wavve 콘텐츠 팩 프리미엄', 'BTP(프로모션)', 'Wavve 콘텐츠 팩 plus']
2025-09-01 12:12:48,173 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (52, 2)
2025-09-01 12:12:48,173 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': 'BTP(프로모션)', 'item_id': ['NA00005178']}, {'item_nm': 'FLO', 'item_id': ['V683']}]
2025-09-01 12:12:48,174 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 26.61초
2025-09-01 12:12:48,174 - mms_extractor - INFO - 추출된 후보 엔티티: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄', '웨이브', 'Netflix', 'wavve', '스탠다드+', '스탠다드', 'Netflix 광고형 스탠다드 이용권', '(T)프리미엄', 'I-프리미엄', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', 'T 우주패스 넷플릭스', 'T쿠폰', '우드', '나우', '기본형.', '기본형', '플로', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 구독', 'Netflix 조합상품', '우주패스 넷플릭스', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', 'Netflix 단독', '타다 쿠폰', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'tving 광고형 스탠다드', '플로 콘텐츠 팩', 'TVING 광고형 스탠다드', '멜론 콘텐츠 팩', '우주패스 life', '우주패스 mini', '우주패스 slim', '넷플릭스 광고형 스탠다드 이용권', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', '웹ex_프리미엄', 'Wavve 콘텐츠 팩 PLUS', '클럽T 프리미엄', '클럽T 스탠다드', '스탠다드 Netflix', '웹ex_스탠다드', 'Wavve 콘텐츠 팩 Plus', '우주패스 배달형', '우주패스 all', 'Wavve 콘텐츠 팩 프리미엄', 'BTP(프로모션)', 'Wavve 콘텐츠 팩 plus']
2025-09-01 12:12:48,174 - mms_extractor - INFO - 매칭된 상품 정보: (52, 2)
2025-09-01 12:12:48,174 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-01 12:12:48,461 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-01 12:12:48,461 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-01 12:12:48,461 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-01 12:12:48,461 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-01 12:12:48,461 - mms_extractor - INFO - 후보 아이템 리스트 크기: 64개
2025-09-01 12:12:48,461 - mms_extractor - INFO - 후보 아이템 리스트: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄', '웨이브', 'Netflix', 'wavve', '스탠다드+', '스탠다드', 'Netflix 광고형 스탠다드 이용권', '(T)프리미엄', 'I-프리미엄', 'Netflix 스탠다드 이용권', 'T 우주패스 Netflix', '우주패스 Netflix 인증', 'T 우주패스 넷플릭스', 'T쿠폰', '우드', '나우', '기본형.', '기본형', '플로', '우주패스 Netflix 추가혜택', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩(TV)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 구독', 'Netflix 조합상품', '우주패스 넷플릭스', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', 'Netflix 단독', '타다 쿠폰', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 플러스', 'tving 광고형 스탠다드', '플로 콘텐츠 팩', 'TVING 광고형 스탠다드', '멜론 콘텐츠 팩', '우주패스 life', '우주패스 mini', '우주패스 slim', '넷플릭스 광고형 스탠다드 이용권', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', '웹ex_프리미엄', 'Wavve 콘텐츠 팩 PLUS', '클럽T 프리미엄', '클럽T 스탠다드', '스탠다드 Netflix', '웹ex_스탠다드', 'Wavve 콘텐츠 팩 Plus', '우주패스 배달형', '우주패스 all', 'Wavve 콘텐츠 팩 프리미엄', 'BTP(프로모션)', 'Wavve 콘텐츠 팩 plus']
2025-09-01 12:12:48,461 - mms_extractor - INFO - extra_item_pdf 크기: (52, 2)
2025-09-01 12:12:48,461 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-01 12:12:48,461 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': 'BTP(프로모션)', 'item_id': ['NA00005178']}]
2025-09-01 12:12:48,462 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-01 12:12:48,462 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-01 12:12:48,462 - mms_extractor - INFO - 구성된 프롬프트 길이: 6984 문자
2025-09-01 12:12:48,462 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-01 12:12:48,462 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6984)
2025-09-01 12:12:48,462 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-01 12:12:48,462 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-01 12:12:55,275 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 12:12:55,290 - mms_extractor - INFO - LLM 응답 길이: 934 문자
2025-09-01 12:12:55,290 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "넷플릭스",
            "action": "가입"
        },
        {
            "name": "웨이브",
            "action": "가입"
        },
        {
            "name": "우주패스 Netflix(광고형 스탠다드)",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        }
    ],
    "...
2025-09-01 12:12:55,290 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-01 12:12:55,291 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-01 12:12:55,291 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-01 12:12:55,291 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '넷플릭스', 'action': '가입'}, {'name': '웨이브', 'action': '가입'}, {'name': '우주패스 Netflix(광고형 스탠다드)', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-01 12:12:55,291 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-01 12:12:55,291 - mms_extractor - INFO - LLM 추출 엔티티: ['넷플릭스', '웨이브', '우주패스 Netflix(광고형 스탠다드)', 'Wavve 콘텐츠 팩']
2025-09-01 12:12:55,761 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 5023)
2025-09-01 12:12:55,761 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-01 12:12:55,761 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-01 12:12:56,512 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 12:12:56,799 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.51초
2025-09-01 12:12:56,807 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-01 12:12:56,807 - mms_extractor - INFO - ============================================================
2025-09-01 12:12:56,807 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-01 12:12:56,807 - mms_extractor - INFO - ============================================================
2025-09-01 12:12:56,807 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! __#04
2025-09-01 12:12:56,807 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-01 12:12:56,807 - mms_extractor - INFO - 상품 수: 4개
2025-09-01 12:12:56,807 - mms_extractor - INFO - 채널 수: 3개
2025-09-01 12:12:56,807 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-01 12:12:56,807 - mms_extractor - INFO - process_message 실행완료: 35.24초
2025-09-01 12:12:56,807 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-01 12:12:56,807 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-01 12:12:56,807 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 663자
2025-09-01 12:12:56,807 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x34e3476b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x359ac1970> root_client=<openai.OpenAI object at 0x359ab37a0> root_async_client=<openai.AsyncOpenAI object at 0x34e567470> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-01 12:12:56,807 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-01 12:12:56,807 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3608자
2025-09-01 12:13:18,858 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 12:13:18,861 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2489자
2025-09-01 12:13:18,861 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT의 T 우주 구독 서비스에서 넷플릭스와 웨이브(Wavve)를 월 9,900원에 2개월 동안 이용할 수 있는 특별 프로모션을 광고함. 이 혜택은 8월 31일까지만 제공되며, 프로모션 종료 후에는 정상가로 자동 결제됨. 또한, 추가 요금으로 넷플릭스 스탠다드/프리미엄 멤버십으로 업그레이드 가능...
2025-09-01 12:13:18,861 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-01 12:13:18,862 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 192자
2025-09-01 12:13:18,863 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-01 12:13:18,863 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 4
2025-09-01 12:13:18,864 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '우주패스 Netflix:가입', '2개월 9900원 쿠폰:수령', '넷플릭스+웨이브:이용', '추가요금:결제']
2025-09-01 12:13:18,865 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '2개월 9900원 쿠폰:수령'), ('우주패스 Netflix:가입', '추가요금:결제'), ('2개월 9900원 쿠폰:수령', '넷플릭스+웨이브:이용')]
2025-09-01 12:13:18,866 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-01 12:13:18,866 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_25f4d3100781709718c13fb4d5fdcd63e8489dbd60faab612fc2e2744bfd53d6
2025-09-01 12:13:18,867 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 4
2025-09-01 12:13:18,868 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-01 12:13:20,000 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_25f4d3100781709718c13fb4d5fdcd63e8489dbd60faab612fc2e2744bfd53d6.png
2025-09-01 12:13:20,001 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_25f4d3100781709718c13fb4d5fdcd63e8489dbd60faab612fc2e2744bfd53d6
2025-09-01 12:13:20,001 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.194초
2025-09-01 12:13:20,001 - mms_extractor - INFO - 📏 DAG 섹션 길이: 192자
2025-09-01 12:13:20,001 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (2개월 9900원 쿠폰:수령)
(2개월 9900원 쿠폰:수령) -[사용하면]-> (넷플릭스+웨이브:이용)
(우주패스 Netflix:가입) -[가입후]-> (추가요금:결제) -[결제하면]-> (넷플릭스 스탠다드/프리미엄:이용)...
2025-09-01 12:13:20,001 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-01 12:13:20,001 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-01 12:13:20,001 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 4자
2025-09-01 12:13:20,001 - __main__ - INFO - DAG 내용 미리보기: ['(2개월 9900원 쿠폰:수령) -[사용하면]-> (넷플릭스+웨이브:이용)', '(T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)', '(우주패스 Netflix:가입) -[가입하면]-> (2개월 9900원 쿠폰:수령)', '(우주패스 Netflix:가입) -[가입후]-> (추가요금:결제) -[결제하면]-> (넷플릭스 스탠다드/프리미엄:이용)']...
2025-09-01 12:13:20,001 - __main__ - INFO - 추출 완료: 58.437초
2025-09-01 12:13:20,002 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 12:13:20] "POST /extract HTTP/1.1" 200 -
2025-09-01 12:13:20,019 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 12:13:20] "GET /health HTTP/1.1" 200 -
2025-09-01 17:04:57,032 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:04:57] "GET /health HTTP/1.1" 200 -
2025-09-01 17:04:57,064 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:04:57] "GET /health HTTP/1.1" 200 -
2025-09-01 17:04:57,070 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 407자
2025-09-01 17:04:57,070 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-01 17:04:57,070 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-01 17:04:57,070 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜...
2025-09-01 17:04:57,070 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-01 17:04:57,070 - mms_extractor - INFO - ============================================================
2025-09-01 17:04:57,070 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-01 17:04:57,070 - mms_extractor - INFO - ============================================================
2025-09-01 17:04:57,070 - mms_extractor - INFO - 메시지 내용: [Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜택받9, 구매하9

【갤럭시 마지막 특가】
① 와이드8 ▶기기값 5만원
② A36 ▶기기값 10만원
③ S24 FE ▶기기값 20만원
☞ 제휴카드 사용 시 최대 72만원 추가할인

【SK로 통신사 이동 시】
① 쓰던 폰 그대로 이동시 상품권 20만원
② 인터넷+TV 가...
2025-09-01 17:04:57,070 - mms_extractor - INFO - 메시지 길이: 407 문자
2025-09-01 17:04:57,070 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-01 17:04:57,070 - mms_extractor - INFO - 데이터 소스: local
2025-09-01 17:04:57,070 - mms_extractor - INFO - 상품 정보 추출 모드: rag
2025-09-01 17:04:57,070 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-01 17:04:57,070 - mms_extractor - INFO - LLM 모델: ax
2025-09-01 17:04:57,070 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-01 17:04:57,071 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-01 17:04:57,071 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-01 17:04:57,071 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-01 17:04:57,071 - mms_extractor - INFO - 처리할 메시지 길이: 407 문자
2025-09-01 17:04:57,081 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-01 17:04:57,098 - mms_extractor - INFO - 분할된 문장 수: 7개
2025-09-01 17:04:57,099 - mms_extractor - INFO - 필터링된 문장들: [' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', ' 갤럭시 마지막 특가 와이드8 기기값 5만원 A36 기기값 10만원 S24 FE 기기값 20만원 제휴카드 사용 시 최대 72만원 추가할인', ' SK로 통신사 이동 시 쓰던 폰 그대로 이동시 상품권 20만원 인터넷 TV 가입 최대 70만원']...
2025-09-01 17:04:57,104 - mms_extractor - INFO - 전체 토큰 수: 154개
2025-09-01 17:04:57,104 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '을지로', '구매하9', '갤럭시', '할인', '인터넷', '가입', '아이폰', '을지로입구역', '하나은행', '명동', '수신거부']
2025-09-01 17:04:57,104 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['갤럭시', '아이폰', '구매하9', '명동', '하나은행', '을지로입구역']
2025-09-01 17:04:57,104 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-01 17:05:20,883 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (5043, 3)
2025-09-01 17:05:20,883 - mms_extractor - INFO - 퍼지 매칭 성공: 5043개 결과
2025-09-01 17:05:20,884 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'G6 프로', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'web호스팅(아사달)', 'sim': 0.4285714285714286}]
2025-09-01 17:05:20,884 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-01 17:05:21,008 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (5043, 3)
2025-09-01 17:05:21,008 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'G6 프로', 'sim': 0.32000000000000006}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'web호스팅(아사달)', 'sim': 0.32000000000000006}]
2025-09-01 17:05:21,008 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-01 17:05:21,011 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 67개
2025-09-01 17:05:21,015 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-09-01 17:05:21,016 - mms_extractor - INFO - 통합된 후보 아이템 수: 67개
2025-09-01 17:05:21,017 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:05:21,022 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (60, 2)
2025-09-01 17:05:21,022 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(KTF)갤럭시 S24 FE', 'item_id': ['A5V7']}, {'item_nm': '(LGU)갤럭시 S24 FE', 'item_id': ['A5V8']}, {'item_nm': '0카드', 'item_id': ['NN00000126']}]
2025-09-01 17:05:21,022 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 23.95초
2025-09-01 17:05:21,022 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:05:21,022 - mms_extractor - INFO - 매칭된 상품 정보: (60, 2)
2025-09-01 17:05:21,022 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-01 17:05:21,199 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-01 17:05:21,199 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-01 17:05:21,199 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 416 문자
2025-09-01 17:05:21,199 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-01 17:05:21,199 - mms_extractor - INFO - 후보 아이템 리스트 크기: 66개
2025-09-01 17:05:21,199 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:05:21,199 - mms_extractor - INFO - extra_item_pdf 크기: (60, 2)
2025-09-01 17:05:21,199 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-01 17:05:21,199 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(KTF)갤럭시 S24 FE', 'item_id': ['A5V7']}, {'item_nm': '(LGU)갤럭시 S24 FE', 'item_id': ['A5V8']}]
2025-09-01 17:05:21,199 - mms_extractor - INFO - RAG 모드: 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-01 17:05:21,199 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-01 17:05:21,200 - mms_extractor - INFO - 구성된 프롬프트 길이: 6582 문자
2025-09-01 17:05:21,200 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-01 17:05:21,200 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6582)
2025-09-01 17:05:21,200 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-01 17:05:21,200 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-01 17:05:28,292 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:05:28,295 - mms_extractor - INFO - LLM 응답 길이: 883 문자
2025-09-01 17:05:28,296 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT (을지로점)] 신용욱 단골고객님 9월은 SKT 직영점에서 혜택받9, 구매하9",
    "purpose": [
        "상품 가입 유도",
        "대리점/매장 방문 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 와이드8", "action": "구매"},
        {"name": "갤럭시 A36", "action": "구매"},
        {"name": "갤럭시 S24 FE", "action": "구매"},
        {"name": "아이폰17", "action": "구매"},
        {"name": "인터넷+TV", "action": "가입"}
    ],
    "channel": [
        {"type": "URL", "value": "https://naver.me/FTM8rdfj", "action": "추가 ...
2025-09-01 17:05:28,296 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-01 17:05:28,297 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-01 17:05:28,297 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-01 17:05:28,297 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT (을지로점)] 신용욱 단골고객님 9월은 SKT 직영점에서 혜택받9, 구매하9', 'purpose': ['상품 가입 유도', '대리점/매장 방문 유도', '혜택 안내'], 'product': [{'name': '갤럭시 와이드8', 'action': '구매'}, {'name': '갤럭시 A36', 'action': '구매'}, {'name': '갤럭시 S24 FE', 'action': '구매'}, {'name': '아이폰17', 'action': '구매'}, {'name': '인터넷+TV', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'https://naver.me/FTM8rdfj', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://naver.me/GipIR3Lg', 'action': '추가 정보'}, {'type': '전화번호', 'value': '0507-1399-6011', 'action': '문의'}, {'type': '대리점', 'value': '을지로입구역 5번출구 하나은행 명동사옥 맞은편', 'action': '방문'}, {'type': '전화번호', 'value': '080-801-0011', 'action': '수신 거부'}], 'pgm': ['기변유도및해지방어', '상품및부가서비스가입유도_단말']}
2025-09-01 17:05:28,298 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-01 17:05:28,298 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 와이드8', '갤럭시 A36', '갤럭시 S24 FE', '아이폰17', '인터넷+TV']
2025-09-01 17:05:28,584 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3173)
2025-09-01 17:05:28,585 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-01 17:05:28,585 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-01 17:05:29,183 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:05:29,543 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.25초
2025-09-01 17:05:29,816 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-01 17:05:29,817 - mms_extractor - INFO - ============================================================
2025-09-01 17:05:29,817 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-01 17:05:29,817 - mms_extractor - INFO - ============================================================
2025-09-01 17:05:29,817 - mms_extractor - INFO - 제목: [SKT (을지로점)] 신용욱 단골고객님 9월은 SKT 직영점에서 혜택받9, 구매하9
2025-09-01 17:05:29,817 - mms_extractor - INFO - 목적: ['상품 가입 유도', '대리점/매장 방문 유도', '혜택 안내']
2025-09-01 17:05:29,817 - mms_extractor - INFO - 상품 수: 2개
2025-09-01 17:05:29,817 - mms_extractor - INFO - 채널 수: 5개
2025-09-01 17:05:29,817 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-01 17:05:29,817 - mms_extractor - INFO - process_message 실행완료: 32.75초
2025-09-01 17:05:29,817 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-01 17:05:29,817 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-01 17:05:29,817 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 407자
2025-09-01 17:05:29,817 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x34e3476b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x359ac1970> root_client=<openai.OpenAI object at 0x359ab37a0> root_async_client=<openai.AsyncOpenAI object at 0x34e567470> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-01 17:05:29,817 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-01 17:05:29,817 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3352자
2025-09-01 17:05:55,336 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:05:55,338 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2864자
2025-09-01 17:05:55,338 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT 을지로점에서 9월 중 갤럭시 시리즈와 아이폰17에 대한 특별 할인 및 혜택을 제공하며, SK로 통신사 이동 시 추가 혜택을 안내하고 있다. 매장 방문을 유도하며, 아이폰17의 경우 온라인 사전 예약 링크를 제공하고 있다.

[식별된 가치 제안 목록]
1. 갤럭시 시리즈(와이드8, A36,...
2025-09-01 17:05:55,338 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-01 17:05:55,338 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 245자
2025-09-01 17:05:55,338 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-01 17:05:55,339 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 10, 엣지 수: 8
2025-09-01 17:05:55,339 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['을지로점:방문', '갤럭시:구매', '기기값할인:수령', '추가할인:수령', '통신사:이동', '상품권:수령', '인터넷TV:가입', '현금지원:수령', '아이폰17:사전예약', '아이폰17:개통']
2025-09-01 17:05:55,339 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('을지로점:방문', '갤럭시:구매'), ('을지로점:방문', '통신사:이동'), ('갤럭시:구매', '기기값할인:수령'), ('갤럭시:구매', '추가할인:수령'), ('통신사:이동', '상품권:수령'), ('통신사:이동', '인터넷TV:가입'), ('인터넷TV:가입', '현금지원:수령'), ('아이폰17:사전예약', '아이폰17:개통')]
2025-09-01 17:05:55,339 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-01 17:05:55,339 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56
2025-09-01 17:05:55,340 - utils - INFO - 📊 입력 그래프 - 노드 수: 10, 엣지 수: 8
2025-09-01 17:05:55,341 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-01 17:05:56,174 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56.png
2025-09-01 17:05:56,174 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56
2025-09-01 17:05:56,174 - mms_extractor - INFO - 🕒 DAG 처리 시간: 26.357초
2025-09-01 17:05:56,174 - mms_extractor - INFO - 📏 DAG 섹션 길이: 245자
2025-09-01 17:05:56,174 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (을지로점:방문) -[방문하여]-> (갤럭시:구매)
(갤럭시:구매) -[구매하면]-> (기기값할인:수령)
(갤럭시:구매) -[제휴카드사용하면]-> (추가할인:수령)

(을지로점:방문) -[방문하여]-> (통신사:이동)
(통신사:이동) -[이동하면]-> (상품권:수령)
(통신사:이동) -[이동하면]-> (인터넷TV:가입)
(인터넷TV:가입) -[가입하면]->...
2025-09-01 17:05:56,175 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-01 17:05:56,175 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-01 17:05:56,175 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 8자
2025-09-01 17:05:56,175 - __main__ - INFO - DAG 내용 미리보기: ['(갤럭시:구매) -[구매하면]-> (기기값할인:수령)', '(갤럭시:구매) -[제휴카드사용하면]-> (추가할인:수령)', '(아이폰17:사전예약) -[참여하면]-> (아이폰17:개통)', '(을지로점:방문) -[방문하여]-> (갤럭시:구매)', '(을지로점:방문) -[방문하여]-> (통신사:이동)', '(인터넷TV:가입) -[가입하면]-> (현금지원:수령)', '(통신사:이동) -[이동하면]-> (상품권:수령)', '(통신사:이동) -[이동하면]-> (인터넷TV:가입)']...
2025-09-01 17:05:56,175 - __main__ - INFO - 추출 완료: 59.105초
2025-09-01 17:05:56,175 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:05:56] "POST /extract HTTP/1.1" 200 -
2025-09-01 17:05:56,192 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:05:56] "GET /health HTTP/1.1" 200 -
2025-09-01 17:07:08,390 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:07:08] "GET /health HTTP/1.1" 200 -
2025-09-01 17:07:10,180 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:07:10] "GET /health HTTP/1.1" 200 -
2025-09-01 17:07:10,189 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 407자
2025-09-01 17:07:10,189 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-01 17:07:10,189 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-01 17:07:10,189 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜...
2025-09-01 17:07:10,189 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-01 17:07:10,189 - mms_extractor - INFO - ============================================================
2025-09-01 17:07:10,189 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-01 17:07:10,189 - mms_extractor - INFO - ============================================================
2025-09-01 17:07:10,189 - mms_extractor - INFO - 메시지 내용: [Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜택받9, 구매하9

【갤럭시 마지막 특가】
① 와이드8 ▶기기값 5만원
② A36 ▶기기값 10만원
③ S24 FE ▶기기값 20만원
☞ 제휴카드 사용 시 최대 72만원 추가할인

【SK로 통신사 이동 시】
① 쓰던 폰 그대로 이동시 상품권 20만원
② 인터넷+TV 가...
2025-09-01 17:07:10,189 - mms_extractor - INFO - 메시지 길이: 407 문자
2025-09-01 17:07:10,189 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-01 17:07:10,189 - mms_extractor - INFO - 데이터 소스: local
2025-09-01 17:07:10,189 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-01 17:07:10,190 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-01 17:07:10,190 - mms_extractor - INFO - LLM 모델: ax
2025-09-01 17:07:10,190 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-01 17:07:10,190 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-01 17:07:10,190 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-01 17:07:10,190 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-01 17:07:10,190 - mms_extractor - INFO - 처리할 메시지 길이: 407 문자
2025-09-01 17:07:10,202 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-01 17:07:10,211 - mms_extractor - INFO - 분할된 문장 수: 7개
2025-09-01 17:07:10,211 - mms_extractor - INFO - 필터링된 문장들: [' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', ' 갤럭시 마지막 특가 와이드8 기기값 5만원 A36 기기값 10만원 S24 FE 기기값 20만원 제휴카드 사용 시 최대 72만원 추가할인', ' SK로 통신사 이동 시 쓰던 폰 그대로 이동시 상품권 20만원 인터넷 TV 가입 최대 70만원']...
2025-09-01 17:07:10,217 - mms_extractor - INFO - 전체 토큰 수: 154개
2025-09-01 17:07:10,217 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '을지로', '구매하9', '갤럭시', '할인', '인터넷', '가입', '아이폰', '을지로입구역', '하나은행', '명동', '수신거부']
2025-09-01 17:07:10,217 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['갤럭시', '아이폰', '구매하9', '명동', '하나은행', '을지로입구역']
2025-09-01 17:07:10,217 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-01 17:07:10,829 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (5043, 3)
2025-09-01 17:07:10,829 - mms_extractor - INFO - 퍼지 매칭 성공: 5043개 결과
2025-09-01 17:07:10,830 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'G6 프로', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'web호스팅(아사달)', 'sim': 0.4285714285714286}]
2025-09-01 17:07:10,830 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-01 17:07:10,951 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (5043, 3)
2025-09-01 17:07:10,952 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'G6 프로', 'sim': 0.32000000000000006}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'web호스팅(아사달)', 'sim': 0.32000000000000006}]
2025-09-01 17:07:10,952 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-01 17:07:10,955 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 67개
2025-09-01 17:07:10,958 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-09-01 17:07:10,959 - mms_extractor - INFO - 통합된 후보 아이템 수: 67개
2025-09-01 17:07:10,960 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:07:10,964 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (60, 2)
2025-09-01 17:07:10,965 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(KTF)갤럭시 S24 FE', 'item_id': ['A5V7']}, {'item_nm': '(LGU)갤럭시 S24 FE', 'item_id': ['A5V8']}, {'item_nm': '0카드', 'item_id': ['NN00000126']}]
2025-09-01 17:07:10,965 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.78초
2025-09-01 17:07:10,965 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:07:10,966 - mms_extractor - INFO - 매칭된 상품 정보: (60, 2)
2025-09-01 17:07:10,966 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-01 17:07:11,016 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-01 17:07:11,016 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-01 17:07:11,016 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 416 문자
2025-09-01 17:07:11,016 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-01 17:07:11,016 - mms_extractor - INFO - 후보 아이템 리스트 크기: 66개
2025-09-01 17:07:11,016 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:07:11,016 - mms_extractor - INFO - extra_item_pdf 크기: (60, 2)
2025-09-01 17:07:11,017 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-01 17:07:11,017 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(KTF)갤럭시 S24 FE', 'item_id': ['A5V7']}, {'item_nm': '(LGU)갤럭시 S24 FE', 'item_id': ['A5V8']}]
2025-09-01 17:07:11,017 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-01 17:07:11,017 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-01 17:07:11,017 - mms_extractor - INFO - 구성된 프롬프트 길이: 6977 문자
2025-09-01 17:07:11,017 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-01 17:07:11,017 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6977)
2025-09-01 17:07:11,017 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-01 17:07:11,017 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-01 17:07:18,163 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:07:18,169 - mms_extractor - INFO - LLM 응답 길이: 886 문자
2025-09-01 17:07:18,170 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT (을지로점)] 신용욱 단골고객님 9월은 SKT 직영점에서 혜택받9, 구매하9",
    "purpose": [
        "상품 가입 유도",
        "대리점/매장 방문 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 와이드8", "action": "구매"},
        {"name": "갤럭시 A36 5G", "action": "구매"},
        {"name": "갤럭시 S24 FE", "action": "구매"},
        {"name": "아이폰17", "action": "구매"},
        {"name": "인터넷+TV", "action": "가입"}
    ],
    "channel": [
        {"type": "URL", "value": "https://naver.me/FTM8rdfj", "action": "...
2025-09-01 17:07:18,170 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-01 17:07:18,172 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-01 17:07:18,173 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-01 17:07:18,173 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT (을지로점)] 신용욱 단골고객님 9월은 SKT 직영점에서 혜택받9, 구매하9', 'purpose': ['상품 가입 유도', '대리점/매장 방문 유도', '혜택 안내'], 'product': [{'name': '갤럭시 와이드8', 'action': '구매'}, {'name': '갤럭시 A36 5G', 'action': '구매'}, {'name': '갤럭시 S24 FE', 'action': '구매'}, {'name': '아이폰17', 'action': '구매'}, {'name': '인터넷+TV', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'https://naver.me/FTM8rdfj', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://naver.me/GipIR3Lg', 'action': '추가 정보'}, {'type': '전화번호', 'value': '0507-1399-6011', 'action': '문의'}, {'type': '대리점', 'value': '을지로입구역 5번출구 하나은행 명동사옥 맞은편', 'action': '방문'}, {'type': '전화번호', 'value': '080-801-0011', 'action': '수신 거부'}], 'pgm': ['기변유도및해지방어', '상품및부가서비스가입유도_단말']}
2025-09-01 17:07:18,173 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-01 17:07:18,173 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 와이드8', '갤럭시 A36 5G', '갤럭시 S24 FE', '아이폰17', '인터넷+TV']
2025-09-01 17:07:18,461 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3173)
2025-09-01 17:07:18,462 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-01 17:07:18,462 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-01 17:07:19,111 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:07:19,481 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.31초
2025-09-01 17:07:19,721 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-01 17:07:19,721 - mms_extractor - INFO - ============================================================
2025-09-01 17:07:19,721 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-01 17:07:19,721 - mms_extractor - INFO - ============================================================
2025-09-01 17:07:19,722 - mms_extractor - INFO - 제목: [SKT (을지로점)] 신용욱 단골고객님 9월은 SKT 직영점에서 혜택받9, 구매하9
2025-09-01 17:07:19,722 - mms_extractor - INFO - 목적: ['상품 가입 유도', '대리점/매장 방문 유도', '혜택 안내']
2025-09-01 17:07:19,722 - mms_extractor - INFO - 상품 수: 2개
2025-09-01 17:07:19,722 - mms_extractor - INFO - 채널 수: 5개
2025-09-01 17:07:19,722 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-01 17:07:19,722 - mms_extractor - INFO - process_message 실행완료: 9.53초
2025-09-01 17:07:19,722 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-01 17:07:19,722 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-01 17:07:19,722 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 407자
2025-09-01 17:07:19,722 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x34e3476b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x359ac1970> root_client=<openai.OpenAI object at 0x359ab37a0> root_async_client=<openai.AsyncOpenAI object at 0x34e567470> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-01 17:07:19,722 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-01 17:07:19,722 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3352자
2025-09-01 17:07:44,535 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:07:44,537 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2797자
2025-09-01 17:07:44,538 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT 을지로점에서 9월 중 갤럭시 시리즈와 아이폰17에 대한 특별 할인 및 혜택을 제공하며, SK로 통신사 이동 시 추가 혜택을 안내함. 매장 방문을 유도하고, 아이폰17의 경우 온라인 사전예약을 통해 바로 개통 가능하도록 안내함.

[식별된 가치 제안 목록]
- 갤럭시 시리즈(와이드8, A3...
2025-09-01 17:07:44,538 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-01 17:07:44,538 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 222자
2025-09-01 17:07:44,539 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-01 17:07:44,540 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 9, 엣지 수: 7
2025-09-01 17:07:44,540 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['을지로점:방문', '갤럭시:구매', '기기값할인:수령', '추가할인:수령', '통신사:이동', '상품권:수령', '현금지원:수령', '아이폰17:사전예약', '바로개통:수령']
2025-09-01 17:07:44,540 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('을지로점:방문', '갤럭시:구매'), ('을지로점:방문', '통신사:이동'), ('갤럭시:구매', '기기값할인:수령'), ('갤럭시:구매', '추가할인:수령'), ('통신사:이동', '상품권:수령'), ('통신사:이동', '현금지원:수령'), ('아이폰17:사전예약', '바로개통:수령')]
2025-09-01 17:07:44,540 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-01 17:07:44,540 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56
2025-09-01 17:07:44,541 - utils - INFO - 📊 입력 그래프 - 노드 수: 9, 엣지 수: 7
2025-09-01 17:07:44,542 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-01 17:07:44,793 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56.png
2025-09-01 17:07:44,793 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56
2025-09-01 17:07:44,794 - mms_extractor - INFO - 🕒 DAG 처리 시간: 25.072초
2025-09-01 17:07:44,794 - mms_extractor - INFO - 📏 DAG 섹션 길이: 222자
2025-09-01 17:07:44,794 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (을지로점:방문) -[방문하여]-> (갤럭시:구매)
(갤럭시:구매) -[구매하면]-> (기기값할인:수령)
(갤럭시:구매) -[구매시 제휴카드 사용]-> (추가할인:수령)

(을지로점:방문) -[방문하여]-> (통신사:이동)
(통신사:이동) -[이동시]-> (상품권:수령)
(통신사:이동) -[이동후 인터넷TV 가입]-> (현금지원:수령)

(아이폰17:사전예...
2025-09-01 17:07:44,794 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-01 17:07:44,794 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-01 17:07:44,794 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-01 17:07:44,794 - __main__ - INFO - DAG 내용 미리보기: ['(갤럭시:구매) -[구매시 제휴카드 사용]-> (추가할인:수령)', '(갤럭시:구매) -[구매하면]-> (기기값할인:수령)', '(아이폰17:사전예약) -[참여하면]-> (바로개통:수령)', '(을지로점:방문) -[방문하여]-> (갤럭시:구매)', '(을지로점:방문) -[방문하여]-> (통신사:이동)', '(통신사:이동) -[이동시]-> (상품권:수령)', '(통신사:이동) -[이동후 인터넷TV 가입]-> (현금지원:수령)']...
2025-09-01 17:07:44,794 - __main__ - INFO - 추출 완료: 34.605초
2025-09-01 17:07:44,794 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:07:44] "POST /extract HTTP/1.1" 200 -
2025-09-01 17:07:44,811 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:07:44] "GET /health HTTP/1.1" 200 -
2025-09-01 17:34:41,035 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-01 17:34:41,035 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-01 17:34:41,035 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-01 17:34:41,036 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-01 17:34:41,036 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-01 17:34:41,113 - mms_extractor - INFO - Using device: mps
2025-09-01 17:34:41,113 - mms_extractor - INFO - _initialize_device 실행완료: 0.07초
2025-09-01 17:34:41,113 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-01 17:34:41,113 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-01 17:34:41,114 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-01 17:34:41,114 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-01 17:34:41,114 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-01 17:34:48,417 - mms_extractor - INFO - Model loaded on mps
2025-09-01 17:34:48,417 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 7.30초
2025-09-01 17:34:48,959 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-01 17:34:48,960 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.54초
2025-09-01 17:34:48,960 - mms_extractor - INFO - ============================================================
2025-09-01 17:34:48,960 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-01 17:34:48,960 - mms_extractor - INFO - ============================================================
2025-09-01 17:34:48,960 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-01 17:34:48,960 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-01 17:34:48,960 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-01 17:34:48,960 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-01 17:34:48,960 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-01 17:34:49,073 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-01 17:34:49,073 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-01 17:34:49,082 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-01 17:34:49,086 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-01 17:34:49,087 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-01 17:34:49,090 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-01 17:34:49,090 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-01 17:34:49,091 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-01 17:34:49,091 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-01 17:34:49,091 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-01 17:34:49,091 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-01 17:34:49,091 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-01 17:34:49,098 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-01 17:34:49,100 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-01 17:34:49,100 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-01 17:34:49,402 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-01 17:34:49,404 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-01 17:34:49,404 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-01 17:34:49,404 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-01 17:34:49,404 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-01 17:34:49,405 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-01 17:34:49,405 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-01 17:34:49,405 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-01 17:34:49,405 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-01 17:34:49,412 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-01 17:34:49,415 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-01 17:34:49,415 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-01 17:34:49,468 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-01 17:34:49,469 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-01 17:34:49,469 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-01 17:34:49,479 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-01 17:34:49,479 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-01 17:34:49,698 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-01 17:34:49,698 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-01 17:34:49,698 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-01 17:34:50,197 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-01 17:34:50,197 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-01 17:34:50,197 - mms_extractor - INFO - ============================================================
2025-09-01 17:34:50,197 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-01 17:34:50,197 - mms_extractor - INFO - ============================================================
2025-09-01 17:34:50,197 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-01 17:34:50,197 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-01 17:34:50,197 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-01 17:34:50,197 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-01 17:34:50,197 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-01 17:34:50,204 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-01 17:34:50,211 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-01 17:34:50,215 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-01 17:34:50,215 - mms_extractor - INFO - _load_data 실행완료: 1.26초
2025-09-01 17:34:50,215 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-01 17:34:50,215 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-01 17:34:50,215 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-01 17:34:50,215 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-01 17:34:50,215 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-01 17:34:50,215 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-01 17:34:50,215 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-01 17:34:50,215 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-01 17:34:50,215 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-01 17:34:50,215 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-01 17:34:50,215 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-01 17:34:50,230 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.27.146:8000
2025-09-01 17:34:50,230 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-01 17:34:55,673 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:34:55] "GET /health HTTP/1.1" 200 -
2025-09-01 17:34:55,684 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 407자
2025-09-01 17:34:55,684 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-01 17:34:55,684 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-01 17:34:55,684 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜...
2025-09-01 17:34:55,684 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-01 17:34:55,685 - mms_extractor - INFO - ============================================================
2025-09-01 17:34:55,685 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-01 17:34:55,685 - mms_extractor - INFO - ============================================================
2025-09-01 17:34:55,685 - mms_extractor - INFO - 메시지 내용: [Web발신]
(광고)[SKT (을지로점)] 신용욱 단골고객님
9월은 SKT 직영점에서 혜택받9, 구매하9

【갤럭시 마지막 특가】
① 와이드8 ▶기기값 5만원
② A36 ▶기기값 10만원
③ S24 FE ▶기기값 20만원
☞ 제휴카드 사용 시 최대 72만원 추가할인

【SK로 통신사 이동 시】
① 쓰던 폰 그대로 이동시 상품권 20만원
② 인터넷+TV 가...
2025-09-01 17:34:55,685 - mms_extractor - INFO - 메시지 길이: 407 문자
2025-09-01 17:34:55,685 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-01 17:34:55,685 - mms_extractor - INFO - 데이터 소스: local
2025-09-01 17:34:55,685 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-01 17:34:55,685 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-01 17:34:55,685 - mms_extractor - INFO - LLM 모델: ax
2025-09-01 17:34:55,685 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-01 17:34:55,685 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-01 17:34:55,685 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-01 17:34:55,685 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-01 17:34:55,685 - mms_extractor - INFO - 처리할 메시지 길이: 407 문자
2025-09-01 17:34:55,693 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-01 17:34:56,279 - mms_extractor - INFO - 분할된 문장 수: 7개
2025-09-01 17:34:56,280 - mms_extractor - INFO - 필터링된 문장들: [' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', ' 갤럭시 마지막 특가 와이드8 기기값 5만원 A36 기기값 10만원 S24 FE 기기값 20만원 제휴카드 사용 시 최대 72만원 추가할인', ' SK로 통신사 이동 시 쓰던 폰 그대로 이동시 상품권 20만원 인터넷 TV 가입 최대 70만원']...
2025-09-01 17:34:56,284 - mms_extractor - INFO - 전체 토큰 수: 154개
2025-09-01 17:34:56,284 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '을지로', '구매하9', '갤럭시', '할인', '인터넷', '가입', '아이폰', '을지로입구역', '하나은행', '명동', '수신거부']
2025-09-01 17:34:56,284 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['아이폰', '구매하9', '갤럭시', '명동', '하나은행', '을지로입구역']
2025-09-01 17:34:56,284 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-01 17:35:07,620 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (5043, 3)
2025-09-01 17:35:07,620 - mms_extractor - INFO - 퍼지 매칭 성공: 5043개 결과
2025-09-01 17:35:07,628 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'G6 프로', 'sim': 0.4}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'web호스팅(아사달)', 'sim': 0.4285714285714286}]
2025-09-01 17:35:07,628 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-01 17:35:07,757 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (5043, 3)
2025-09-01 17:35:07,757 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'G6 프로', 'sim': 0.32000000000000006}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' Web발신 광고 SKT 을지로점 신용욱 단골고객님 은 SKT 직영점에서 혜택받9 구매하9', 'item_nm_alias': 'web호스팅(아사달)', 'sim': 0.32000000000000006}]
2025-09-01 17:35:07,758 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-01 17:35:07,760 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 67개
2025-09-01 17:35:07,766 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-09-01 17:35:07,767 - mms_extractor - INFO - 통합된 후보 아이템 수: 67개
2025-09-01 17:35:07,768 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:35:07,773 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (60, 2)
2025-09-01 17:35:07,773 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(KTF)갤럭시 S24 FE', 'item_id': ['A5V7']}, {'item_nm': '(LGU)갤럭시 S24 FE', 'item_id': ['A5V8']}, {'item_nm': '0카드', 'item_id': ['NN00000126']}]
2025-09-01 17:35:07,774 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 12.09초
2025-09-01 17:35:07,774 - mms_extractor - INFO - 추출된 후보 엔티티: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:35:07,774 - mms_extractor - INFO - 매칭된 상품 정보: (60, 2)
2025-09-01 17:35:07,774 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-01 17:35:08,034 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-01 17:35:08,034 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-01 17:35:08,034 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 416 문자
2025-09-01 17:35:08,034 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-01 17:35:08,034 - mms_extractor - INFO - 후보 아이템 리스트 크기: 66개
2025-09-01 17:35:08,034 - mms_extractor - INFO - 후보 아이템 리스트: ['갤럭시 와이드8', '갤럭시 S24 FE', '갤럭시 A24', '갤럭시 S22', '갤럭시 A6', '갤럭시 와이드5', '갤럭시 A34', '갤럭시 와이드7', '갤럭시 A32', '갤럭시 A31', '갤럭시 A30', '갤럭시 S22+', '갤럭시 A12', '갤럭시 A10e', '갤럭시 S23 FE', '갤럭시 S20 FE', '갤럭시 A40', '갤럭시 S10e', '갤럭시A', '갤럭시A3', '갤럭시A7', '갤럭시S', '갤럭시S2', '갤럭시S4', '동원', '마제', '0카드', 'A10', 'S20', '갤럭시 A21S', '갤럭시 S20 FE 2022', '갤럭시 S10', '갤럭시 A33', '갤럭시 A80', '갤럭시 S21', '갤럭시 S21+', '갤럭시 A53', '갤럭시 S25', '갤럭시 S25+', '갤럭시 A16', '갤럭시 A23', '갤럭시 A36 5G', '갤럭시 탭 S10 FE+', '갤럭시 탭 S4', '갤럭시 A8', '갤럭시 북S', '갤럭시 J4+', '갤럭시 지오', '갤럭시 탭 A7', '갤럭시 탭 S10 FE', '갤럭시 탭 S2', '갤럭시 탭 E', '구.인터넷', '갤럭시 A25', '갤럭시 A15', '(LGU)갤럭시 S24 FE', '(KTF)갤럭시 S24 FE', '갤럭시 A5(2017)', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 탭 A 10.1', '갤럭시 TAB S4', '갤럭시 Tab S4', '갤럭시 TAB S10 FE+', '갤럭시 TAB S10 FE', '갤럭시 노트20']
2025-09-01 17:35:08,034 - mms_extractor - INFO - extra_item_pdf 크기: (60, 2)
2025-09-01 17:35:08,034 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-01 17:35:08,034 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(KTF)갤럭시 S24 FE', 'item_id': ['A5V7']}, {'item_nm': '(LGU)갤럭시 S24 FE', 'item_id': ['A5V8']}]
2025-09-01 17:35:08,034 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-01 17:35:08,034 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-01 17:35:08,035 - mms_extractor - INFO - 구성된 프롬프트 길이: 6977 문자
2025-09-01 17:35:08,035 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-01 17:35:08,035 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6977)
2025-09-01 17:35:08,035 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-01 17:35:08,035 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-01 17:35:15,348 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:35:15,362 - mms_extractor - INFO - LLM 응답 길이: 863 문자
2025-09-01 17:35:15,362 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "9월은 SKT 직영점에서 혜택받9, 구매하9",
    "purpose": [
        "상품 가입 유도",
        "대리점/매장 방문 유도",
        "혜택 안내"
    ],
    "product": [
        {"name": "갤럭시 와이드8", "action": "구매"},
        {"name": "갤럭시 A36 5G", "action": "구매"},
        {"name": "갤럭시 S24 FE", "action": "구매"},
        {"name": "아이폰17", "action": "구매"},
        {"name": "인터넷+TV", "action": "가입"}
    ],
    "channel": [
        {"type": "URL", "value": "https://naver.me/FTM8rdfj", "action": "추가 정보"},
        {"type...
2025-09-01 17:35:15,362 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-01 17:35:15,363 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-01 17:35:15,363 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-01 17:35:15,363 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '9월은 SKT 직영점에서 혜택받9, 구매하9', 'purpose': ['상품 가입 유도', '대리점/매장 방문 유도', '혜택 안내'], 'product': [{'name': '갤럭시 와이드8', 'action': '구매'}, {'name': '갤럭시 A36 5G', 'action': '구매'}, {'name': '갤럭시 S24 FE', 'action': '구매'}, {'name': '아이폰17', 'action': '구매'}, {'name': '인터넷+TV', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'https://naver.me/FTM8rdfj', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://naver.me/GipIR3Lg', 'action': '추가 정보'}, {'type': '전화번호', 'value': '0507-1399-6011', 'action': '문의'}, {'type': '대리점', 'value': '을지로입구역 5번출구 하나은행 명동사옥 맞은편', 'action': '방문'}, {'type': '전화번호', 'value': '080-801-0011', 'action': '수신 거부'}], 'pgm': ['기변유도및해지방어', '상품및부가서비스가입유도_단말']}
2025-09-01 17:35:15,363 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-01 17:35:15,363 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 와이드8', '갤럭시 A36 5G', '갤럭시 S24 FE', '아이폰17', '인터넷+TV']
2025-09-01 17:35:15,648 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3173)
2025-09-01 17:35:15,648 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-01 17:35:15,648 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-01 17:35:16,153 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:35:16,517 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.15초
2025-09-01 17:35:16,783 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-01 17:35:16,783 - mms_extractor - INFO - ============================================================
2025-09-01 17:35:16,783 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-01 17:35:16,783 - mms_extractor - INFO - ============================================================
2025-09-01 17:35:16,783 - mms_extractor - INFO - 제목: 9월은 SKT 직영점에서 혜택받9, 구매하9
2025-09-01 17:35:16,783 - mms_extractor - INFO - 목적: ['상품 가입 유도', '대리점/매장 방문 유도', '혜택 안내']
2025-09-01 17:35:16,783 - mms_extractor - INFO - 상품 수: 3개
2025-09-01 17:35:16,783 - mms_extractor - INFO - 채널 수: 5개
2025-09-01 17:35:16,783 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-01 17:35:16,784 - mms_extractor - INFO - process_message 실행완료: 21.10초
2025-09-01 17:35:16,784 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-01 17:35:16,784 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-01 17:35:16,784 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 407자
2025-09-01 17:35:16,784 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x348dbdac0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x348dbdca0> root_client=<openai.OpenAI object at 0x348dbd7c0> root_async_client=<openai.AsyncOpenAI object at 0x348dbdaf0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-01 17:35:16,784 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-01 17:35:16,784 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3352자
2025-09-01 17:35:41,342 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 17:35:41,344 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2797자
2025-09-01 17:35:41,344 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT 을지로점에서 9월 중 갤럭시 시리즈와 아이폰17에 대한 특별 할인 및 혜택을 제공하며, SK로 통신사 이동 시 추가 혜택을 안내함. 매장 방문을 유도하고, 아이폰17의 경우 온라인 사전예약을 통해 바로 개통 가능하도록 안내함.

[식별된 가치 제안 목록]
- 갤럭시 시리즈(와이드8, A3...
2025-09-01 17:35:41,345 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-01 17:35:41,345 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 222자
2025-09-01 17:35:41,346 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-01 17:35:41,347 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 9, 엣지 수: 7
2025-09-01 17:35:41,347 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['을지로점:방문', '갤럭시:구매', '기기값할인:수령', '추가할인:수령', '통신사:이동', '상품권:수령', '현금지원:수령', '아이폰17:사전예약', '바로개통:수령']
2025-09-01 17:35:41,347 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('을지로점:방문', '갤럭시:구매'), ('을지로점:방문', '통신사:이동'), ('갤럭시:구매', '기기값할인:수령'), ('갤럭시:구매', '추가할인:수령'), ('통신사:이동', '상품권:수령'), ('통신사:이동', '현금지원:수령'), ('아이폰17:사전예약', '바로개통:수령')]
2025-09-01 17:35:41,348 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-01 17:35:41,348 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56
2025-09-01 17:35:41,348 - utils - INFO - 📊 입력 그래프 - 노드 수: 9, 엣지 수: 7
2025-09-01 17:35:41,350 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-01 17:35:41,956 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56.png
2025-09-01 17:35:41,957 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_0556674bb026ed88220f417cbe0321ededec466cc5252a747385df0366ad6a56
2025-09-01 17:35:41,957 - mms_extractor - INFO - 🕒 DAG 처리 시간: 25.173초
2025-09-01 17:35:41,957 - mms_extractor - INFO - 📏 DAG 섹션 길이: 222자
2025-09-01 17:35:41,957 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (을지로점:방문) -[방문하여]-> (갤럭시:구매)
(갤럭시:구매) -[구매하면]-> (기기값할인:수령)
(갤럭시:구매) -[구매시 제휴카드 사용]-> (추가할인:수령)

(을지로점:방문) -[방문하여]-> (통신사:이동)
(통신사:이동) -[이동시]-> (상품권:수령)
(통신사:이동) -[이동후 인터넷TV 가입]-> (현금지원:수령)

(아이폰17:사전예...
2025-09-01 17:35:41,957 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-01 17:35:41,957 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-01 17:35:41,957 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-01 17:35:41,957 - __main__ - INFO - DAG 내용 미리보기: ['(갤럭시:구매) -[구매시 제휴카드 사용]-> (추가할인:수령)', '(갤럭시:구매) -[구매하면]-> (기기값할인:수령)', '(아이폰17:사전예약) -[참여하면]-> (바로개통:수령)', '(을지로점:방문) -[방문하여]-> (갤럭시:구매)', '(을지로점:방문) -[방문하여]-> (통신사:이동)', '(통신사:이동) -[이동시]-> (상품권:수령)', '(통신사:이동) -[이동후 인터넷TV 가입]-> (현금지원:수령)']...
2025-09-01 17:35:41,957 - __main__ - INFO - 추출 완료: 46.273초
2025-09-01 17:35:41,958 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:35:41] "POST /extract HTTP/1.1" 200 -
2025-09-01 17:35:41,986 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 17:35:41] "GET /health HTTP/1.1" 200 -
2025-09-01 18:41:51,754 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 18:41:51] "GET /health HTTP/1.1" 200 -
2025-09-01 18:41:51,877 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 18:41:51] "GET /health HTTP/1.1" 200 -
2025-09-01 18:41:51,882 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 643자
2025-09-01 18:41:51,882 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-01 18:41:51,883 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-01 18:41:51,883 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[SKT] 넷플릭스+웨이브 월...
2025-09-01 18:41:51,883 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-01 18:41:51,883 - mms_extractor - INFO - ============================================================
2025-09-01 18:41:51,883 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-01 18:41:51,883 - mms_extractor - INFO - ============================================================
2025-09-01 18:41:51,883 - mms_extractor - INFO - 메시지 내용: [T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니,...
2025-09-01 18:41:51,883 - mms_extractor - INFO - 메시지 길이: 643 문자
2025-09-01 18:41:51,883 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-01 18:41:51,883 - mms_extractor - INFO - 데이터 소스: local
2025-09-01 18:41:51,883 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-01 18:41:51,883 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-01 18:41:51,883 - mms_extractor - INFO - LLM 모델: ax
2025-09-01 18:41:51,883 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-01 18:41:51,883 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-01 18:41:51,883 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-01 18:41:51,883 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-01 18:41:51,883 - mms_extractor - INFO - 처리할 메시지 길이: 643 문자
2025-09-01 18:41:51,892 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-01 18:41:51,908 - mms_extractor - INFO - 분할된 문장 수: 14개
2025-09-01 18:41:51,909 - mms_extractor - INFO - 필터링된 문장들: [' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', '넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ']...
2025-09-01 18:41:51,914 - mms_extractor - INFO - 전체 토큰 수: 242개
2025-09-01 18:41:51,914 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '웨이브', '광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-01 18:41:51,914 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['넷플릭스', '웨이브', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드']
2025-09-01 18:41:51,914 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-01 18:42:11,904 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (8416, 3)
2025-09-01 18:42:11,904 - mms_extractor - INFO - 퍼지 매칭 성공: 8416개 결과
2025-09-01 18:42:11,905 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': 'test', 'sim': 0.5714285714285714}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-01 18:42:11,905 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-01 18:42:12,109 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (8416, 3)
2025-09-01 18:42:12,109 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-01 18:42:12,109 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-01 18:42:12,112 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 160개
2025-09-01 18:42:12,117 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-01 18:42:12,117 - mms_extractor - INFO - 통합된 후보 아이템 수: 168개
2025-09-01 18:42:12,119 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-01 18:42:12,124 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-01 18:42:12,124 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-01 18:42:12,125 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 20.24초
2025-09-01 18:42:12,125 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-01 18:42:12,125 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-01 18:42:12,125 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-01 18:42:12,296 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-01 18:42:12,296 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-01 18:42:12,296 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-01 18:42:12,296 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-01 18:42:12,296 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-01 18:42:12,296 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-01 18:42:12,296 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-01 18:42:12,296 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-01 18:42:12,297 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-01 18:42:12,297 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-01 18:42:12,297 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-01 18:42:12,297 - mms_extractor - INFO - 구성된 프롬프트 길이: 8454 문자
2025-09-01 18:42:12,297 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-01 18:42:12,297 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 8454)
2025-09-01 18:42:12,297 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-01 18:42:12,297 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-01 18:42:18,433 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 18:42:18,438 - mms_extractor - INFO - LLM 응답 길이: 852 문자
2025-09-01 18:42:18,438 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[T 우주] 넷플릭스와 웨이브를 월 9,900원에!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "우주패스 Netflix",
            "action": "가입"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mm...
2025-09-01 18:42:18,438 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-01 18:42:18,439 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-01 18:42:18,440 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-01 18:42:18,440 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[T 우주] 넷플릭스와 웨이브를 월 9,900원에!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': '우주패스 Netflix', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-01 18:42:18,440 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-01 18:42:18,440 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', '우주패스 Netflix']
2025-09-01 18:42:18,897 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 4953)
2025-09-01 18:42:18,897 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-01 18:42:18,897 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-01 18:42:19,672 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 18:42:20,042 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.60초
2025-09-01 18:42:20,050 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-01 18:42:20,050 - mms_extractor - INFO - ============================================================
2025-09-01 18:42:20,050 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-01 18:42:20,050 - mms_extractor - INFO - ============================================================
2025-09-01 18:42:20,050 - mms_extractor - INFO - 제목: [T 우주] 넷플릭스와 웨이브를 월 9,900원에!
2025-09-01 18:42:20,050 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-01 18:42:20,050 - mms_extractor - INFO - 상품 수: 5개
2025-09-01 18:42:20,050 - mms_extractor - INFO - 채널 수: 3개
2025-09-01 18:42:20,050 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-01 18:42:20,050 - mms_extractor - INFO - process_message 실행완료: 28.17초
2025-09-01 18:42:20,050 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-01 18:42:20,050 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-01 18:42:20,050 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 643자
2025-09-01 18:42:20,050 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x348dbdac0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x348dbdca0> root_client=<openai.OpenAI object at 0x348dbd7c0> root_async_client=<openai.AsyncOpenAI object at 0x348dbdaf0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-01 18:42:20,050 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-01 18:42:20,050 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3588자
2025-09-01 18:42:39,160 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-01 18:42:39,163 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2140자
2025-09-01 18:42:39,163 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT의 T 우주 구독 서비스에서 넷플릭스와 웨이브(Wavve)를 월 9,900원에 2개월간 이용할 수 있는 특별 프로모션을 광고하고 있습니다. 이 프로모션은 8월 31일까지 진행되며, 이후 정상가로 자동 전환됩니다. 고객은 프로모션 쿠폰을 다운로드하여 혜택을 받을 수 있으며, 추가 요금으로 넷플...
2025-09-01 18:42:39,164 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-01 18:42:39,164 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 337자
2025-09-01 18:42:39,164 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-01 18:42:39,164 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-09-01 18:42:39,165 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '넷플릭스+웨이브:이용', '월 9,900원:지출', '2개월 후:자동전환', '넷플릭스 스탠다드/프리미엄:업그레이드', 'Wavve 콘텐츠 팩:제공']
2025-09-01 18:42:39,165 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '프로모션 쿠폰:다운로드'), ('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스+웨이브:이용'), ('우주패스 Netflix:가입', '2개월 후:자동전환'), ('우주패스 Netflix:가입', '넷플릭스 스탠다드/프리미엄:업그레이드'), ('우주패스 Netflix:가입', 'Wavve 콘텐츠 팩:제공'), ('넷플릭스+웨이브:이용', '월 9,900원:지출')]
2025-09-01 18:42:39,165 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-01 18:42:39,165 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_b8c9f21ee85971cfb0849f866aa0737901157df03d21aea1ea4257e6fc5a5a62
2025-09-01 18:42:39,165 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-09-01 18:42:39,167 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-01 18:42:39,442 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_b8c9f21ee85971cfb0849f866aa0737901157df03d21aea1ea4257e6fc5a5a62.png
2025-09-01 18:42:39,442 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_b8c9f21ee85971cfb0849f866aa0737901157df03d21aea1ea4257e6fc5a5a62
2025-09-01 18:42:39,442 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.392초
2025-09-01 18:42:39,442 - mms_extractor - INFO - 📏 DAG 섹션 길이: 337자
2025-09-01 18:42:39,442 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)
(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브:이용)
(넷플릭스+웨이브:이용) -[이용하면]-> (월 9,900원:지출)
(우주패스 Netflix:가입) -[가입후]-> (2개월 후:자동전환) -...
2025-09-01 18:42:39,442 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-01 18:42:39,442 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-01 18:42:39,442 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-01 18:42:39,442 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)', '(넷플릭스+웨이브:이용) -[이용하면]-> (월 9,900원:지출)', '(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:제공)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브:이용)', '(우주패스 Netflix:가입) -[가입후]-> (2개월 후:자동전환) -[자동전환되면]-> (정상가:지출)', '(우주패스 Netflix:가입) -[가입후]-> (넷플릭스 스탠다드/프리미엄:업그레이드) -[업그레이드하면]-> (추가요금:지출)', '(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)']...
2025-09-01 18:42:39,442 - __main__ - INFO - 추출 완료: 47.560초
2025-09-01 18:42:39,443 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 18:42:39] "POST /extract HTTP/1.1" 200 -
2025-09-01 18:42:39,460 - werkzeug - INFO - 127.0.0.1 - - [01/Sep/2025 18:42:39] "GET /health HTTP/1.1" 200 -
2025-09-02 13:52:26,309 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 13:52:26] "GET /health HTTP/1.1" 200 -
2025-09-02 13:52:28,097 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 13:52:28] "GET /health HTTP/1.1" 200 -
2025-09-02 13:52:33,999 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 13:52:33] "GET /health HTTP/1.1" 200 -
2025-09-02 13:52:35,882 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 13:52:35] "GET /health HTTP/1.1" 200 -
2025-09-02 13:53:34,116 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 13:53:34] "GET /health HTTP/1.1" 200 -
2025-09-02 13:53:34,681 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 13:53:34] "GET /health HTTP/1.1" 200 -
2025-09-02 14:56:58,192 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 14:56:58] "GET /health HTTP/1.1" 200 -
2025-09-02 14:56:58,221 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 14:56:58] "GET /health HTTP/1.1" 200 -
2025-09-02 14:57:01,598 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 14:57:01] "GET /health HTTP/1.1" 200 -
2025-09-02 14:57:01,609 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 328자
2025-09-02 14:57:01,609 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-02 14:57:01,609 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-02 14:57:01,609 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 ...
2025-09-02 14:57:01,609 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-02 14:57:01,609 - mms_extractor - INFO - ============================================================
2025-09-02 14:57:01,609 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-02 14:57:01,609 - mms_extractor - INFO - ============================================================
2025-09-02 14:57:01,609 - mms_extractor - INFO - 메시지 내용: [SK텔레콤] 갤럭시 S24 사전예약
(광고) 갤럭시 S24 시리즈 사전예약 시작!

🌟 사전예약 혜택
- 갤럭시 S24 Ultra: 최대 30만원 할인
- 갤럭시 S24+: 최대 25만원 할인  
- 갤럭시 S24: 최대 20만원 할인

🎁 추가 혜택
- 갤럭시 워치6 50% 할인
- 무선충전기 무료 증정
- 케어플러스 6개월 무료

📅 사전예약: 202...
2025-09-02 14:57:01,609 - mms_extractor - INFO - 메시지 길이: 328 문자
2025-09-02 14:57:01,609 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-02 14:57:01,610 - mms_extractor - INFO - 데이터 소스: local
2025-09-02 14:57:01,610 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-02 14:57:01,610 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-02 14:57:01,610 - mms_extractor - INFO - LLM 모델: ax
2025-09-02 14:57:01,610 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-02 14:57:01,610 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-02 14:57:01,610 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-02 14:57:01,610 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-02 14:57:01,610 - mms_extractor - INFO - 처리할 메시지 길이: 328 문자
2025-09-02 14:57:01,624 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-02 14:57:01,639 - mms_extractor - INFO - 분할된 문장 수: 6개
2025-09-02 14:57:01,640 - mms_extractor - INFO - 필터링된 문장들: [' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', '🌟 사전예약 혜택 - 갤럭시 S24 Ultra 최대 30만원 할인 - 갤럭시 S24 최대 25만원 할인 - 갤럭시 S24 최대 20만원 할인', '🎁 추가 혜택 - 갤럭시 워치6 50 할인 - 무선충전기 무료 증정 - 케어플러스 무료']...
2025-09-02 14:57:01,642 - mms_extractor - INFO - 전체 토큰 수: 106개
2025-09-02 14:57:01,642 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '갤럭시', '광고', '갤럭시', '-', '갤럭시', '할인', '-', '갤럭시', '할인', '-', '갤럭시', '할인', '-', '갤럭시', '워치6', '할인', '-', '충전기', '-', '매장', '수신거부']
2025-09-02 14:57:01,642 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['충전기', '워치6', '갤럭시']
2025-09-02 14:57:01,642 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-02 14:57:23,839 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (8009, 3)
2025-09-02 14:57:23,839 - mms_extractor - INFO - 퍼지 매칭 성공: 8009개 결과
2025-09-02 14:57:23,841 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 S20 FE', 'sim': 0.6}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'KT_갤럭시 A32', 'sim': 0.5}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 퀀텀5', 'sim': 0.6}]
2025-09-02 14:57:23,841 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-02 14:57:24,040 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (8009, 3)
2025-09-02 14:57:24,040 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 S20 FE', 'sim': 0.6266666666666666}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': 'KT_갤럭시 A32', 'sim': 0.5466666666666666}, {'sent': ' SK텔레콤 갤럭시 S24 사전예약 광고 갤럭시 S24 시리즈 사전예약 시작 ', 'item_nm_alias': '갤럭시 퀀텀5', 'sim': 0.5571428571428572}]
2025-09-02 14:57:24,040 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-02 14:57:24,044 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 140개
2025-09-02 14:57:24,049 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-09-02 14:57:24,049 - mms_extractor - INFO - 통합된 후보 아이템 수: 140개
2025-09-02 14:57:24,050 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['ultra', 'Ultra', '갤럭시 S25+', '갤럭시 A25', '갤럭시 S22', '갤럭시 S25', '갤럭시 S22+', '갤럭시 A30', '갤럭시 S25 ultra', '갤럭시 S25 ULTRA', '갤럭시 S25 Ultra', '갤럭시 A40', '갤럭시 A24', '갤럭시 S24 ultra_256G', '갤럭시 S24 Ultra_256G', '갤럭시 S24 ULTRA_256G', '갤럭시S', '갤럭시A', '갤럭시S2', '갤럭시 워치 ultra', '갤럭시S4', '갤럭시 워치 Ultra', '갤럭시A5', '갤럭시S5', '갤럭시S3', '갤럭시 S24 ULTRA_1T', '갤럭시 S24 Ultra_1T', 'S20', 'R300', 'L2', 'I8', 'D2', '갤럭시 S24 ultra_1T', '갤럭시 워치 ULTRA', '갤럭시A3', '갤럭시 S24 ULTRA_512G', '갤럭시 S24 Ultra_512G', '갤럭시 S24 ultra_512G', '갤럭시 TAB S4', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 Tab S4', '갤럭시 A32', '갤럭시 A34', '갤럭시 A33', '갤럭시 A15', '갤럭시 S10', '갤럭시 A53', '갤럭시 S21+', '갤럭시 A31', '갤럭시 A23', '상시20%할인', 'SK텔레콤(주)', '갤럭시 S21', '갤럭시 A80', '갤럭시 S24 FE', '상시 30% 할인', '갤럭시 북S', '갤럭시 J4+', '갤럭시 A6', '갤럭시 탭 S4', '갤럭시 탭 S2', '갤럭시 A8', '갤럭시 노트20 Ultra', '갤럭시 S24+_256G', 'CU 할인', '갤럭시 워치6 40mm', '갤럭시 S24_256G', 'T 탭 24', 'T 탭 18', '갤럭시 A12', '갤럭시 탭 S9 Ultra', '갤럭시 탭 S8 Ultra', '갤럭시 S22 ULTRA_256G', '갤럭시 S20 ULTRA_256G', '갤럭시 S20 Ultra_256G', '갤럭시 S23 ultra_256G', '갤럭시 S23 Ultra_256G', '갤럭시 S23 ULTRA_256G', '갤럭시 S22 ultra_256G', '갤럭시 S22 Ultra_256G', '갤럭시 S21 ultra_256G', '갤럭시 S21 Ultra_256G', '갤럭시 S21 ULTRA_256G', '갤럭시 S20 ultra_256G', '갤럭시 A5(2016)', '갤럭시 A5(2017)', '갤럭시 TAB S10+', '갤럭시 S24+_512G', '(KTF)갤럭시 S25 ultra', '(LGU)갤럭시 S25 ultra', '(LGU)갤럭시 S25 Ultra', '(KTF)갤럭시 S25 Ultra', '갤럭시S2 LTE', '갤럭시 TAB S6', '갤럭시S22 Ultra 클럽', '갤럭시 Tab S6', '갤럭시 Tab S8', '갤럭시 Tab S8+', '갤럭시 Tab S9', '갤럭시 Tab S9+', '갤럭시 tab S6', 'T 탭 9', '더 예약', '갤럭시 S23 ultra_512G', '갤럭시 노트20', '갤럭시 S21 ultra_512G', 'T LoL팩', 'Ultra 햅틱', 'ultra 햅틱', '갤럭시 A10e', '갤럭시 A21S', '갤럭시 S10e', '갤럭시 S21 Ultra_512G', '갤럭시 S22 Ultra_512G', '갤럭시 S25 ultra_512G', '갤럭시 S22 ultra_512G', '갤럭시 S23 Ultra_512G', '갤럭시 S24_512G', '갤럭시 S25 ULTRA_1T', '갤럭시 S25 Ultra_1T', '갤럭시 S25 Ultra_512G', '갤럭시 S25 ultra_1T', '일상플러스(무료)']
2025-09-02 14:57:24,056 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (90, 2)
2025-09-02 14:57:24,056 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(KTF)갤럭시 S25 울트라', 'item_id': ['A66Z', 'A66Z']}, {'item_nm': '(LGU)갤럭시 S25 울트라', 'item_id': ['A67A', 'A67A']}, {'item_nm': 'CU 할인', 'item_id': ['PR00000344']}]
2025-09-02 14:57:24,056 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 22.45초
2025-09-02 14:57:24,056 - mms_extractor - INFO - 추출된 후보 엔티티: ['ultra', 'Ultra', '갤럭시 S25+', '갤럭시 A25', '갤럭시 S22', '갤럭시 S25', '갤럭시 S22+', '갤럭시 A30', '갤럭시 S25 ultra', '갤럭시 S25 ULTRA', '갤럭시 S25 Ultra', '갤럭시 A40', '갤럭시 A24', '갤럭시 S24 ultra_256G', '갤럭시 S24 Ultra_256G', '갤럭시 S24 ULTRA_256G', '갤럭시S', '갤럭시A', '갤럭시S2', '갤럭시 워치 ultra', '갤럭시S4', '갤럭시 워치 Ultra', '갤럭시A5', '갤럭시S5', '갤럭시S3', '갤럭시 S24 ULTRA_1T', '갤럭시 S24 Ultra_1T', 'S20', 'R300', 'L2', 'I8', 'D2', '갤럭시 S24 ultra_1T', '갤럭시 워치 ULTRA', '갤럭시A3', '갤럭시 S24 ULTRA_512G', '갤럭시 S24 Ultra_512G', '갤럭시 S24 ultra_512G', '갤럭시 TAB S4', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 Tab S4', '갤럭시 A32', '갤럭시 A34', '갤럭시 A33', '갤럭시 A15', '갤럭시 S10', '갤럭시 A53', '갤럭시 S21+', '갤럭시 A31', '갤럭시 A23', '상시20%할인', 'SK텔레콤(주)', '갤럭시 S21', '갤럭시 A80', '갤럭시 S24 FE', '상시 30% 할인', '갤럭시 북S', '갤럭시 J4+', '갤럭시 A6', '갤럭시 탭 S4', '갤럭시 탭 S2', '갤럭시 A8', '갤럭시 노트20 Ultra', '갤럭시 S24+_256G', 'CU 할인', '갤럭시 워치6 40mm', '갤럭시 S24_256G', 'T 탭 24', 'T 탭 18', '갤럭시 A12', '갤럭시 탭 S9 Ultra', '갤럭시 탭 S8 Ultra', '갤럭시 S22 ULTRA_256G', '갤럭시 S20 ULTRA_256G', '갤럭시 S20 Ultra_256G', '갤럭시 S23 ultra_256G', '갤럭시 S23 Ultra_256G', '갤럭시 S23 ULTRA_256G', '갤럭시 S22 ultra_256G', '갤럭시 S22 Ultra_256G', '갤럭시 S21 ultra_256G', '갤럭시 S21 Ultra_256G', '갤럭시 S21 ULTRA_256G', '갤럭시 S20 ultra_256G', '갤럭시 A5(2016)', '갤럭시 A5(2017)', '갤럭시 TAB S10+', '갤럭시 S24+_512G', '(KTF)갤럭시 S25 ultra', '(LGU)갤럭시 S25 ultra', '(LGU)갤럭시 S25 Ultra', '(KTF)갤럭시 S25 Ultra', '갤럭시S2 LTE', '갤럭시 TAB S6', '갤럭시S22 Ultra 클럽', '갤럭시 Tab S6', '갤럭시 Tab S8', '갤럭시 Tab S8+', '갤럭시 Tab S9', '갤럭시 Tab S9+', '갤럭시 tab S6', 'T 탭 9', '더 예약', '갤럭시 S23 ultra_512G', '갤럭시 노트20', '갤럭시 S21 ultra_512G', 'T LoL팩', 'Ultra 햅틱', 'ultra 햅틱', '갤럭시 A10e', '갤럭시 A21S', '갤럭시 S10e', '갤럭시 S21 Ultra_512G', '갤럭시 S22 Ultra_512G', '갤럭시 S25 ultra_512G', '갤럭시 S22 ultra_512G', '갤럭시 S23 Ultra_512G', '갤럭시 S24_512G', '갤럭시 S25 ULTRA_1T', '갤럭시 S25 Ultra_1T', '갤럭시 S25 Ultra_512G', '갤럭시 S25 ultra_1T', '일상플러스(무료)']
2025-09-02 14:57:24,056 - mms_extractor - INFO - 매칭된 상품 정보: (90, 2)
2025-09-02 14:57:24,057 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-02 14:57:24,237 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-02 14:57:24,237 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-02 14:57:24,237 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 406 문자
2025-09-02 14:57:24,237 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-02 14:57:24,237 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-02 14:57:24,237 - mms_extractor - INFO - 후보 아이템 리스트: ['ultra', 'Ultra', '갤럭시 S25+', '갤럭시 A25', '갤럭시 S22', '갤럭시 S25', '갤럭시 S22+', '갤럭시 A30', '갤럭시 S25 ultra', '갤럭시 S25 ULTRA', '갤럭시 S25 Ultra', '갤럭시 A40', '갤럭시 A24', '갤럭시 S24 ultra_256G', '갤럭시 S24 Ultra_256G', '갤럭시 S24 ULTRA_256G', '갤럭시S', '갤럭시A', '갤럭시S2', '갤럭시 워치 ultra', '갤럭시S4', '갤럭시 워치 Ultra', '갤럭시A5', '갤럭시S5', '갤럭시S3', '갤럭시 S24 ULTRA_1T', '갤럭시 S24 Ultra_1T', 'S20', 'R300', 'L2', 'I8', 'D2', '갤럭시 S24 ultra_1T', '갤럭시 워치 ULTRA', '갤럭시A3', '갤럭시 S24 ULTRA_512G', '갤럭시 S24 Ultra_512G', '갤럭시 S24 ultra_512G', '갤럭시 TAB S4', '갤럭시 TAB S2', '갤럭시 tab S4', '갤럭시 Tab S4', '갤럭시 A32', '갤럭시 A34', '갤럭시 A33', '갤럭시 A15', '갤럭시 S10', '갤럭시 A53', '갤럭시 S21+', '갤럭시 A31', '갤럭시 A23', '상시20%할인', 'SK텔레콤(주)', '갤럭시 S21', '갤럭시 A80', '갤럭시 S24 FE', '상시 30% 할인', '갤럭시 북S', '갤럭시 J4+', '갤럭시 A6', '갤럭시 탭 S4', '갤럭시 탭 S2', '갤럭시 A8', '갤럭시 노트20 Ultra', '갤럭시 S24+_256G', 'CU 할인', '갤럭시 워치6 40mm', '갤럭시 S24_256G', 'T 탭 24', 'T 탭 18', '갤럭시 A12', '갤럭시 탭 S9 Ultra', '갤럭시 탭 S8 Ultra', '갤럭시 S22 ULTRA_256G', '갤럭시 S20 ULTRA_256G', '갤럭시 S20 Ultra_256G', '갤럭시 S23 ultra_256G', '갤럭시 S23 Ultra_256G', '갤럭시 S23 ULTRA_256G', '갤럭시 S22 ultra_256G', '갤럭시 S22 Ultra_256G', '갤럭시 S21 ultra_256G', '갤럭시 S21 Ultra_256G', '갤럭시 S21 ULTRA_256G', '갤럭시 S20 ultra_256G', '갤럭시 A5(2016)', '갤럭시 A5(2017)', '갤럭시 TAB S10+', '갤럭시 S24+_512G', '(KTF)갤럭시 S25 ultra', '(LGU)갤럭시 S25 ultra', '(LGU)갤럭시 S25 Ultra', '(KTF)갤럭시 S25 Ultra', '갤럭시S2 LTE', '갤럭시 TAB S6', '갤럭시S22 Ultra 클럽', '갤럭시 Tab S6', '갤럭시 Tab S8', '갤럭시 Tab S8+', '갤럭시 Tab S9', '갤럭시 Tab S9+', '갤럭시 tab S6', 'T 탭 9', '더 예약', '갤럭시 S23 ultra_512G', '갤럭시 노트20', '갤럭시 S21 ultra_512G', 'T LoL팩', 'Ultra 햅틱', 'ultra 햅틱', '갤럭시 A10e', '갤럭시 A21S', '갤럭시 S10e', '갤럭시 S21 Ultra_512G', '갤럭시 S22 Ultra_512G', '갤럭시 S25 ultra_512G', '갤럭시 S22 ultra_512G', '갤럭시 S23 Ultra_512G', '갤럭시 S24_512G', '갤럭시 S25 ULTRA_1T', '갤럭시 S25 Ultra_1T', '갤럭시 S25 Ultra_512G', '갤럭시 S25 ultra_1T', '일상플러스(무료)']
2025-09-02 14:57:24,237 - mms_extractor - INFO - extra_item_pdf 크기: (90, 2)
2025-09-02 14:57:24,237 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-02 14:57:24,238 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(KTF)갤럭시 S25 울트라', 'item_id': ['A66Z', 'A66Z']}, {'item_nm': '(LGU)갤럭시 S25 울트라', 'item_id': ['A67A', 'A67A']}]
2025-09-02 14:57:24,238 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-02 14:57:24,238 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-02 14:57:24,238 - mms_extractor - INFO - 구성된 프롬프트 길이: 7958 문자
2025-09-02 14:57:24,238 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-02 14:57:24,238 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7958)
2025-09-02 14:57:24,238 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-02 14:57:24,238 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-02 14:57:32,200 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 14:57:32,205 - mms_extractor - INFO - LLM 응답 길이: 1170 문자
2025-09-02 14:57:32,205 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 갤럭시 S24 사전예약",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "갤럭시 S24 Ultra",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24+",
            "action": "구매"
        },
        {
            "name": "갤럭시 S24",
            "action": "구매"
        },
        {
            "name": "갤럭시 워치6",
            "action": "구매"
        },
        {
            "name": "무선충전기",
            "a...
2025-09-02 14:57:32,205 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-02 14:57:32,207 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-02 14:57:32,207 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-02 14:57:32,207 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 갤럭시 S24 사전예약', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '갤럭시 S24 Ultra', 'action': '구매'}, {'name': '갤럭시 S24+', 'action': '구매'}, {'name': '갤럭시 S24', 'action': '구매'}, {'name': '갤럭시 워치6', 'action': '구매'}, {'name': '무선충전기', 'action': '구매'}, {'name': '케어플러스', 'action': '가입'}], 'channel': [{'type': '앱', 'value': 'T world 앱', 'action': '가입'}, {'type': 'URL', 'value': 'tworldfriends.co.kr/D123456789', 'action': '가입'}, {'type': '전화번호', 'value': '1588-0011', 'action': '문의'}, {'type': '전화번호', 'value': '080-011-0000', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_단말', '사용법/혜택/이벤트안내_단말']}
2025-09-02 14:57:32,207 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-02 14:57:32,207 - mms_extractor - INFO - LLM 추출 엔티티: ['갤럭시 S24 Ultra', '갤럭시 S24+', '갤럭시 S24', '갤럭시 워치6', '무선충전기', '케어플러스']
2025-09-02 14:57:32,466 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3577)
2025-09-02 14:57:32,466 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-02 14:57:32,466 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-02 14:57:33,306 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 14:57:34,276 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 2.07초
2025-09-02 14:57:34,283 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-02 14:57:34,283 - mms_extractor - INFO - ============================================================
2025-09-02 14:57:34,283 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-02 14:57:34,283 - mms_extractor - INFO - ============================================================
2025-09-02 14:57:34,283 - mms_extractor - INFO - 제목: [SK텔레콤] 갤럭시 S24 사전예약
2025-09-02 14:57:34,284 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-02 14:57:34,284 - mms_extractor - INFO - 상품 수: 6개
2025-09-02 14:57:34,284 - mms_extractor - INFO - 채널 수: 4개
2025-09-02 14:57:34,284 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-02 14:57:34,284 - mms_extractor - INFO - process_message 실행완료: 32.67초
2025-09-02 14:57:34,284 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-02 14:57:34,284 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-02 14:57:34,284 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 328자
2025-09-02 14:57:34,284 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x348dbdac0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x348dbdca0> root_client=<openai.OpenAI object at 0x348dbd7c0> root_async_client=<openai.AsyncOpenAI object at 0x348dbdaf0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-02 14:57:34,284 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-02 14:57:34,284 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3273자
2025-09-02 14:57:58,846 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 14:57:58,848 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2752자
2025-09-02 14:57:58,849 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SK텔레콤은 갤럭시 S24 시리즈의 사전예약을 시작하며, 다양한 할인 및 추가 혜택을 제공하여 고객의 구매를 유도하고자 합니다. 고객은 T world 앱 또는 지정된 매장 링크를 통해 사전예약을 할 수 있습니다.

[식별된 가치 제안 목록]
- 갤럭시 S24 시리즈 구매 시 모델별 최대 할인 혜택...
2025-09-02 14:57:58,849 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-02 14:57:58,849 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 262자
2025-09-02 14:57:58,850 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-02 14:57:58,851 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 2, 엣지 수: 1
2025-09-02 14:57:58,851 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T world 앱/매장:예약', '갤럭시 S24 시리즈:구매']
2025-09-02 14:57:58,852 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T world 앱/매장:예약', '갤럭시 S24 시리즈:구매')]
2025-09-02 14:57:58,852 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-02 14:57:58,853 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-02 14:57:58,853 - utils - INFO - 📊 입력 그래프 - 노드 수: 2, 엣지 수: 1
2025-09-02 14:57:58,854 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-02 14:58:00,017 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753.png
2025-09-02 14:58:00,017 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_cde17c728469553c86e0a126b0eae19295d966bb880276643d1ecf6fb5f9a753
2025-09-02 14:58:00,017 - mms_extractor - INFO - 🕒 DAG 처리 시간: 25.734초
2025-09-02 14:58:00,017 - mms_extractor - INFO - 📏 DAG 섹션 길이: 262자
2025-09-02 14:58:00,017 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)
(T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:할인)
(T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:무료수령)
(T w...
2025-09-02 14:58:00,017 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-02 14:58:00,018 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-02 14:58:00,018 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 4자
2025-09-02 14:58:00,018 - __main__ - INFO - DAG 내용 미리보기: ['(T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (갤럭시 워치6:할인)', '(T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (무선충전기:무료수령)', '(T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (케어플러스:무료이용)', '(T world 앱/매장:예약) -[예약후]-> (갤럭시 S24 시리즈:구매) -[구매하면]-> (할인:수령)']...
2025-09-02 14:58:00,018 - __main__ - INFO - 추출 완료: 58.409초
2025-09-02 14:58:00,018 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 14:58:00] "POST /extract HTTP/1.1" 200 -
2025-09-02 14:58:00,038 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 14:58:00] "GET /health HTTP/1.1" 200 -
2025-09-02 15:43:40,459 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:43:40] "GET /health HTTP/1.1" 200 -
2025-09-02 15:43:40,493 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:43:40] "GET /health HTTP/1.1" 200 -
2025-09-02 15:43:40,498 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 644자
2025-09-02 15:43:40,498 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-02 15:43:40,499 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-02 15:43:40,499 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: [T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[SKT] 넷플릭스+웨이브 월...
2025-09-02 15:43:40,499 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-02 15:43:40,499 - mms_extractor - INFO - ============================================================
2025-09-02 15:43:40,499 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-02 15:43:40,499 - mms_extractor - INFO - ============================================================
2025-09-02 15:43:40,499 - mms_extractor - INFO - 메시지 내용: [T 우주] 넷플릭스와 웨이브를 월 9,900원에! 
(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니,...
2025-09-02 15:43:40,499 - mms_extractor - INFO - 메시지 길이: 644 문자
2025-09-02 15:43:40,499 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-02 15:43:40,499 - mms_extractor - INFO - 데이터 소스: local
2025-09-02 15:43:40,499 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-02 15:43:40,499 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-02 15:43:40,499 - mms_extractor - INFO - LLM 모델: ax
2025-09-02 15:43:40,499 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-02 15:43:40,499 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-02 15:43:40,499 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-02 15:43:40,499 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-02 15:43:40,499 - mms_extractor - INFO - 처리할 메시지 길이: 643 문자
2025-09-02 15:43:40,506 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-02 15:43:40,521 - mms_extractor - INFO - 분할된 문장 수: 14개
2025-09-02 15:43:40,522 - mms_extractor - INFO - 필터링된 문장들: [' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', '넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ']...
2025-09-02 15:43:40,526 - mms_extractor - INFO - 전체 토큰 수: 242개
2025-09-02 15:43:40,526 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '웨이브', '광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-02 15:43:40,526 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['넷플릭스', '웨이브', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드']
2025-09-02 15:43:40,526 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-02 15:44:00,919 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (8416, 3)
2025-09-02 15:44:00,919 - mms_extractor - INFO - 퍼지 매칭 성공: 8416개 결과
2025-09-02 15:44:00,920 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': 'test', 'sim': 0.5714285714285714}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-02 15:44:00,920 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-02 15:44:01,120 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (8416, 3)
2025-09-02 15:44:01,121 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': 'test', 'sim': 0.6000000000000001}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' T 우주 넷플릭스와 웨이브 월 에 광고 SKT ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-02 15:44:01,121 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-02 15:44:01,125 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 160개
2025-09-02 15:44:01,131 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-02 15:44:01,131 - mms_extractor - INFO - 통합된 후보 아이템 수: 168개
2025-09-02 15:44:01,133 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-02 15:44:01,139 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-02 15:44:01,140 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-02 15:44:01,140 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 20.64초
2025-09-02 15:44:01,140 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-02 15:44:01,140 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-02 15:44:01,140 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-02 15:44:01,333 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-02 15:44:01,333 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-02 15:44:01,333 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-02 15:44:01,334 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-02 15:44:01,334 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-02 15:44:01,334 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-02 15:44:01,334 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-02 15:44:01,334 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-02 15:44:01,334 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-02 15:44:01,334 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-02 15:44:01,334 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-02 15:44:01,334 - mms_extractor - INFO - 구성된 프롬프트 길이: 8454 문자
2025-09-02 15:44:01,334 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-02 15:44:01,334 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 8454)
2025-09-02 15:44:01,334 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-02 15:44:01,334 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-02 15:44:07,840 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 15:44:07,844 - mms_extractor - INFO - LLM 응답 길이: 852 문자
2025-09-02 15:44:07,844 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[T 우주] 넷플릭스와 웨이브를 월 9,900원에!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "우주패스 Netflix",
            "action": "가입"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mm...
2025-09-02 15:44:07,845 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-02 15:44:07,846 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-02 15:44:07,847 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-02 15:44:07,847 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[T 우주] 넷플릭스와 웨이브를 월 9,900원에!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': '우주패스 Netflix', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-02 15:44:07,847 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-02 15:44:07,848 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', '우주패스 Netflix']
2025-09-02 15:44:08,336 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 4953)
2025-09-02 15:44:08,336 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-02 15:44:08,336 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-02 15:44:09,220 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 15:44:09,651 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.80초
2025-09-02 15:44:09,659 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-02 15:44:09,659 - mms_extractor - INFO - ============================================================
2025-09-02 15:44:09,659 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-02 15:44:09,659 - mms_extractor - INFO - ============================================================
2025-09-02 15:44:09,659 - mms_extractor - INFO - 제목: [T 우주] 넷플릭스와 웨이브를 월 9,900원에!
2025-09-02 15:44:09,659 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-02 15:44:09,659 - mms_extractor - INFO - 상품 수: 6개
2025-09-02 15:44:09,659 - mms_extractor - INFO - 채널 수: 3개
2025-09-02 15:44:09,659 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-02 15:44:09,660 - mms_extractor - INFO - process_message 실행완료: 29.16초
2025-09-02 15:44:09,660 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-02 15:44:09,660 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-02 15:44:09,660 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 644자
2025-09-02 15:44:09,660 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x348dbdac0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x348dbdca0> root_client=<openai.OpenAI object at 0x348dbd7c0> root_async_client=<openai.AsyncOpenAI object at 0x348dbdaf0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-02 15:44:09,660 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-02 15:44:09,660 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3589자
2025-09-02 15:44:28,627 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 15:44:28,630 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2170자
2025-09-02 15:44:28,631 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT의 T 우주 구독 서비스에서 넷플릭스와 웨이브(Wavve)를 월 9,900원에 2개월간 이용할 수 있는 특별 프로모션을 광고함. 이 프로모션은 8월 31일까지 진행되며, 프로모션 종료 후에는 정상가로 자동 결제됨. 고객은 프로모션 쿠폰을 다운로드하여 혜택을 받을 수 있으며, 추가 요금으로 넷...
2025-09-02 15:44:28,631 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-02 15:44:28,632 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 219자
2025-09-02 15:44:28,632 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-02 15:44:28,632 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-02 15:44:28,633 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '넷플릭스+웨이브+Wavve 콘텐츠 팩:이용', '월 9,900원:2개월간 이용', '정상가:자동 결제']
2025-09-02 15:44:28,633 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '프로모션 쿠폰:다운로드'), ('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스+웨이브+Wavve 콘텐츠 팩:이용'), ('우주패스 Netflix:가입', '월 9,900원:2개월간 이용'), ('우주패스 Netflix:가입', '정상가:자동 결제')]
2025-09-02 15:44:28,633 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-02 15:44:28,633 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_2d3c3af7b71dc79887966543e90bb4e721bab74333b47571fae17f8007d50cdd
2025-09-02 15:44:28,633 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-02 15:44:28,635 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-02 15:44:29,274 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_2d3c3af7b71dc79887966543e90bb4e721bab74333b47571fae17f8007d50cdd.png
2025-09-02 15:44:29,275 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_2d3c3af7b71dc79887966543e90bb4e721bab74333b47571fae17f8007d50cdd
2025-09-02 15:44:29,275 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.615초
2025-09-02 15:44:29,275 - mms_extractor - INFO - 📏 DAG 섹션 길이: 219자
2025-09-02 15:44:29,275 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)
(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브+Wavve 콘텐츠 팩:이용)
(우주패스 Netflix:가입) -[가입하면]-> (월 9,900원:2개월간 이용)
(우주패스 Netflix:가입) -[...
2025-09-02 15:44:29,275 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-02 15:44:29,275 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-02 15:44:29,275 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-02 15:44:29,275 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)', '(우주패스 Netflix:가입) -[2개월후]-> (정상가:자동 결제)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브+Wavve 콘텐츠 팩:이용)', '(우주패스 Netflix:가입) -[가입하면]-> (월 9,900원:2개월간 이용)', '(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)']...
2025-09-02 15:44:29,275 - __main__ - INFO - 추출 완료: 48.777초
2025-09-02 15:44:29,277 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:44:29] "POST /extract HTTP/1.1" 200 -
2025-09-02 15:44:29,307 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:44:29] "GET /health HTTP/1.1" 200 -
2025-09-02 15:44:58,557 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:44:58] "GET /health HTTP/1.1" 200 -
2025-09-02 15:45:00,343 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:45:00] "GET /health HTTP/1.1" 200 -
2025-09-02 15:45:00,372 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:45:00] "GET /health HTTP/1.1" 200 -
2025-09-02 15:45:05,051 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:45:05] "GET /health HTTP/1.1" 200 -
2025-09-02 15:45:05,061 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-02 15:45:05,061 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-02 15:45:05,061 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-02 15:45:05,061 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-02 15:45:05,061 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-02 15:45:05,061 - mms_extractor - INFO - ============================================================
2025-09-02 15:45:05,061 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-02 15:45:05,061 - mms_extractor - INFO - ============================================================
2025-09-02 15:45:05,061 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-02 15:45:05,061 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-02 15:45:05,061 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-02 15:45:05,061 - mms_extractor - INFO - 데이터 소스: local
2025-09-02 15:45:05,061 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-02 15:45:05,061 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-02 15:45:05,061 - mms_extractor - INFO - LLM 모델: ax
2025-09-02 15:45:05,061 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-02 15:45:05,062 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-02 15:45:05,062 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-02 15:45:05,062 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-02 15:45:05,062 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-02 15:45:05,072 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-02 15:45:05,078 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-02 15:45:05,079 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-02 15:45:05,084 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-02 15:45:05,084 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-02 15:45:05,084 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['넷플릭스', '웨이브', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드']
2025-09-02 15:45:05,084 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-02 15:45:06,074 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-02 15:45:06,074 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-02 15:45:06,074 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-02 15:45:06,074 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-02 15:45:06,260 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-02 15:45:06,261 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-02 15:45:06,261 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-02 15:45:06,264 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-02 15:45:06,269 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-02 15:45:06,269 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-02 15:45:06,270 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-02 15:45:06,275 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-02 15:45:06,275 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-02 15:45:06,275 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 1.21초
2025-09-02 15:45:06,275 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-02 15:45:06,275 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-02 15:45:06,276 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-02 15:45:06,329 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-02 15:45:06,329 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-02 15:45:06,329 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-02 15:45:06,329 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-02 15:45:06,329 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-02 15:45:06,330 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-02 15:45:06,330 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-02 15:45:06,330 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-02 15:45:06,330 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-02 15:45:06,331 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-02 15:45:06,331 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-02 15:45:06,331 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-02 15:45:06,332 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-02 15:45:06,332 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-02 15:45:06,332 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-02 15:45:06,332 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-02 15:45:06,332 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-02 15:45:13,758 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 15:45:13,763 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-02 15:45:13,763 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-02 15:45:13,763 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-02 15:45:13,765 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-02 15:45:13,765 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-02 15:45:13,765 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-02 15:45:13,766 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-02 15:45:13,766 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'T 우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-02 15:45:14,173 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-02 15:45:14,173 - mms_extractor - INFO - ============================================================
2025-09-02 15:45:14,173 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-02 15:45:14,173 - mms_extractor - INFO - ============================================================
2025-09-02 15:45:14,173 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-02 15:45:14,173 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-02 15:45:14,173 - mms_extractor - INFO - 상품 수: 5개
2025-09-02 15:45:14,173 - mms_extractor - INFO - 채널 수: 3개
2025-09-02 15:45:14,174 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-02 15:45:14,174 - mms_extractor - INFO - process_message 실행완료: 9.11초
2025-09-02 15:45:14,174 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-02 15:45:14,174 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-02 15:45:14,174 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-02 15:45:14,174 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x348dbdac0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x348dbdca0> root_client=<openai.OpenAI object at 0x348dbd7c0> root_async_client=<openai.AsyncOpenAI object at 0x348dbdaf0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-02 15:45:14,174 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-02 15:45:14,174 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-02 15:45:35,421 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-02 15:45:35,425 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2521자
2025-09-02 15:45:35,425 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 두 서비스를 저렴하게 이용할 수 있는 프로모션을 광고하고 있습니다. 8월 31일까지 '우주패스 Netflix'를 월 9,900원에 2개월 동안 이용할 수 있는 쿠폰을 제공하며, 이 쿠폰은 T 우주에서만 다운로드 가능합니다. 또한, 기본 혜택으로 넷플릭스 광고형 스탠다드...
2025-09-02 15:45:35,426 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-02 15:45:35,426 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 277자
2025-09-02 15:45:35,426 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-02 15:45:35,427 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-02 15:45:35,427 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '2개월 월 9,900원:수령', '넷플릭스 광고형 스탠다드:사용', 'Wavve 콘텐츠 팩:사용', '넷플릭스 스탠다드/프리미엄:업그레이드']
2025-09-02 15:45:35,427 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '프로모션 쿠폰:다운로드'), ('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '2개월 월 9,900원:수령'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용'), ('우주패스 Netflix:가입', 'Wavve 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '넷플릭스 스탠다드/프리미엄:업그레이드')]
2025-09-02 15:45:35,430 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-02 15:45:35,430 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-02 15:45:35,431 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-02 15:45:35,432 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-02 15:45:35,724 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-02 15:45:35,724 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-02 15:45:35,724 - mms_extractor - INFO - 🕒 DAG 처리 시간: 21.550초
2025-09-02 15:45:35,724 - mms_extractor - INFO - 📏 DAG 섹션 길이: 277자
2025-09-02 15:45:35,724 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)
(프로모션 쿠폰:다운로드) -[다운로드하면]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원:수령)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)
(우주패스 Netflix:가입) -[가입하면]->...
2025-09-02 15:45:35,724 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-02 15:45:35,724 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-02 15:45:35,724 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-02 15:45:35,724 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)', '(우주패스 Netflix:가입) -[가입하면, 추가 요금으로]-> (넷플릭스 스탠다드/프리미엄:업그레이드)', '(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원:수령)', '(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)', '(프로모션 쿠폰:다운로드) -[다운로드하면]-> (우주패스 Netflix:가입)']...
2025-09-02 15:45:35,724 - __main__ - INFO - 추출 완료: 30.663초
2025-09-02 15:45:35,725 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:45:35] "POST /extract HTTP/1.1" 200 -
2025-09-02 15:45:35,740 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 15:45:35] "GET /health HTTP/1.1" 200 -
2025-09-02 16:34:29,518 - werkzeug - INFO - 127.0.0.1 - - [02/Sep/2025 16:34:29] "GET /health HTTP/1.1" 200 -
2025-09-03 09:10:48,626 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-03 09:10:48,627 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-03 09:10:48,627 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-03 09:10:48,627 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-03 09:10:48,627 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-03 09:10:48,648 - mms_extractor - INFO - Using device: mps
2025-09-03 09:10:48,648 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-03 09:10:48,648 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-03 09:10:48,648 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-03 09:10:48,648 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-03 09:10:48,649 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-03 09:10:48,649 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-03 09:10:51,901 - mms_extractor - INFO - Model loaded on mps
2025-09-03 09:10:51,901 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.25초
2025-09-03 09:10:52,410 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-03 09:10:52,410 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.51초
2025-09-03 09:10:52,410 - mms_extractor - INFO - ============================================================
2025-09-03 09:10:52,410 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-03 09:10:52,410 - mms_extractor - INFO - ============================================================
2025-09-03 09:10:52,410 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-03 09:10:52,410 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-03 09:10:52,410 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-03 09:10:52,410 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-03 09:10:52,410 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-03 09:10:52,519 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-03 09:10:52,520 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-03 09:10:52,531 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-03 09:10:52,535 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-03 09:10:52,536 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-03 09:10:52,540 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-03 09:10:52,540 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-03 09:10:52,540 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-03 09:10:52,540 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-03 09:10:52,540 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-03 09:10:52,540 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-03 09:10:52,540 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-03 09:10:52,546 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-03 09:10:52,547 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-03 09:10:52,547 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-03 09:10:52,849 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-03 09:10:52,850 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-03 09:10:52,851 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-03 09:10:52,851 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-03 09:10:52,851 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-03 09:10:52,852 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-03 09:10:52,852 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-03 09:10:52,852 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-03 09:10:52,852 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-03 09:10:52,859 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-03 09:10:52,861 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-03 09:10:52,861 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-03 09:10:52,911 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-03 09:10:52,911 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-03 09:10:52,911 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-03 09:10:52,918 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-03 09:10:52,919 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-03 09:10:55,476 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-03 09:10:55,476 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-03 09:10:55,476 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-03 09:10:56,086 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-03 09:10:56,087 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-03 09:10:56,087 - mms_extractor - INFO - ============================================================
2025-09-03 09:10:56,087 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-03 09:10:56,087 - mms_extractor - INFO - ============================================================
2025-09-03 09:10:56,087 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-03 09:10:56,087 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-03 09:10:56,087 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-03 09:10:56,087 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-03 09:10:56,087 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-03 09:10:56,092 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-03 09:10:56,100 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-03 09:10:56,104 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-03 09:10:56,104 - mms_extractor - INFO - _load_data 실행완료: 3.69초
2025-09-03 09:10:56,104 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-03 09:10:56,104 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-03 09:10:56,104 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-03 09:10:56,105 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-03 09:10:56,105 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-03 09:10:56,105 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-03 09:10:56,105 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-03 09:10:56,105 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-03 09:10:56,105 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-03 09:10:56,105 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-03 09:10:56,105 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-03 09:10:56,113 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.113.226:8000
2025-09-03 09:10:56,113 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-03 09:13:48,679 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 09:13:48] "GET /health HTTP/1.1" 200 -
2025-09-03 09:13:50,529 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 09:13:50] "GET /health HTTP/1.1" 200 -
2025-09-03 09:13:50,552 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 09:13:50] "GET /health HTTP/1.1" 200 -
2025-09-03 09:13:51,563 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 09:13:51] "GET /health HTTP/1.1" 200 -
2025-09-03 09:13:51,573 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-03 09:13:51,573 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-03 09:13:51,573 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-03 09:13:51,573 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-03 09:13:51,573 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-03 09:13:51,573 - mms_extractor - INFO - ============================================================
2025-09-03 09:13:51,573 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-03 09:13:51,573 - mms_extractor - INFO - ============================================================
2025-09-03 09:13:51,573 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-03 09:13:51,573 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-03 09:13:51,573 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-03 09:13:51,573 - mms_extractor - INFO - 데이터 소스: local
2025-09-03 09:13:51,573 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-03 09:13:51,573 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-03 09:13:51,573 - mms_extractor - INFO - LLM 모델: ax
2025-09-03 09:13:51,573 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-03 09:13:51,573 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-03 09:13:51,573 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-03 09:13:51,573 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-03 09:13:51,573 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-03 09:13:51,579 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-03 09:13:52,174 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-03 09:13:52,175 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-03 09:13:52,179 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-03 09:13:52,179 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-03 09:13:52,179 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['웨이브', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', 'Netflix 스탠다드']
2025-09-03 09:13:52,179 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-03 09:14:01,513 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-03 09:14:01,513 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-03 09:14:01,520 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-03 09:14:01,520 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-03 09:14:01,724 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-03 09:14:01,724 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-03 09:14:01,724 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-03 09:14:01,728 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-03 09:14:01,734 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-03 09:14:01,735 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-03 09:14:01,737 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-03 09:14:01,743 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-03 09:14:01,743 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-03 09:14:01,744 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 10.17초
2025-09-03 09:14:01,744 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-03 09:14:01,744 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-03 09:14:01,744 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-03 09:14:02,886 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-03 09:14:02,886 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-03 09:14:02,886 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-03 09:14:02,886 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-03 09:14:02,886 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-03 09:14:02,886 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-03 09:14:02,887 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-03 09:14:02,887 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-03 09:14:02,887 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-03 09:14:02,888 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-03 09:14:02,888 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-03 09:14:02,888 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-03 09:14:02,888 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-03 09:14:02,888 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-03 09:14:02,888 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-03 09:14:02,888 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-03 09:14:02,888 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-03 09:14:10,299 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 09:14:10,314 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-03 09:14:10,314 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-03 09:14:10,315 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-03 09:14:10,315 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-03 09:14:10,315 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-03 09:14:10,315 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-03 09:14:10,315 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-03 09:14:10,315 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'T 우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-03 09:14:10,648 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-03 09:14:10,648 - mms_extractor - INFO - ============================================================
2025-09-03 09:14:10,648 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-03 09:14:10,648 - mms_extractor - INFO - ============================================================
2025-09-03 09:14:10,648 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-03 09:14:10,648 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-03 09:14:10,648 - mms_extractor - INFO - 상품 수: 5개
2025-09-03 09:14:10,648 - mms_extractor - INFO - 채널 수: 3개
2025-09-03 09:14:10,648 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-03 09:14:10,648 - mms_extractor - INFO - process_message 실행완료: 19.08초
2025-09-03 09:14:10,648 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-03 09:14:10,648 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-03 09:14:10,648 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-03 09:14:10,649 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x34c2a2210> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x3580b9ca0> root_client=<openai.OpenAI object at 0x34cc988f0> root_async_client=<openai.AsyncOpenAI object at 0x3580b9bb0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-03 09:14:10,649 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-03 09:14:10,649 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-03 09:14:32,604 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 09:14:32,606 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2581자
2025-09-03 09:14:32,607 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 서비스를 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 주요 내용은 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용할 수 있는 쿠폰을 제공하며, 이 쿠폰을 통해 '우주패스 Netflix'에 가입하도록 유도...
2025-09-03 09:14:32,607 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-03 09:14:32,608 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 247자
2025-09-03 09:14:32,608 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-03 09:14:32,609 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-03 09:14:32,609 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용', '월 9,900원:이용', '추가 요금:결제']
2025-09-03 09:14:32,610 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '프로모션 쿠폰:다운로드'), ('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '월 9,900원:이용'), ('우주패스 Netflix:가입', '추가 요금:결제')]
2025-09-03 09:14:32,610 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-03 09:14:32,611 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-03 09:14:32,611 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-03 09:14:32,612 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-03 09:14:33,375 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-03 09:14:33,375 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-03 09:14:33,375 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.726초
2025-09-03 09:14:33,375 - mms_extractor - INFO - 📏 DAG 섹션 길이: 247자
2025-09-03 09:14:33,375 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)
(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용)
(우주패스 Netflix:가입) -[가입하면]-> (월 9,900원:이용)
(우주패스 Netflix:가입) -[...
2025-09-03 09:14:33,375 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-03 09:14:33,375 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-03 09:14:33,375 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-03 09:14:33,375 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드+Wavve 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (월 9,900원:이용)', '(우주패스 Netflix:가입) -[가입후]-> (추가 요금:결제) -[결제하면]-> (넷플릭스 스탠다드/프리미엄:사용)', '(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)']...
2025-09-03 09:14:33,375 - __main__ - INFO - 추출 완료: 41.802초
2025-09-03 09:14:33,376 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 09:14:33] "POST /extract HTTP/1.1" 200 -
2025-09-03 09:14:33,393 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 09:14:33] "GET /health HTTP/1.1" 200 -
2025-09-03 18:03:29,795 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-03 18:03:29,795 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-03 18:03:29,795 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-03 18:03:29,795 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-03 18:03:29,795 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-03 18:03:29,814 - mms_extractor - INFO - Using device: mps
2025-09-03 18:03:29,814 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-03 18:03:29,814 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-03 18:03:29,814 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-03 18:03:29,814 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-03 18:03:29,814 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-03 18:03:29,814 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-03 18:03:30,684 - mms_extractor - INFO - Model loaded on mps
2025-09-03 18:03:30,684 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 0.87초
2025-09-03 18:03:31,091 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-03 18:03:31,091 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.41초
2025-09-03 18:03:31,091 - mms_extractor - INFO - ============================================================
2025-09-03 18:03:31,091 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-03 18:03:31,091 - mms_extractor - INFO - ============================================================
2025-09-03 18:03:31,091 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-03 18:03:31,092 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-03 18:03:31,092 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-03 18:03:31,092 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-03 18:03:31,092 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-03 18:03:31,198 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-03 18:03:31,198 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-03 18:03:31,207 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-03 18:03:31,210 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-03 18:03:31,211 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-03 18:03:31,215 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-03 18:03:31,215 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-03 18:03:31,216 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-03 18:03:31,216 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-03 18:03:31,216 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-03 18:03:31,216 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-03 18:03:31,216 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-03 18:03:31,217 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-03 18:03:31,218 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-03 18:03:31,218 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-03 18:03:31,523 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-03 18:03:31,525 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-03 18:03:31,525 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-03 18:03:31,525 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-03 18:03:31,525 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-03 18:03:31,526 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-03 18:03:31,526 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-03 18:03:31,526 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-03 18:03:31,526 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-03 18:03:31,533 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-03 18:03:31,535 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-03 18:03:31,535 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-03 18:03:31,589 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-03 18:03:31,589 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-03 18:03:31,589 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-03 18:03:31,590 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-03 18:03:31,590 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-03 18:03:31,760 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-03 18:03:31,760 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-03 18:03:31,760 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-03 18:03:32,248 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-03 18:03:32,248 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-03 18:03:32,248 - mms_extractor - INFO - ============================================================
2025-09-03 18:03:32,248 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-03 18:03:32,248 - mms_extractor - INFO - ============================================================
2025-09-03 18:03:32,248 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-03 18:03:32,248 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-03 18:03:32,248 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-03 18:03:32,248 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-03 18:03:32,248 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-03 18:03:32,253 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-03 18:03:32,260 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-03 18:03:32,264 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-03 18:03:32,264 - mms_extractor - INFO - _load_data 실행완료: 1.17초
2025-09-03 18:03:32,264 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-03 18:03:32,264 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-03 18:03:32,264 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-03 18:03:32,264 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-03 18:03:32,264 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-03 18:03:32,264 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-03 18:03:32,264 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-03 18:03:32,265 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-03 18:03:32,265 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-03 18:03:32,265 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-03 18:03:32,265 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-03 18:03:32,279 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.113.226:8000
2025-09-03 18:03:32,279 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-03 18:03:41,798 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 18:03:41] "GET /health HTTP/1.1" 200 -
2025-09-03 18:03:44,031 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 18:03:44] "GET /health HTTP/1.1" 200 -
2025-09-03 18:03:44,057 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 18:03:44] "GET /health HTTP/1.1" 200 -
2025-09-03 18:03:46,065 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 18:03:46] "GET /health HTTP/1.1" 200 -
2025-09-03 18:03:46,075 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-03 18:03:46,075 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-03 18:03:46,075 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-03 18:03:46,075 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-03 18:03:46,075 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-03 18:03:46,076 - mms_extractor - INFO - ============================================================
2025-09-03 18:03:46,076 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-03 18:03:46,076 - mms_extractor - INFO - ============================================================
2025-09-03 18:03:46,076 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-03 18:03:46,076 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-03 18:03:46,076 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-03 18:03:46,076 - mms_extractor - INFO - 데이터 소스: local
2025-09-03 18:03:46,076 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-03 18:03:46,076 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-03 18:03:46,076 - mms_extractor - INFO - LLM 모델: ax
2025-09-03 18:03:46,076 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-03 18:03:46,076 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-03 18:03:46,076 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-03 18:03:46,076 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-03 18:03:46,076 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-03 18:03:46,086 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-03 18:03:46,624 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-03 18:03:46,625 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-03 18:03:46,628 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-03 18:03:46,628 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-03 18:03:46,628 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Netflix 스탠다드', '우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', '넷플릭스', '웨이브']
2025-09-03 18:03:46,628 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-03 18:03:56,711 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-03 18:03:56,711 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-03 18:03:56,720 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-03 18:03:56,720 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-03 18:03:56,909 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-03 18:03:56,909 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-03 18:03:56,909 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-03 18:03:56,913 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-03 18:03:56,919 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-03 18:03:56,919 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-03 18:03:56,921 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-03 18:03:56,927 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-03 18:03:56,927 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-03 18:03:56,928 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 10.85초
2025-09-03 18:03:56,928 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-03 18:03:56,928 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-03 18:03:56,928 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-03 18:03:57,144 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-03 18:03:57,144 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-03 18:03:57,144 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-03 18:03:57,144 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-03 18:03:57,144 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-03 18:03:57,144 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-03 18:03:57,144 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-03 18:03:57,144 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-03 18:03:57,145 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-03 18:03:57,146 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-03 18:03:57,146 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-03 18:03:57,146 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-03 18:03:57,146 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-03 18:03:57,146 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-03 18:03:57,146 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-03 18:03:57,146 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-03 18:03:57,146 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-03 18:04:04,919 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 18:04:04,933 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-03 18:04:04,933 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-03 18:04:04,933 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-03 18:04:04,934 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-03 18:04:04,934 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-03 18:04:04,934 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-03 18:04:04,934 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-03 18:04:04,934 - mms_extractor - INFO - LLM 추출 엔티티: ['T 우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-03 18:04:05,262 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-03 18:04:05,262 - mms_extractor - INFO - ============================================================
2025-09-03 18:04:05,262 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-03 18:04:05,262 - mms_extractor - INFO - ============================================================
2025-09-03 18:04:05,262 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-03 18:04:05,262 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-03 18:04:05,262 - mms_extractor - INFO - 상품 수: 5개
2025-09-03 18:04:05,262 - mms_extractor - INFO - 채널 수: 3개
2025-09-03 18:04:05,262 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-03 18:04:05,262 - mms_extractor - INFO - process_message 실행완료: 19.19초
2025-09-03 18:04:05,262 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-03 18:04:05,262 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-03 18:04:05,262 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-03 18:04:05,263 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3583bd820> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x3583bd940> root_client=<openai.OpenAI object at 0x34c0997c0> root_async_client=<openai.AsyncOpenAI object at 0x3583bdb20> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-03 18:04:05,263 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-03 18:04:05,263 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-03 18:04:42,739 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 18:04:42,742 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2278자
2025-09-03 18:04:42,742 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하고 있습니다.

[식별된 가치...
2025-09-03 18:04:42,742 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-03 18:04:42,743 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 140자
2025-09-03 18:04:42,743 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-03 18:04:42,743 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 4, 엣지 수: 3
2025-09-03 18:04:42,744 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '우주패스 Netflix:가입', '넷플릭스+웨이브+Wavve 콘텐츠 팩:이용', '2개월 월 9,900원 할인:적용']
2025-09-03 18:04:42,744 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스+웨이브+Wavve 콘텐츠 팩:이용'), ('우주패스 Netflix:가입', '2개월 월 9,900원 할인:적용')]
2025-09-03 18:04:42,744 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-03 18:04:42,744 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-03 18:04:42,744 - utils - INFO - 📊 입력 그래프 - 노드 수: 4, 엣지 수: 3
2025-09-03 18:04:42,745 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-03 18:04:43,758 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-03 18:04:43,759 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-03 18:04:43,759 - mms_extractor - INFO - 🕒 DAG 처리 시간: 38.496초
2025-09-03 18:04:43,759 - mms_extractor - INFO - 📏 DAG 섹션 길이: 140자
2025-09-03 18:04:43,759 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브+Wavve 콘텐츠 팩:이용)
(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원 할인:적용)...
2025-09-03 18:04:43,759 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-03 18:04:43,759 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-03 18:04:43,759 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-03 18:04:43,759 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)', '(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원 할인:적용)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브+Wavve 콘텐츠 팩:이용)']...
2025-09-03 18:04:43,759 - __main__ - INFO - 추출 완료: 57.683초
2025-09-03 18:04:43,760 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 18:04:43] "POST /extract HTTP/1.1" 200 -
2025-09-03 18:04:43,792 - werkzeug - INFO - 127.0.0.1 - - [03/Sep/2025 18:04:43] "GET /health HTTP/1.1" 200 -
2025-09-04 09:01:31,846 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-04 09:01:31,846 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-04 09:01:31,846 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-04 09:01:31,846 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-04 09:01:31,846 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-04 09:01:31,866 - mms_extractor - INFO - Using device: mps
2025-09-04 09:01:31,866 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-04 09:01:31,867 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-04 09:01:31,867 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-04 09:01:31,867 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-04 09:01:31,867 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-04 09:01:31,867 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-04 09:01:33,276 - mms_extractor - INFO - Model loaded on mps
2025-09-04 09:01:33,276 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.41초
2025-09-04 09:01:33,726 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-04 09:01:33,726 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.45초
2025-09-04 09:01:33,726 - mms_extractor - INFO - ============================================================
2025-09-04 09:01:33,726 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-04 09:01:33,726 - mms_extractor - INFO - ============================================================
2025-09-04 09:01:33,726 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-04 09:01:33,726 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-04 09:01:33,726 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-04 09:01:33,726 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-04 09:01:33,726 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-04 09:01:33,840 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-04 09:01:33,840 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-04 09:01:33,849 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-04 09:01:33,853 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-04 09:01:33,854 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-04 09:01:33,857 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-04 09:01:33,857 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-04 09:01:33,858 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-04 09:01:33,858 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-04 09:01:33,858 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-04 09:01:33,858 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-04 09:01:33,858 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-04 09:01:33,870 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-04 09:01:33,871 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-04 09:01:33,871 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-04 09:01:34,182 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-04 09:01:34,184 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-04 09:01:34,184 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-04 09:01:34,184 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-04 09:01:34,184 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-04 09:01:34,185 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-04 09:01:34,185 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-04 09:01:34,185 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-04 09:01:34,185 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-04 09:01:34,192 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-04 09:01:34,194 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-04 09:01:34,195 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-04 09:01:34,249 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-04 09:01:34,250 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-04 09:01:34,250 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-04 09:01:34,257 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-04 09:01:34,257 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-04 09:01:34,476 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-04 09:01:34,476 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-04 09:01:34,476 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-04 09:01:34,983 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-04 09:01:34,983 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-04 09:01:34,983 - mms_extractor - INFO - ============================================================
2025-09-04 09:01:34,983 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-04 09:01:34,983 - mms_extractor - INFO - ============================================================
2025-09-04 09:01:34,983 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-04 09:01:34,983 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-04 09:01:34,983 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-04 09:01:34,983 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-04 09:01:34,983 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-04 09:01:34,988 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-04 09:01:34,996 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-04 09:01:35,001 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-04 09:01:35,001 - mms_extractor - INFO - _load_data 실행완료: 1.28초
2025-09-04 09:01:35,001 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-04 09:01:35,001 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-04 09:01:35,001 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-04 09:01:35,001 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-04 09:01:35,001 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-04 09:01:35,001 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-04 09:01:35,001 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-04 09:01:35,001 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-04 09:01:35,001 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-04 09:01:35,001 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-04 09:01:35,001 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-04 09:01:35,020 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.24:8000
2025-09-04 09:01:35,020 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-04 09:01:46,699 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:01:46] "GET /health HTTP/1.1" 200 -
2025-09-04 09:01:49,357 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:01:49] "GET /health HTTP/1.1" 200 -
2025-09-04 09:01:49,383 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:01:49] "GET /health HTTP/1.1" 200 -
2025-09-04 09:01:51,909 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:01:51] "GET /health HTTP/1.1" 200 -
2025-09-04 09:01:51,915 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-04 09:01:51,915 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-04 09:01:51,915 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-04 09:01:51,915 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-04 09:01:51,915 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-04 09:01:51,915 - mms_extractor - INFO - ============================================================
2025-09-04 09:01:51,915 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-04 09:01:51,915 - mms_extractor - INFO - ============================================================
2025-09-04 09:01:51,915 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-04 09:01:51,916 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-04 09:01:51,916 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-04 09:01:51,916 - mms_extractor - INFO - 데이터 소스: local
2025-09-04 09:01:51,916 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-04 09:01:51,916 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-04 09:01:51,916 - mms_extractor - INFO - LLM 모델: ax
2025-09-04 09:01:51,916 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-04 09:01:51,916 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-04 09:01:51,916 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-04 09:01:51,916 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-04 09:01:51,916 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-04 09:01:51,925 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-04 09:01:52,532 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-04 09:01:52,533 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-04 09:01:52,538 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-04 09:01:52,538 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-04 09:01:52,538 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '넷플릭스', 'Netflix 스탠다드', '웨이브']
2025-09-04 09:01:52,538 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-04 09:02:01,810 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-04 09:02:01,811 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-04 09:02:01,813 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-04 09:02:01,813 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-04 09:02:02,014 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-04 09:02:02,015 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-04 09:02:02,015 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-04 09:02:02,018 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-04 09:02:02,024 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-04 09:02:02,025 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-04 09:02:02,026 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:02:02,033 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-04 09:02:02,033 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-04 09:02:02,034 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 10.12초
2025-09-04 09:02:02,034 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:02:02,035 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-04 09:02:02,035 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-04 09:02:02,363 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-04 09:02:02,363 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-04 09:02:02,363 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-04 09:02:02,363 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-04 09:02:02,363 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-04 09:02:02,363 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:02:02,363 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-04 09:02:02,363 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-04 09:02:02,363 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-04 09:02:02,365 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-04 09:02:02,365 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-04 09:02:02,365 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-04 09:02:02,365 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-04 09:02:02,365 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-04 09:02:02,365 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-04 09:02:02,365 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-04 09:02:02,365 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-04 09:02:09,784 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:02:09,789 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-04 09:02:09,789 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-04 09:02:09,789 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-04 09:02:09,790 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-04 09:02:09,790 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-04 09:02:09,790 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-04 09:02:09,790 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-04 09:02:09,790 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'T 우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-04 09:02:10,115 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-04 09:02:10,115 - mms_extractor - INFO - ============================================================
2025-09-04 09:02:10,115 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-04 09:02:10,115 - mms_extractor - INFO - ============================================================
2025-09-04 09:02:10,115 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-04 09:02:10,115 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-04 09:02:10,115 - mms_extractor - INFO - 상품 수: 5개
2025-09-04 09:02:10,115 - mms_extractor - INFO - 채널 수: 3개
2025-09-04 09:02:10,115 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-04 09:02:10,115 - mms_extractor - INFO - process_message 실행완료: 18.20초
2025-09-04 09:02:10,115 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-04 09:02:10,115 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-04 09:02:10,115 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-04 09:02:10,116 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3580b61e0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x3580b5b20> root_client=<openai.OpenAI object at 0x34c3a14f0> root_async_client=<openai.AsyncOpenAI object at 0x3580b5e80> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-04 09:02:10,116 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-04 09:02:10,116 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-04 09:02:29,507 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:02:29,508 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2217자
2025-09-04 09:02:29,508 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 서비스를 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하는 것이 주요 목적입니다.

...
2025-09-04 09:02:29,508 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-04 09:02:29,508 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 124자
2025-09-04 09:02:29,509 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-04 09:02:29,509 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 4, 엣지 수: 3
2025-09-04 09:02:29,509 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '우주패스 Netflix:가입', '넷플릭스+웨이브:사용', 'Wavve 콘텐츠 팩:수령']
2025-09-04 09:02:29,509 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스+웨이브:사용'), ('우주패스 Netflix:가입', 'Wavve 콘텐츠 팩:수령')]
2025-09-04 09:02:29,509 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-04 09:02:29,509 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:02:29,509 - utils - INFO - 📊 입력 그래프 - 노드 수: 4, 엣지 수: 3
2025-09-04 09:02:29,509 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-04 09:02:30,125 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-04 09:02:30,125 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:02:30,125 - mms_extractor - INFO - 🕒 DAG 처리 시간: 20.010초
2025-09-04 09:02:30,125 - mms_extractor - INFO - 📏 DAG 섹션 길이: 124자
2025-09-04 09:02:30,125 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브:사용)
(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:수령)...
2025-09-04 09:02:30,125 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-04 09:02:30,125 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-04 09:02:30,125 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-04 09:02:30,125 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)', '(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:수령)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브:사용)']...
2025-09-04 09:02:30,126 - __main__ - INFO - 추출 완료: 38.210초
2025-09-04 09:02:30,126 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:02:30] "POST /extract HTTP/1.1" 200 -
2025-09-04 09:02:30,148 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:02:30] "GET /health HTTP/1.1" 200 -
2025-09-04 09:02:53,623 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:02:53] "GET /health HTTP/1.1" 200 -
2025-09-04 09:02:59,579 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:02:59] "GET /health HTTP/1.1" 200 -
2025-09-04 09:02:59,585 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: gemma, 메시지 길이: 614자
2025-09-04 09:02:59,585 - __main__ - INFO - LLM 모델이 ax -> gemma로 변경됨. 재초기화 중...
2025-09-04 09:02:59,586 - mms_extractor - INFO - LLM 초기화 완료: gemma (skt/gemma3-12b-it)
2025-09-04 09:02:59,586 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-04 09:02:59,586 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-04 09:02:59,586 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-04 09:02:59,586 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-04 09:02:59,586 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-04 09:02:59,586 - mms_extractor - INFO - ============================================================
2025-09-04 09:02:59,586 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-04 09:02:59,586 - mms_extractor - INFO - ============================================================
2025-09-04 09:02:59,586 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-04 09:02:59,586 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-04 09:02:59,586 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-04 09:02:59,586 - mms_extractor - INFO - 데이터 소스: local
2025-09-04 09:02:59,586 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-04 09:02:59,586 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-04 09:02:59,586 - mms_extractor - INFO - LLM 모델: gemma
2025-09-04 09:02:59,586 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-04 09:02:59,586 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-04 09:02:59,586 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-04 09:02:59,586 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-04 09:02:59,586 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-04 09:02:59,595 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-04 09:02:59,604 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-04 09:02:59,605 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-04 09:02:59,609 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-04 09:02:59,609 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-04 09:02:59,609 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '넷플릭스', 'Netflix 스탠다드', '웨이브']
2025-09-04 09:02:59,609 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-04 09:03:00,750 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-04 09:03:00,750 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-04 09:03:00,751 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-04 09:03:00,751 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-04 09:03:00,953 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-04 09:03:00,953 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-04 09:03:00,953 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-04 09:03:00,956 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-04 09:03:00,961 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-04 09:03:00,961 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-04 09:03:00,963 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:03:00,969 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-04 09:03:00,969 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-04 09:03:00,969 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 1.38초
2025-09-04 09:03:00,969 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:03:00,970 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-04 09:03:00,970 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-04 09:03:01,013 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-04 09:03:01,013 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-04 09:03:01,014 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-04 09:03:01,014 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-04 09:03:01,014 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-04 09:03:01,014 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:03:01,014 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-04 09:03:01,014 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-04 09:03:01,014 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-04 09:03:01,016 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-04 09:03:01,016 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-04 09:03:01,016 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-04 09:03:01,016 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-04 09:03:01,016 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-04 09:03:01,016 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-04 09:03:01,016 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-04 09:03:01,016 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-04 09:03:09,832 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:03:09,834 - mms_extractor - INFO - LLM 응답 길이: 1080 문자
2025-09-04 09:03:09,834 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내"
    ],
    "product": [
        {
            "name": "넷플릭스",
            "action": "기타"
        },
        {
            "name": "웨이브",
            "action": "기타"
        },
        {
            "name": "우주패스 Netflix",
            "action": "기타"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "기타"
        },
        {
            "name": "Wavve 콘...
2025-09-04 09:03:09,834 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-04 09:03:09,834 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-04 09:03:09,834 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-04 09:03:09,834 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내'], 'product': [{'name': '넷플릭스', 'action': '기타'}, {'name': '웨이브', 'action': '기타'}, {'name': '우주패스 Netflix', 'action': '기타'}, {'name': 'Netflix 광고형 스탠다드', 'action': '기타'}, {'name': 'Wavve 콘텐츠 팩', 'action': '기타'}, {'name': 'T 우주패스 Netflix', 'action': '기타'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '웹/앱 접속 유도'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-04 09:03:09,835 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-04 09:03:09,835 - mms_extractor - INFO - LLM 추출 엔티티: ['넷플릭스', '웨이브', '우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'T 우주패스 Netflix']
2025-09-04 09:03:10,207 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-04 09:03:10,208 - mms_extractor - INFO - ============================================================
2025-09-04 09:03:10,208 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-04 09:03:10,208 - mms_extractor - INFO - ============================================================
2025-09-04 09:03:10,208 - mms_extractor - INFO - 제목: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-04 09:03:10,208 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내']
2025-09-04 09:03:10,208 - mms_extractor - INFO - 상품 수: 6개
2025-09-04 09:03:10,208 - mms_extractor - INFO - 채널 수: 3개
2025-09-04 09:03:10,208 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-04 09:03:10,208 - mms_extractor - INFO - process_message 실행완료: 10.62초
2025-09-04 09:03:10,208 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-04 09:03:10,208 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-04 09:03:10,208 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-04 09:03:10,208 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x37cec4170> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x37cec4920> root_client=<openai.OpenAI object at 0x37cec5550> root_async_client=<openai.AsyncOpenAI object at 0x35c570200> model_name='skt/gemma3-12b-it' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-04 09:03:10,208 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-04 09:03:10,208 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-04 09:03:34,882 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1733자
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

**[메시지 요약 및 핵심 의도]**
SKT는 T 우주를 통해 넷플릭스와 웨이브를 저렴한 가격(월 9,900원)으로 2개월 동안 이용할 수 있는 프로모션을 제공하고 있습니다. 이는 고객이 두 플랫폼을 모두 이용하고 싶어하지만 가격 부담으로 망설이는 상황에 대한 해결책을 제시하며, 8월 31일까지 프로모션을 이용하도록 유도하는 광고입...
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 130자
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 4
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['프로모션쿠폰:다운로드', '넷플릭스:사용', '웨이브:사용', '광고형스탠다드:이용', '콘텐츠팩:이용']
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('프로모션쿠폰:다운로드', '넷플릭스:사용'), ('프로모션쿠폰:다운로드', '웨이브:사용'), ('넷플릭스:사용', '광고형스탠다드:이용'), ('웨이브:사용', '콘텐츠팩:이용')]
2025-09-04 09:03:34,883 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-04 09:03:34,883 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:03:34,883 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 4
2025-09-04 09:03:34,883 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-04 09:03:35,096 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-04 09:03:35,096 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:03:35,096 - mms_extractor - INFO - 🕒 DAG 처리 시간: 24.889초
2025-09-04 09:03:35,096 - mms_extractor - INFO - 📏 DAG 섹션 길이: 130자
2025-09-04 09:03:35,097 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (프로모션쿠폰:다운로드) -[다운로드후]-> (넷플릭스:사용)
(프로모션쿠폰:다운로드) -[다운로드후]-> (웨이브:사용)
(넷플릭스:사용) -[사용하면]-> (광고형스탠다드:이용)
(웨이브:사용) -[사용하면]-> (콘텐츠팩:이용)...
2025-09-04 09:03:35,097 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-04 09:03:35,097 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-04 09:03:35,097 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 4자
2025-09-04 09:03:35,097 - __main__ - INFO - DAG 내용 미리보기: ['(넷플릭스:사용) -[사용하면]-> (광고형스탠다드:이용)', '(웨이브:사용) -[사용하면]-> (콘텐츠팩:이용)', '(프로모션쿠폰:다운로드) -[다운로드후]-> (넷플릭스:사용)', '(프로모션쿠폰:다운로드) -[다운로드후]-> (웨이브:사용)']...
2025-09-04 09:03:35,097 - __main__ - INFO - 추출 완료: 35.512초
2025-09-04 09:03:35,098 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:03:35] "POST /extract HTTP/1.1" 200 -
2025-09-04 09:03:35,119 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:03:35] "GET /health HTTP/1.1" 200 -
2025-09-04 09:04:48,072 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:04:48] "GET /health HTTP/1.1" 200 -
2025-09-04 09:04:51,458 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:04:51] "GET /health HTTP/1.1" 200 -
2025-09-04 09:04:51,468 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: claude, 메시지 길이: 614자
2025-09-04 09:04:51,468 - __main__ - INFO - LLM 모델이 gemma -> claude로 변경됨. 재초기화 중...
2025-09-04 09:04:51,469 - mms_extractor - INFO - LLM 초기화 완료: claude (amazon/anthropic/claude-sonnet-4-20250514)
2025-09-04 09:04:51,470 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-04 09:04:51,470 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-04 09:04:51,470 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-04 09:04:51,470 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-04 09:04:51,470 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-04 09:04:51,470 - mms_extractor - INFO - ============================================================
2025-09-04 09:04:51,470 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-04 09:04:51,470 - mms_extractor - INFO - ============================================================
2025-09-04 09:04:51,470 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-04 09:04:51,470 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-04 09:04:51,470 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-04 09:04:51,470 - mms_extractor - INFO - 데이터 소스: local
2025-09-04 09:04:51,470 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-04 09:04:51,470 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-04 09:04:51,470 - mms_extractor - INFO - LLM 모델: claude
2025-09-04 09:04:51,470 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-04 09:04:51,470 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-04 09:04:51,470 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-04 09:04:51,470 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-04 09:04:51,470 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-04 09:04:51,479 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-04 09:04:51,486 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-04 09:04:51,487 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-04 09:04:51,491 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-04 09:04:51,492 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-04 09:04:51,492 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '넷플릭스', 'Netflix 스탠다드', '웨이브']
2025-09-04 09:04:51,492 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-04 09:04:52,720 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-04 09:04:52,720 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-04 09:04:52,721 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-04 09:04:52,721 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-04 09:04:52,919 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-04 09:04:52,919 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-04 09:04:52,919 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-04 09:04:52,923 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-04 09:04:52,927 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-04 09:04:52,928 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-04 09:04:52,929 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:04:52,934 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-04 09:04:52,934 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-04 09:04:52,935 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 1.46초
2025-09-04 09:04:52,935 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:04:52,935 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-04 09:04:52,935 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-04 09:04:53,052 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-04 09:04:53,053 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-04 09:04:53,053 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-04 09:04:53,053 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-04 09:04:53,053 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-04 09:04:53,053 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:04:53,053 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-04 09:04:53,053 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-04 09:04:53,053 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-04 09:04:53,054 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-04 09:04:53,054 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-04 09:04:53,054 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-04 09:04:53,054 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-04 09:04:53,054 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-04 09:04:53,055 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-04 09:04:53,055 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-04 09:04:53,055 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-04 09:04:57,928 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:04:57,929 - mms_extractor - INFO - LLM 응답 길이: 557 문자
2025-09-04 09:04:57,929 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": ["상품 가입 유도", "혜택 안내", "쿠폰 제공 안내"],
    "product": [
        {"name": "우주패스 Netflix", "action": "가입"},
        {"name": "Netflix 광고형 스탠다드", "action": "가입"},
        {"name": "Wavve 콘텐츠 팩", "action": "가입"}
    ],
    "channel": [
        {"type": "URL", "value": "http://t-mms.kr/jAs/#74", "action": "추가 정보"},
        {"type": "전화번호", "value": "1505", "action": "문의"},
        {"type": "전화번호", "value": "1504", "action": "수신 거부"}
    ]...
2025-09-04 09:04:57,929 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-04 09:04:57,929 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-04 09:04:57,929 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-04 09:04:57,930 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-04 09:04:57,930 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-04 09:04:57,930 - mms_extractor - INFO - LLM 추출 엔티티: ['우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-04 09:04:58,148 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-04 09:04:58,148 - mms_extractor - INFO - ============================================================
2025-09-04 09:04:58,148 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-04 09:04:58,148 - mms_extractor - INFO - ============================================================
2025-09-04 09:04:58,148 - mms_extractor - INFO - 제목: 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-04 09:04:58,148 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-04 09:04:58,148 - mms_extractor - INFO - 상품 수: 3개
2025-09-04 09:04:58,148 - mms_extractor - INFO - 채널 수: 3개
2025-09-04 09:04:58,148 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-04 09:04:58,148 - mms_extractor - INFO - process_message 실행완료: 6.68초
2025-09-04 09:04:58,148 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-04 09:04:58,148 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-04 09:04:58,148 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-04 09:04:58,148 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x37cda9100> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x37cdaa570> root_client=<openai.OpenAI object at 0x37cdaac00> root_async_client=<openai.AsyncOpenAI object at 0x37cdaa900> model_name='amazon/anthropic/claude-sonnet-4-20250514' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-04 09:04:58,148 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-04 09:04:58,148 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-04 09:05:16,666 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:05:16,666 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1569자
2025-09-04 09:05:16,666 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT가 T우주 플랫폼을 통해 우주패스 Netflix 서비스의 런칭 프로모션을 광고하는 메시지입니다. 넷플릭스와 웨이브를 함께 이용하고 싶어하는 고객들에게 2개월간 할인된 가격(월 9,900원)으로 두 서비스를 모두 제공하여 가입을 유도하는 것이 핵심 의도입니다.

[식별된 가치 제안 목록]
1...
2025-09-04 09:05:16,666 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-04 09:05:16,666 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 123자
2025-09-04 09:05:16,666 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-04 09:05:16,667 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 4, 엣지 수: 3
2025-09-04 09:05:16,667 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T우주:접속', '우주패스Netflix:가입', '2개월할인혜택:수령', 'Netflix+Wavve서비스:사용']
2025-09-04 09:05:16,667 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T우주:접속', '우주패스Netflix:가입'), ('우주패스Netflix:가입', '2개월할인혜택:수령'), ('우주패스Netflix:가입', 'Netflix+Wavve서비스:사용')]
2025-09-04 09:05:16,667 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-04 09:05:16,667 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:05:16,667 - utils - INFO - 📊 입력 그래프 - 노드 수: 4, 엣지 수: 3
2025-09-04 09:05:16,667 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-04 09:05:16,893 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-04 09:05:16,893 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:05:16,893 - mms_extractor - INFO - 🕒 DAG 처리 시간: 18.745초
2025-09-04 09:05:16,893 - mms_extractor - INFO - 📏 DAG 섹션 길이: 123자
2025-09-04 09:05:16,893 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T우주:접속) -[접속하여]-> (우주패스Netflix:가입)
(우주패스Netflix:가입) -[가입하면]-> (2개월할인혜택:수령)
(우주패스Netflix:가입) -[가입후]-> (Netflix+Wavve서비스:사용)...
2025-09-04 09:05:16,893 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-04 09:05:16,893 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-04 09:05:16,893 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-04 09:05:16,894 - __main__ - INFO - DAG 내용 미리보기: ['(T우주:접속) -[접속하여]-> (우주패스Netflix:가입)', '(우주패스Netflix:가입) -[가입하면]-> (2개월할인혜택:수령)', '(우주패스Netflix:가입) -[가입후]-> (Netflix+Wavve서비스:사용)']...
2025-09-04 09:05:16,894 - __main__ - INFO - 추출 완료: 25.425초
2025-09-04 09:05:16,894 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:05:16] "POST /extract HTTP/1.1" 200 -
2025-09-04 09:05:16,915 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:05:16] "GET /health HTTP/1.1" 200 -
2025-09-04 09:05:54,002 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:05:54] "GET /health HTTP/1.1" 200 -
2025-09-04 09:05:59,987 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:05:59] "GET /health HTTP/1.1" 200 -
2025-09-04 09:05:59,998 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: gemini, 메시지 길이: 614자
2025-09-04 09:05:59,999 - __main__ - INFO - LLM 모델이 claude -> gemini로 변경됨. 재초기화 중...
2025-09-04 09:05:59,999 - mms_extractor - INFO - LLM 초기화 완료: gemini (gcp/gemini-2.5-flash)
2025-09-04 09:06:00,000 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-04 09:06:00,000 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-04 09:06:00,000 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-04 09:06:00,000 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-04 09:06:00,000 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-04 09:06:00,000 - mms_extractor - INFO - ============================================================
2025-09-04 09:06:00,000 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-04 09:06:00,000 - mms_extractor - INFO - ============================================================
2025-09-04 09:06:00,000 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-04 09:06:00,000 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-04 09:06:00,000 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-04 09:06:00,000 - mms_extractor - INFO - 데이터 소스: local
2025-09-04 09:06:00,000 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-04 09:06:00,000 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-04 09:06:00,000 - mms_extractor - INFO - LLM 모델: gemini
2025-09-04 09:06:00,000 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-04 09:06:00,000 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-04 09:06:00,000 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-04 09:06:00,000 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-04 09:06:00,000 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-04 09:06:00,010 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-04 09:06:00,018 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-04 09:06:00,019 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-04 09:06:00,023 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-04 09:06:00,023 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-04 09:06:00,023 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '넷플릭스', 'Netflix 스탠다드', '웨이브']
2025-09-04 09:06:00,023 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-04 09:06:01,153 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-04 09:06:01,153 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-04 09:06:01,154 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-04 09:06:01,154 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-04 09:06:01,352 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-04 09:06:01,353 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-04 09:06:01,353 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-04 09:06:01,356 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-04 09:06:01,361 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-04 09:06:01,361 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-04 09:06:01,362 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:06:01,368 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-04 09:06:01,368 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-04 09:06:01,368 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 1.37초
2025-09-04 09:06:01,368 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:06:01,369 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-04 09:06:01,369 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-04 09:06:01,493 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-04 09:06:01,493 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-04 09:06:01,493 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-04 09:06:01,493 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-04 09:06:01,493 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-04 09:06:01,493 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:06:01,493 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-04 09:06:01,493 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-04 09:06:01,493 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-04 09:06:01,495 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-04 09:06:01,495 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-04 09:06:01,495 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-04 09:06:01,495 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-04 09:06:01,495 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-04 09:06:01,495 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-04 09:06:01,495 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-04 09:06:01,495 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-04 09:06:10,531 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:06:10,534 - mms_extractor - INFO - LLM 응답 길이: 1088 문자
2025-09-04 09:06:10,534 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내",
        "웹/앱 접속 유도",
        "수신 거부 안내",
        "기타 정보 제공"
    ],
    "product": [
        {
            "name": "우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "이용"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "이용"
        },
        {
            "na...
2025-09-04 09:06:10,534 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-04 09:06:10,534 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-04 09:06:10,534 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-04 09:06:10,534 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '(광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내', '웹/앱 접속 유도', '수신 거부 안내', '기타 정보 제공'], 'product': [{'name': '우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '이용'}, {'name': 'Wavve 콘텐츠 팩', 'action': '이용'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-04 09:06:10,534 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-04 09:06:10,535 - mms_extractor - INFO - LLM 추출 엔티티: ['우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-04 09:06:10,871 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-04 09:06:10,871 - mms_extractor - INFO - ============================================================
2025-09-04 09:06:10,871 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-04 09:06:10,871 - mms_extractor - INFO - ============================================================
2025-09-04 09:06:10,871 - mms_extractor - INFO - 제목: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-04 09:06:10,871 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내', '웹/앱 접속 유도', '수신 거부 안내', '기타 정보 제공']
2025-09-04 09:06:10,871 - mms_extractor - INFO - 상품 수: 5개
2025-09-04 09:06:10,871 - mms_extractor - INFO - 채널 수: 3개
2025-09-04 09:06:10,871 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-04 09:06:10,872 - mms_extractor - INFO - process_message 실행완료: 10.87초
2025-09-04 09:06:10,872 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-04 09:06:10,872 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-04 09:06:10,872 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-04 09:06:10,872 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x372a6a000> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x37c340800> root_client=<openai.OpenAI object at 0x37c343170> root_async_client=<openai.AsyncOpenAI object at 0x37c342cf0> model_name='gcp/gemini-2.5-flash' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-04 09:06:10,872 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-04 09:06:10,872 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-04 09:06:33,414 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:06:33,416 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2951자
2025-09-04 09:06:33,416 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
**메시지 요약 및 핵심 의도**:
SKT는 T 우주를 통해 넷플릭스(광고형 스탠다드)와 웨이브 콘텐츠 팩을 2개월간 월 9,900원에 이용할 수 있는 프로모션을 8월 31일까지 제공하여, 고객들의 '우주패스 Netflix' 가입을 유도하는 것이 핵심 의도이다. 가격 때문에 망설이던 고객들에게 파격적인 할인을 통해 구독 서비스를 경...
2025-09-04 09:06:33,416 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-04 09:06:33,417 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 201자
2025-09-04 09:06:33,417 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-04 09:06:33,417 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 1, 엣지 수: 0
2025-09-04 09:06:33,417 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['프로모션상세페이지:접속']
2025-09-04 09:06:33,417 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: []
2025-09-04 09:06:33,417 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-04 09:06:33,417 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:06:33,417 - utils - INFO - 📊 입력 그래프 - 노드 수: 1, 엣지 수: 0
2025-09-04 09:06:33,418 - utils - WARNING - ❌ 그래프에서 연결된 경로를 찾을 수 없습니다
2025-09-04 09:06:33,418 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:06:33,418 - mms_extractor - INFO - 🕒 DAG 처리 시간: 22.546초
2025-09-04 09:06:33,418 - mms_extractor - INFO - 📏 DAG 섹션 길이: 201자
2025-09-04 09:06:33,418 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (초기 DAG와 동일하므로, 변경 없음)
```
(프로모션상세페이지:접속)
  -[접속후]-> (우주패스Netflix:가입)
    -[가입하면]-> (프로모션쿠폰:수령)
      -[수령후]-> (우주패스Netflix:사용)
        -[사용시]-> (Netflix광고형스탠다드:사용)
        -[사용시]-> (Wavve콘텐츠팩:사용)
```...
2025-09-04 09:06:33,418 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-04 09:06:33,418 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-04 09:06:33,418 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 9자
2025-09-04 09:06:33,418 - __main__ - INFO - DAG 내용 미리보기: ['        -[사용시]-> (Netflix광고형스탠다드:사용)', '        -[사용시]-> (Wavve콘텐츠팩:사용)', '      -[수령후]-> (우주패스Netflix:사용)', '    -[가입하면]-> (프로모션쿠폰:수령)', '  -[접속후]-> (우주패스Netflix:가입)', '(초기 DAG와 동일하므로, 변경 없음)', '(프로모션상세페이지:접속)', '```', '```']...
2025-09-04 09:06:33,418 - __main__ - INFO - 추출 완료: 33.419초
2025-09-04 09:06:33,419 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:06:33] "POST /extract HTTP/1.1" 200 -
2025-09-04 09:06:33,449 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:06:33] "GET /health HTTP/1.1" 200 -
2025-09-04 09:06:52,581 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:06:52] "GET /health HTTP/1.1" 200 -
2025-09-04 09:06:56,248 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:06:56] "GET /health HTTP/1.1" 200 -
2025-09-04 09:06:56,258 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-04 09:06:56,259 - __main__ - INFO - LLM 모델이 gemini -> ax로 변경됨. 재초기화 중...
2025-09-04 09:06:56,260 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-04 09:06:56,260 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-04 09:06:56,260 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-04 09:06:56,260 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-04 09:06:56,260 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-04 09:06:56,260 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-04 09:06:56,260 - mms_extractor - INFO - ============================================================
2025-09-04 09:06:56,260 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-04 09:06:56,260 - mms_extractor - INFO - ============================================================
2025-09-04 09:06:56,260 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-04 09:06:56,260 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-04 09:06:56,260 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-04 09:06:56,260 - mms_extractor - INFO - 데이터 소스: local
2025-09-04 09:06:56,260 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-04 09:06:56,261 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-04 09:06:56,261 - mms_extractor - INFO - LLM 모델: ax
2025-09-04 09:06:56,261 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-04 09:06:56,261 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-04 09:06:56,261 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-04 09:06:56,261 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-04 09:06:56,261 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-04 09:06:56,269 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-04 09:06:56,282 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-04 09:06:56,283 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-04 09:06:56,287 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-04 09:06:56,288 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-04 09:06:56,288 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', 'Netflix 광고형 스탠다드', '우주패스 Netflix', '넷플릭스', 'Netflix 스탠다드', '웨이브']
2025-09-04 09:06:56,288 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-04 09:06:57,392 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-04 09:06:57,392 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-04 09:06:57,393 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-04 09:06:57,393 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-04 09:06:57,578 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-04 09:06:57,578 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-04 09:06:57,578 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-04 09:06:57,581 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-04 09:06:57,586 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-04 09:06:57,587 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-04 09:06:57,588 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:06:57,593 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-04 09:06:57,593 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-04 09:06:57,594 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 1.33초
2025-09-04 09:06:57,594 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:06:57,594 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-04 09:06:57,594 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-04 09:06:57,721 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-04 09:06:57,721 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-04 09:06:57,721 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-04 09:06:57,721 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-04 09:06:57,721 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-04 09:06:57,721 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-04 09:06:57,721 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-04 09:06:57,721 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-04 09:06:57,722 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-04 09:06:57,723 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-04 09:06:57,723 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-04 09:06:57,723 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-04 09:06:57,723 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-04 09:06:57,723 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-04 09:06:57,723 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-04 09:06:57,723 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-04 09:06:57,723 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-04 09:07:04,592 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:07:04,596 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-04 09:07:04,596 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-04 09:07:04,596 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-04 09:07:04,597 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-04 09:07:04,597 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-04 09:07:04,597 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-04 09:07:04,598 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-04 09:07:04,598 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'T 우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-04 09:07:04,928 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-04 09:07:04,928 - mms_extractor - INFO - ============================================================
2025-09-04 09:07:04,928 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-04 09:07:04,928 - mms_extractor - INFO - ============================================================
2025-09-04 09:07:04,928 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-04 09:07:04,928 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-04 09:07:04,928 - mms_extractor - INFO - 상품 수: 5개
2025-09-04 09:07:04,928 - mms_extractor - INFO - 채널 수: 3개
2025-09-04 09:07:04,928 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-04 09:07:04,928 - mms_extractor - INFO - process_message 실행완료: 8.67초
2025-09-04 09:07:04,928 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-04 09:07:04,928 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-04 09:07:04,928 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-04 09:07:04,928 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x37cb0e1b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x37cb0ec90> root_client=<openai.OpenAI object at 0x37cb0d400> root_async_client=<openai.AsyncOpenAI object at 0x37cb0f170> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-04 09:07:04,929 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-04 09:07:04,929 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-04 09:07:23,955 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 09:07:23,956 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2273자
2025-09-04 09:07:23,956 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 두 서비스를 저렴하게 이용할 수 있는 프로모션을 광고하고 있습니다. 8월 31일까지 '우주패스 Netflix'를 월 9,900원에 2개월 동안 이용할 수 있는 쿠폰을 제공하며, 이 쿠폰은 T 우주에서만 다운로드 가능합니다. 또한, 기본 혜택으로 넷플릭스 광고형 스탠다드...
2025-09-04 09:07:23,956 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-04 09:07:23,957 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 275자
2025-09-04 09:07:23,957 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-04 09:07:23,958 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 7, 엣지 수: 6
2025-09-04 09:07:23,959 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용', 'Wavve 콘텐츠 팩:사용', '2개월 월 9,900원:적용', '넷플릭스 스탠다드/프리미엄:업그레이드']
2025-09-04 09:07:23,959 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '프로모션 쿠폰:다운로드'), ('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용'), ('우주패스 Netflix:가입', 'Wavve 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '2개월 월 9,900원:적용'), ('우주패스 Netflix:가입', '넷플릭스 스탠다드/프리미엄:업그레이드')]
2025-09-04 09:07:23,959 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-04 09:07:23,959 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:07:23,959 - utils - INFO - 📊 입력 그래프 - 노드 수: 7, 엣지 수: 6
2025-09-04 09:07:23,960 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-04 09:07:24,212 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-04 09:07:24,213 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-04 09:07:24,213 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.284초
2025-09-04 09:07:24,213 - mms_extractor - INFO - 📏 DAG 섹션 길이: 275자
2025-09-04 09:07:24,213 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)
(프로모션 쿠폰:다운로드) -[다운로드후 가입하면]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)
(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:사용)
(우주패스 Netflix:가입) -[가입하면...
2025-09-04 09:07:24,213 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-04 09:07:24,213 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-04 09:07:24,213 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 6자
2025-09-04 09:07:24,213 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (프로모션 쿠폰:다운로드)', '(우주패스 Netflix:가입) -[가입하면]-> (2개월 월 9,900원:적용)', '(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)', '(우주패스 Netflix:가입) -[가입후 원하면]-> (넷플릭스 스탠다드/프리미엄:업그레이드)', '(프로모션 쿠폰:다운로드) -[다운로드후 가입하면]-> (우주패스 Netflix:가입)']...
2025-09-04 09:07:24,213 - __main__ - INFO - 추출 완료: 27.954초
2025-09-04 09:07:24,214 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:07:24] "POST /extract HTTP/1.1" 200 -
2025-09-04 09:07:24,234 - werkzeug - INFO - 127.0.0.1 - - [04/Sep/2025 09:07:24] "GET /health HTTP/1.1" 200 -
2025-09-05 10:20:37,401 - werkzeug - INFO - 127.0.0.1 - - [05/Sep/2025 10:20:37] "GET /health HTTP/1.1" 200 -
2025-09-05 10:20:37,428 - werkzeug - INFO - 127.0.0.1 - - [05/Sep/2025 10:20:37] "GET /health HTTP/1.1" 200 -
2025-09-05 13:48:20,550 - werkzeug - INFO - 127.0.0.1 - - [05/Sep/2025 13:48:20] "GET /health HTTP/1.1" 200 -
2025-09-05 13:48:20,580 - werkzeug - INFO - 127.0.0.1 - - [05/Sep/2025 13:48:20] "GET /health HTTP/1.1" 200 -
2025-09-08 10:47:50,543 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-08 10:47:50,543 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-08 10:47:50,543 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-08 10:47:50,543 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-08 10:47:50,543 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-08 10:47:50,565 - mms_extractor - INFO - Using device: mps
2025-09-08 10:47:50,565 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-08 10:47:50,565 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-08 10:47:50,565 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-08 10:47:50,565 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-08 10:47:50,566 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-08 10:47:50,566 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-08 10:47:56,975 - mms_extractor - INFO - Model loaded on mps
2025-09-08 10:47:56,976 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 6.41초
2025-09-08 10:47:57,485 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-08 10:47:57,485 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.51초
2025-09-08 10:47:57,485 - mms_extractor - INFO - ============================================================
2025-09-08 10:47:57,485 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-08 10:47:57,485 - mms_extractor - INFO - ============================================================
2025-09-08 10:47:57,485 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-08 10:47:57,485 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-08 10:47:57,485 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-08 10:47:57,485 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-08 10:47:57,485 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-08 10:47:57,594 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-08 10:47:57,594 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-08 10:47:57,602 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-08 10:47:57,606 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-08 10:47:57,607 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-08 10:47:57,610 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-08 10:47:57,610 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-08 10:47:57,611 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-08 10:47:57,611 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-08 10:47:57,611 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-08 10:47:57,611 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-08 10:47:57,611 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-08 10:47:57,619 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-08 10:47:57,620 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-08 10:47:57,620 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-08 10:47:57,919 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-08 10:47:57,921 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-08 10:47:57,921 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-08 10:47:57,921 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-08 10:47:57,921 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-08 10:47:57,922 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-08 10:47:57,922 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-08 10:47:57,922 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-08 10:47:57,922 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-08 10:47:57,929 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-08 10:47:57,931 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-08 10:47:57,931 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-08 10:47:57,978 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-08 10:47:57,978 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-08 10:47:57,978 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-08 10:47:57,989 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-08 10:47:57,989 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-08 10:47:58,289 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-08 10:47:58,289 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-08 10:47:58,289 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-08 10:47:58,798 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-08 10:47:58,798 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-08 10:47:58,798 - mms_extractor - INFO - ============================================================
2025-09-08 10:47:58,798 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-08 10:47:58,798 - mms_extractor - INFO - ============================================================
2025-09-08 10:47:58,798 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-08 10:47:58,798 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-08 10:47:58,798 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-08 10:47:58,798 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-08 10:47:58,798 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-08 10:47:58,803 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-08 10:47:58,810 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-08 10:47:58,814 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-08 10:47:58,814 - mms_extractor - INFO - _load_data 실행완료: 1.33초
2025-09-08 10:47:58,814 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-08 10:47:58,814 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-08 10:47:58,814 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=5000, debug=False
2025-09-08 10:47:58,814 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-08 10:47:58,814 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:5000에서 시작합니다
2025-09-08 10:47:58,814 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-08 10:47:58,814 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-08 10:47:58,814 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-08 10:47:58,814 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-08 10:47:58,814 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-08 10:47:58,814 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-08 10:48:40,337 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-08 10:48:40,338 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-08 10:48:40,338 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-08 10:48:40,338 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-08 10:48:40,338 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-08 10:48:40,356 - mms_extractor - INFO - Using device: mps
2025-09-08 10:48:40,357 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-08 10:48:40,357 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-08 10:48:40,357 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-08 10:48:40,357 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-08 10:48:40,357 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-08 10:48:40,357 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-08 10:48:41,490 - mms_extractor - INFO - Model loaded on mps
2025-09-08 10:48:41,490 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.13초
2025-09-08 10:48:41,978 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-08 10:48:41,978 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.49초
2025-09-08 10:48:41,978 - mms_extractor - INFO - ============================================================
2025-09-08 10:48:41,978 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-08 10:48:41,978 - mms_extractor - INFO - ============================================================
2025-09-08 10:48:41,978 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-08 10:48:41,978 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-08 10:48:41,978 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-08 10:48:41,978 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-08 10:48:41,978 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-08 10:48:42,088 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-08 10:48:42,088 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-08 10:48:42,100 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-08 10:48:42,106 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-08 10:48:42,107 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-08 10:48:42,111 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-08 10:48:42,111 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-08 10:48:42,112 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-08 10:48:42,112 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-08 10:48:42,112 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-08 10:48:42,112 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-08 10:48:42,112 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-08 10:48:42,113 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-08 10:48:42,114 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-08 10:48:42,114 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-08 10:48:42,424 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-08 10:48:42,426 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-08 10:48:42,426 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-08 10:48:42,426 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-08 10:48:42,426 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-08 10:48:42,427 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-08 10:48:42,427 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-08 10:48:42,428 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-08 10:48:42,428 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-08 10:48:42,434 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-08 10:48:42,437 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-08 10:48:42,437 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-08 10:48:42,498 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-08 10:48:42,499 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-08 10:48:42,499 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-08 10:48:42,500 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-08 10:48:42,500 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-08 10:48:42,726 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-08 10:48:42,727 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-08 10:48:42,727 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-08 10:48:43,208 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-08 10:48:43,208 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-08 10:48:43,208 - mms_extractor - INFO - ============================================================
2025-09-08 10:48:43,208 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-08 10:48:43,208 - mms_extractor - INFO - ============================================================
2025-09-08 10:48:43,208 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-08 10:48:43,208 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-08 10:48:43,208 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-08 10:48:43,208 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-08 10:48:43,208 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-08 10:48:43,213 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-08 10:48:43,219 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-08 10:48:43,223 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-08 10:48:43,224 - mms_extractor - INFO - _load_data 실행완료: 1.25초
2025-09-08 10:48:43,224 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-08 10:48:43,224 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-08 10:48:43,224 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-08 10:48:43,224 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-08 10:48:43,224 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-08 10:48:43,224 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-08 10:48:43,224 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-08 10:48:43,224 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-08 10:48:43,224 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-08 10:48:43,224 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-08 10:48:43,224 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-08 10:48:43,252 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.0.0.2:8000
2025-09-08 10:48:43,252 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-08 10:49:02,366 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 10:49:02] "GET /health HTTP/1.1" 200 -
2025-09-08 10:50:19,316 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 10:50:19] "GET /health HTTP/1.1" 200 -
2025-09-08 10:50:19,350 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 10:50:19] "GET /health HTTP/1.1" 200 -
2025-09-08 10:50:28,545 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 10:50:28] "GET /health HTTP/1.1" 200 -
2025-09-08 10:50:28,560 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-08 10:50:28,560 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-08 10:50:28,560 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-08 10:50:28,560 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-08 10:50:28,560 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-08 10:50:28,560 - mms_extractor - INFO - ============================================================
2025-09-08 10:50:28,560 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-08 10:50:28,560 - mms_extractor - INFO - ============================================================
2025-09-08 10:50:28,560 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-08 10:50:28,560 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-08 10:50:28,560 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-08 10:50:28,560 - mms_extractor - INFO - 데이터 소스: local
2025-09-08 10:50:28,560 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-08 10:50:28,560 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-08 10:50:28,560 - mms_extractor - INFO - LLM 모델: ax
2025-09-08 10:50:28,560 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-08 10:50:28,560 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-08 10:50:28,560 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-08 10:50:28,561 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-08 10:50:28,561 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-08 10:50:28,571 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-08 10:50:29,107 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-08 10:50:29,108 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-08 10:50:29,111 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-08 10:50:29,111 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-08 10:50:29,111 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Netflix 광고형 스탠다드', 'Netflix 스탠다드', '웨이브', '넷플릭스', '우주패스 Netflix', 'Wavve 콘텐츠 팩']
2025-09-08 10:50:29,111 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-08 10:50:37,243 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-08 10:50:37,243 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-08 10:50:37,258 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-08 10:50:37,258 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-08 10:50:37,457 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-08 10:50:37,458 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-08 10:50:37,458 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-08 10:50:37,462 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-08 10:50:37,468 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-08 10:50:37,468 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-08 10:50:37,472 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-08 10:50:37,478 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-08 10:50:37,478 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-08 10:50:37,479 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 8.92초
2025-09-08 10:50:37,479 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-08 10:50:37,479 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-08 10:50:37,479 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-08 10:50:37,861 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-08 10:50:37,861 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-08 10:50:37,861 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-08 10:50:37,861 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-08 10:50:37,861 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-08 10:50:37,861 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-08 10:50:37,861 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-08 10:50:37,862 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-08 10:50:37,862 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-08 10:50:37,863 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-08 10:50:37,863 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-08 10:50:37,863 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-08 10:50:37,864 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-08 10:50:37,864 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-08 10:50:37,864 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-08 10:50:37,864 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-08 10:50:37,864 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-08 10:50:46,178 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-08 10:50:46,194 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-08 10:50:46,194 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-08 10:50:46,194 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-08 10:50:46,195 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-08 10:50:46,195 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-08 10:50:46,195 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-08 10:50:46,195 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-08 10:50:46,195 - mms_extractor - INFO - LLM 추출 엔티티: ['Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'T 우주패스 Netflix', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-08 10:50:46,523 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-08 10:50:46,523 - mms_extractor - INFO - ============================================================
2025-09-08 10:50:46,523 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-08 10:50:46,523 - mms_extractor - INFO - ============================================================
2025-09-08 10:50:46,523 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-08 10:50:46,523 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-08 10:50:46,523 - mms_extractor - INFO - 상품 수: 5개
2025-09-08 10:50:46,523 - mms_extractor - INFO - 채널 수: 3개
2025-09-08 10:50:46,523 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-08 10:50:46,524 - mms_extractor - INFO - process_message 실행완료: 17.96초
2025-09-08 10:50:46,524 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-08 10:50:46,524 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-08 10:50:46,524 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-08 10:50:46,524 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3511a1070> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x35b5b9ca0> root_client=<openai.OpenAI object at 0x350ff4590> root_async_client=<openai.AsyncOpenAI object at 0x3511a10d0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-08 10:50:46,524 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-08 10:50:46,524 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3559자
2025-09-08 10:51:05,938 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-08 10:51:05,941 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2217자
2025-09-08 10:51:05,941 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ### 1. 메시지 분석
```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 서비스를 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하는 것이 주요 목적입니다.

...
2025-09-08 10:51:05,941 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-08 10:51:05,942 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 124자
2025-09-08 10:51:05,942 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-08 10:51:05,942 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 4, 엣지 수: 3
2025-09-08 10:51:05,942 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주:접속', '우주패스 Netflix:가입', '넷플릭스+웨이브:사용', 'Wavve 콘텐츠 팩:수령']
2025-09-08 10:51:05,943 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주:접속', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스+웨이브:사용'), ('우주패스 Netflix:가입', 'Wavve 콘텐츠 팩:수령')]
2025-09-08 10:51:05,943 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-08 10:51:05,943 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-08 10:51:05,943 - utils - INFO - 📊 입력 그래프 - 노드 수: 4, 엣지 수: 3
2025-09-08 10:51:05,944 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-08 10:51:08,116 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-08 10:51:08,116 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-08 10:51:08,116 - mms_extractor - INFO - 🕒 DAG 처리 시간: 21.593초
2025-09-08 10:51:08,117 - mms_extractor - INFO - 📏 DAG 섹션 길이: 124자
2025-09-08 10:51:08,117 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브:사용)
(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:수령)...
2025-09-08 10:51:08,117 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-08 10:51:08,117 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-08 10:51:08,117 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-08 10:51:08,117 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주:접속) -[접속하여]-> (우주패스 Netflix:가입)', '(우주패스 Netflix:가입) -[가입하면]-> (Wavve 콘텐츠 팩:수령)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스+웨이브:사용)']...
2025-09-08 10:51:08,117 - __main__ - INFO - 추출 완료: 39.557초
2025-09-08 10:51:08,119 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 10:51:08] "POST /extract HTTP/1.1" 200 -
2025-09-08 10:51:08,146 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 10:51:08] "GET /health HTTP/1.1" 200 -
2025-09-08 11:23:46,648 - werkzeug - INFO - 127.0.0.1 - - [08/Sep/2025 11:23:46] "GET /health HTTP/1.1" 200 -
2025-09-10 09:52:05,009 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 09:52:05,009 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 09:52:05,009 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 09:52:05,009 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 09:52:05,009 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 09:52:05,050 - mms_extractor - INFO - Using device: mps
2025-09-10 09:52:05,050 - mms_extractor - INFO - _initialize_device 실행완료: 0.04초
2025-09-10 09:52:05,051 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 09:52:05,051 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 09:52:05,051 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 09:52:05,051 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 09:52:05,051 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 09:52:08,278 - mms_extractor - INFO - Model loaded on mps
2025-09-10 09:52:08,278 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.23초
2025-09-10 09:52:08,902 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 09:52:08,902 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.62초
2025-09-10 09:52:08,902 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:08,902 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 09:52:08,902 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:08,902 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 09:52:08,902 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 09:52:08,902 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 09:52:08,902 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 09:52:08,902 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 09:52:09,030 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 09:52:09,030 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 09:52:09,042 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 09:52:09,048 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 09:52:09,049 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 09:52:09,054 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 09:52:09,054 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 09:52:09,055 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 09:52:09,055 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 09:52:09,055 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 09:52:09,055 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 09:52:09,055 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 09:52:09,063 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 09:52:09,064 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 09:52:09,064 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 09:52:09,389 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 09:52:09,391 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 09:52:09,391 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 09:52:09,391 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 09:52:09,391 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 09:52:09,392 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 09:52:09,393 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 09:52:09,393 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 09:52:09,393 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 09:52:09,401 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 09:52:09,404 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 09:52:09,404 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 09:52:09,468 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 09:52:09,469 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 09:52:09,469 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 09:52:09,483 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 09:52:09,483 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 09:52:09,786 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 09:52:09,786 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 09:52:09,786 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 09:52:10,376 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 09:52:10,376 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 09:52:10,376 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:10,376 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 09:52:10,376 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:10,376 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 09:52:10,376 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 09:52:10,376 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 09:52:10,376 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 09:52:10,377 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 09:52:10,382 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 09:52:10,391 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 09:52:10,396 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 09:52:10,396 - mms_extractor - INFO - _load_data 실행완료: 1.49초
2025-09-10 09:52:10,396 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 09:52:10,396 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 09:52:10,396 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-10 09:52:10,396 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 09:52:10,396 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-10 09:52:10,396 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 09:52:10,396 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 09:52:10,396 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 09:52:10,397 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 09:52:10,397 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 09:52:10,397 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 09:52:10,423 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.18:8000
2025-09-10 09:52:10,423 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-10 09:52:47,064 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 09:52:47,064 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 09:52:47,064 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 09:52:47,064 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 09:52:47,064 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 09:52:47,091 - mms_extractor - INFO - Using device: mps
2025-09-10 09:52:47,091 - mms_extractor - INFO - _initialize_device 실행완료: 0.03초
2025-09-10 09:52:47,091 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 09:52:47,091 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 09:52:47,091 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 09:52:47,092 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 09:52:47,092 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 09:52:48,410 - mms_extractor - INFO - Model loaded on mps
2025-09-10 09:52:48,410 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.32초
2025-09-10 09:52:48,988 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 09:52:48,988 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.58초
2025-09-10 09:52:48,988 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:48,988 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 09:52:48,988 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:48,988 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 09:52:48,988 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 09:52:48,988 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 09:52:48,988 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 09:52:48,988 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 09:52:49,109 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 09:52:49,109 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 09:52:49,119 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 09:52:49,124 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 09:52:49,125 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 09:52:49,129 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 09:52:49,129 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 09:52:49,130 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 09:52:49,130 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 09:52:49,130 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 09:52:49,130 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 09:52:49,130 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 09:52:49,132 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 09:52:49,133 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 09:52:49,133 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 09:52:49,451 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 09:52:49,453 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 09:52:49,453 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 09:52:49,454 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 09:52:49,454 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 09:52:49,456 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 09:52:49,456 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 09:52:49,456 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 09:52:49,456 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 09:52:49,464 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 09:52:49,466 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 09:52:49,466 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 09:52:49,530 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 09:52:49,531 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 09:52:49,531 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 09:52:49,533 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 09:52:49,533 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 09:52:49,765 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 09:52:49,766 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 09:52:49,766 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 09:52:50,313 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 09:52:50,314 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 09:52:50,314 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:50,314 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 09:52:50,314 - mms_extractor - INFO - ============================================================
2025-09-10 09:52:50,314 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 09:52:50,314 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 09:52:50,314 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 09:52:50,314 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 09:52:50,314 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 09:52:50,319 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 09:52:50,328 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 09:52:50,333 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 09:52:50,333 - mms_extractor - INFO - _load_data 실행완료: 1.34초
2025-09-10 09:52:50,333 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 09:52:50,333 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 09:52:50,333 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-10 09:52:50,333 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 09:52:50,333 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-10 09:52:50,333 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 09:52:50,333 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 09:52:50,333 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 09:52:50,333 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 09:52:50,333 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 09:52:50,333 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 09:52:50,345 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.18:8000
2025-09-10 09:52:50,345 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-10 09:53:00,058 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:53:00] "GET /health HTTP/1.1" 200 -
2025-09-10 09:53:02,680 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:53:02] "GET /health HTTP/1.1" 200 -
2025-09-10 09:53:02,707 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:53:02] "GET /health HTTP/1.1" 200 -
2025-09-10 09:53:04,276 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:53:04] "GET /health HTTP/1.1" 200 -
2025-09-10 09:53:04,282 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-10 09:53:04,282 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-10 09:53:04,282 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-10 09:53:04,282 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-10 09:53:04,282 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-10 09:53:04,282 - mms_extractor - INFO - ============================================================
2025-09-10 09:53:04,282 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-10 09:53:04,282 - mms_extractor - INFO - ============================================================
2025-09-10 09:53:04,283 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-10 09:53:04,283 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-10 09:53:04,283 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-10 09:53:04,283 - mms_extractor - INFO - 데이터 소스: local
2025-09-10 09:53:04,283 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-10 09:53:04,283 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-10 09:53:04,283 - mms_extractor - INFO - LLM 모델: ax
2025-09-10 09:53:04,283 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-10 09:53:04,283 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-10 09:53:04,283 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-10 09:53:04,283 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-10 09:53:04,283 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-10 09:53:04,292 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-10 09:53:04,905 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-10 09:53:04,906 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-10 09:53:04,911 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-10 09:53:04,911 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-10 09:53:04,911 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', '우주패스 Netflix', '웨이브', 'Netflix 스탠다드', '넷플릭스', 'Netflix 광고형 스탠다드']
2025-09-10 09:53:04,911 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-10 09:53:13,816 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-10 09:53:13,817 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-10 09:53:13,825 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-10 09:53:13,825 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-10 09:53:14,038 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-10 09:53:14,039 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-10 09:53:14,039 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-10 09:53:14,045 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-10 09:53:14,053 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-10 09:53:14,053 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-10 09:53:14,056 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-10 09:53:14,063 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-10 09:53:14,063 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-10 09:53:14,064 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 9.78초
2025-09-10 09:53:14,064 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-10 09:53:14,064 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-10 09:53:14,064 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-10 09:53:14,613 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-10 09:53:14,613 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-10 09:53:14,613 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-10 09:53:14,613 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-10 09:53:14,614 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-10 09:53:14,614 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-10 09:53:14,614 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-10 09:53:14,614 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-10 09:53:14,614 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-10 09:53:14,616 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 93개
2025-09-10 09:53:14,616 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': '(Fo) 광랜 프리미엄', 'action': '기타'}, {'name': '(T)프리미엄', 'action': '기타'}]
2025-09-10 09:53:14,616 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-10 09:53:14,616 - mms_extractor - INFO - 구성된 프롬프트 길이: 12849 문자
2025-09-10 09:53:14,616 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-10 09:53:14,616 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 12849)
2025-09-10 09:53:14,616 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-10 09:53:14,616 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-10 09:53:23,133 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 09:53:23,141 - mms_extractor - INFO - LLM 응답 길이: 1025 문자
2025-09-10 09:53:23,141 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        },
        {
            "name": "Netflix 스탠다드",
            "action": "가입"
        },
    ...
2025-09-10 09:53:23,141 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-10 09:53:23,141 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-10 09:53:23,141 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-10 09:53:23,141 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}, {'name': 'Netflix 스탠다드', 'action': '가입'}, {'name': 'Netflix 프리미엄', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-10 09:53:23,141 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-10 09:53:23,141 - mms_extractor - INFO - LLM 추출 엔티티: ['T 우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', 'Netflix 프리미엄']
2025-09-10 09:53:23,487 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-10 09:53:23,487 - mms_extractor - INFO - ============================================================
2025-09-10 09:53:23,487 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-10 09:53:23,487 - mms_extractor - INFO - ============================================================
2025-09-10 09:53:23,487 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-10 09:53:23,487 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-10 09:53:23,487 - mms_extractor - INFO - 상품 수: 5개
2025-09-10 09:53:23,487 - mms_extractor - INFO - 채널 수: 3개
2025-09-10 09:53:23,487 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-10 09:53:23,487 - mms_extractor - INFO - process_message 실행완료: 19.20초
2025-09-10 09:53:23,487 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-10 09:53:23,487 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-10 09:53:23,487 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-10 09:53:23,488 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x35ccb6000> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x35ccb5d00> root_client=<openai.OpenAI object at 0x35ccb5e20> root_async_client=<openai.AsyncOpenAI object at 0x35ccb6030> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-10 09:53:23,488 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-10 09:53:23,488 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-10 09:53:44,380 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 09:53:44,380 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2327자
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브 콘텐츠를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하고 있습니다.

[식별...
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 250자
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '프로모션:확인', '쿠폰:다운로드', '우주패스Netflix:가입', '넷플릭스:사용', '웨이브:사용', 'Wavve콘텐츠팩:사용', '정상가:자동결제']
2025-09-10 09:53:44,381 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '프로모션:확인'), ('프로모션:확인', '쿠폰:다운로드'), ('쿠폰:다운로드', '우주패스Netflix:가입'), ('우주패스Netflix:가입', '넷플릭스:사용'), ('우주패스Netflix:가입', '웨이브:사용'), ('우주패스Netflix:가입', 'Wavve콘텐츠팩:사용'), ('우주패스Netflix:가입', '정상가:자동결제')]
2025-09-10 09:53:44,382 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-10 09:53:44,382 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-10 09:53:44,382 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-09-10 09:53:44,383 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-10 09:53:45,284 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-10 09:53:45,284 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-10 09:53:45,284 - mms_extractor - INFO - 🕒 DAG 처리 시간: 21.796초
2025-09-10 09:53:45,284 - mms_extractor - INFO - 📏 DAG 섹션 길이: 250자
2025-09-10 09:53:45,284 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (프로모션:확인)
(프로모션:확인) -[확인하면]-> (쿠폰:다운로드)
(쿠폰:다운로드) -[다운로드후]-> (우주패스Netflix:가입)
(우주패스Netflix:가입) -[가입하면]-> (넷플릭스:사용)
(우주패스Netflix:가입) -[가입하면]-> (웨이브:사용)
(우주패스Netflix:가입) -[가입하면]-> (W...
2025-09-10 09:53:45,284 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-10 09:53:45,284 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-10 09:53:45,284 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-10 09:53:45,284 - __main__ - INFO - DAG 내용 미리보기: ['(우주패스Netflix:가입) -[2개월후]-> (정상가:자동결제)', '(우주패스Netflix:가입) -[가입하면]-> (Wavve콘텐츠팩:사용)', '(우주패스Netflix:가입) -[가입하면]-> (넷플릭스:사용)', '(우주패스Netflix:가입) -[가입하면]-> (웨이브:사용)', '(웹사이트:접속) -[접속하면]-> (프로모션:확인)', '(쿠폰:다운로드) -[다운로드후]-> (우주패스Netflix:가입)', '(프로모션:확인) -[확인하면]-> (쿠폰:다운로드)']...
2025-09-10 09:53:45,284 - __main__ - INFO - 추출 완료: 41.002초
2025-09-10 09:53:45,285 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:53:45] "POST /extract HTTP/1.1" 200 -
2025-09-10 09:53:45,310 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:53:45] "GET /health HTTP/1.1" 200 -
2025-09-10 09:54:33,697 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:54:33] "GET /health HTTP/1.1" 200 -
2025-09-10 09:54:36,888 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:54:36] "GET /health HTTP/1.1" 200 -
2025-09-10 09:54:39,652 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:54:39] "GET /health HTTP/1.1" 200 -
2025-09-10 09:54:39,659 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-10 09:54:39,659 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-10 09:54:39,659 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-10 09:54:39,659 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-10 09:54:39,659 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-10 09:54:39,659 - mms_extractor - INFO - ============================================================
2025-09-10 09:54:39,659 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-10 09:54:39,659 - mms_extractor - INFO - ============================================================
2025-09-10 09:54:39,659 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-10 09:54:39,659 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-10 09:54:39,659 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-10 09:54:39,659 - mms_extractor - INFO - 데이터 소스: local
2025-09-10 09:54:39,659 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-10 09:54:39,659 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-10 09:54:39,659 - mms_extractor - INFO - LLM 모델: ax
2025-09-10 09:54:39,659 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-10 09:54:39,659 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-10 09:54:39,659 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-10 09:54:39,659 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-10 09:54:39,659 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-10 09:54:39,670 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-10 09:54:39,681 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-10 09:54:39,682 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-10 09:54:39,686 - mms_extractor - INFO - 전체 토큰 수: 229개
2025-09-10 09:54:39,686 - mms_extractor - INFO - NNP 태그 토큰들: ['광고', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '넷플릭스', '웨이브', '우주패스 Netflix', '-', '-', '우주패스 Netflix', '광고', '스탠다드', '쿠폰', '우주패스 Netflix', '-', '기본', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩', 'Netflix 스탠다드', '프리미엄', '-', '쿠폰', '-', '쿠폰', '할인', '수신거부']
2025-09-10 09:54:39,686 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', '우주패스 Netflix', '웨이브', 'Netflix 스탠다드', '넷플릭스', 'Netflix 광고형 스탠다드']
2025-09-10 09:54:39,686 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-10 09:54:40,768 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (7949, 3)
2025-09-10 09:54:40,768 - mms_extractor - INFO - 퍼지 매칭 성공: 7949개 결과
2025-09-10 09:54:40,769 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.4}]
2025-09-10 09:54:40,769 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-10 09:54:40,953 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (7949, 3)
2025-09-10 09:54:40,954 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'test', 'sim': 0.4}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '노턴플러스', 'sim': 0.32000000000000006}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '데빌스카이', 'sim': 0.32000000000000006}]
2025-09-10 09:54:40,954 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-10 09:54:40,957 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 157개
2025-09-10 09:54:40,962 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 8개
2025-09-10 09:54:40,963 - mms_extractor - INFO - 통합된 후보 아이템 수: 165개
2025-09-10 09:54:40,964 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-10 09:54:40,969 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (93, 2)
2025-09-10 09:54:40,969 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}, {'item_nm': '(X)5기가프리미엄', 'item_id': ['NI00000930']}]
2025-09-10 09:54:40,969 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 1.31초
2025-09-10 09:54:40,969 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-10 09:54:40,970 - mms_extractor - INFO - 매칭된 상품 정보: (93, 2)
2025-09-10 09:54:40,970 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-10 09:54:41,081 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-10 09:54:41,081 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-10 09:54:41,081 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-10 09:54:41,081 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-10 09:54:41,081 - mms_extractor - INFO - 후보 아이템 리스트 크기: 124개
2025-09-10 09:54:41,081 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix 광고형 스탠다드', '웨이브', '우주패스 Netflix', '넷플릭스', 'Wavve 콘텐츠 팩', 'Netflix 프리미엄', 'Wavve 콘텐츠 팩 프리미엄', 'Netflix 스탠다드', 'Netflix', '스탠다드+', '스탠다드', 'wavve', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', '스탠다드 Netflix', 'I-프리미엄', '(T)프리미엄', '우주패스 미니', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'wavve 콘텐츠 팩 프리미엄 구독', 'Wavve 콘텐츠 팩 프리미엄 연간', 'Wavve 콘텐츠 팩 프리미엄 구독', '우주패스 life', '우주패스 mini (Wavve)', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩 구독', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'Lite+wavve', 'All+wavve', '우주패스 미니 (Wavve)', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', 'Wavve 콘텐츠 팩 Plus', '오다', 'Wavve 콘텐츠 팩 PLUS', '우드', '기본상품', '기본형', '기본형.', '우주패스 all', '플로', 'T쿠폰', '프로기', '우주패스 mini_Wavve', '우주패스 life 2', 'Wavve 콘텐츠 팩(이벤트)', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', 'Wavve 콘텐츠 팩_인증', '웨이브 콘텐츠 팩 프리미엄', 'Netflix 조합상품', '우주패스 mini', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', 'T 우주패스 티빙 & Wavve 프리미엄', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', 'All Netflix', 'tossi 런칭 프로모션', '넷플릭스 광고형 스탠다드', '우주패스 미니_Wavve', 'ⓜU-Fax 프리미엄', 'U-Fax 프리미엄', 'T 우주패스 TVING & Wavve 프리미엄', 'Netflix 단독', 'T 서비스', 'T 에이스', '타다 쿠폰', 'Wavve Lite', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '멜론 콘텐츠 팩', '우주패스 life 연간', '플로 콘텐츠 팩', 'TTL멤버십', 'TV-WiFi 프리미엄', 'T 우주패스 티비ING & Wavve 프리미엄', '(최초)Netflix 스탠다드_스탠', '우주패스 slim', 'T 우주패스 넷플릭스', 'T 우주패스 mini', 'T 우주패스 slim', 'T 우주패스 티빙 & Wavve 스탠다드', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'Wavve 콘텐츠 팩 플러스 구독', 'Wavve 콘텐츠 팩 플러스 연간', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 data 프리미엄', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', '(X)5기가프리미엄', 'T 우주패스 100', 'T 우주패스 DIY', '(Fo) 광랜 프리미엄', 'T 우주패스 TVING & Wavve 스탠다드', '우주pass Netflix', '멤버십콘도 상품', '스탠다드 지상파', 'BTP(프로모션)', 'FLO 콘텐츠 팩 구독', '클럽T 프리미엄', '클럽T 스탠다드', '웹ex_프리미엄', '웹ex_스탠다드', 'Wavve 앤 데이터 프리미엄', 'ISEEU-스탠다드', '우주패스 패밀리', '우주패스 배달형', 'ISEEU-프리미엄', '우주PASS Netflix', '우주Pass Netflix', 'lite']
2025-09-10 09:54:41,081 - mms_extractor - INFO - extra_item_pdf 크기: (93, 2)
2025-09-10 09:54:41,081 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-10 09:54:41,081 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '(Fo) 광랜 프리미엄', 'item_id': ['NI00001266']}, {'item_nm': '(T)프리미엄', 'item_id': ['NS00000005']}]
2025-09-10 09:54:41,082 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-10 09:54:41,082 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-10 09:54:41,082 - mms_extractor - INFO - 구성된 프롬프트 길이: 8424 문자
2025-09-10 09:54:41,082 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-10 09:54:41,082 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 8424)
2025-09-10 09:54:41,082 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-10 09:54:41,082 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-10 09:54:47,091 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 09:54:47,093 - mms_extractor - INFO - LLM 응답 길이: 777 문자
2025-09-10 09:54:47,093 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "우주패스 Netflix(광고형 스탠다드)",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "사용"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/jAs/#74",
            "action": "추가 정보"
        },
        {
         ...
2025-09-10 09:54:47,093 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-10 09:54:47,093 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-10 09:54:47,093 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-10 09:54:47,093 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '우주패스 Netflix(광고형 스탠다드)', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '사용'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-10 09:54:47,093 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-10 09:54:47,093 - mms_extractor - INFO - LLM 추출 엔티티: ['우주패스 Netflix(광고형 스탠다드)', 'Wavve 콘텐츠 팩']
2025-09-10 09:54:47,534 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 4932)
2025-09-10 09:54:47,534 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-10 09:54:47,535 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-10 09:54:48,521 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 09:54:48,866 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.77초
2025-09-10 09:54:48,875 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-10 09:54:48,876 - mms_extractor - INFO - ============================================================
2025-09-10 09:54:48,876 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-10 09:54:48,876 - mms_extractor - INFO - ============================================================
2025-09-10 09:54:48,876 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-10 09:54:48,876 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-10 09:54:48,876 - mms_extractor - INFO - 상품 수: 5개
2025-09-10 09:54:48,876 - mms_extractor - INFO - 채널 수: 3개
2025-09-10 09:54:48,876 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-10 09:54:48,876 - mms_extractor - INFO - process_message 실행완료: 9.22초
2025-09-10 09:54:48,876 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-10 09:54:48,876 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-10 09:54:48,876 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-10 09:54:48,876 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x35ccb6000> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x35ccb5d00> root_client=<openai.OpenAI object at 0x35ccb5e20> root_async_client=<openai.AsyncOpenAI object at 0x35ccb6030> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-10 09:54:48,876 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-10 09:54:48,876 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-10 09:55:07,914 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2264자
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브 콘텐츠를 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 주요 의도는 고객이 '우주패스 Netflix'에 가입하도록 유도하는 것입니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용할 수 있는 혜택을 제공...
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 249자
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-10 09:55:07,915 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['프로모션 쿠폰:다운로드', '우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용', '웨이브 콘텐츠 팩:사용', '2개월 동안 월 9,900원:할인', '추가 요금:지불']
2025-09-10 09:55:07,916 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('프로모션 쿠폰:다운로드', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용'), ('우주패스 Netflix:가입', '웨이브 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '2개월 동안 월 9,900원:할인'), ('우주패스 Netflix:가입', '추가 요금:지불')]
2025-09-10 09:55:07,916 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-10 09:55:07,916 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-10 09:55:07,916 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-10 09:55:07,916 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-10 09:55:08,153 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-10 09:55:08,154 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-10 09:55:08,154 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.278초
2025-09-10 09:55:08,154 - mms_extractor - INFO - 📏 DAG 섹션 길이: 249자
2025-09-10 09:55:08,154 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)
(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:사용)
(우주패스 Netflix:가입) -[가입후]-> (2개월 동안 월 9,900원:할인)
(우주패스 Netflix:가입) ...
2025-09-10 09:55:08,154 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-10 09:55:08,154 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-10 09:55:08,154 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-10 09:55:08,154 - __main__ - INFO - DAG 내용 미리보기: ['(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입후]-> (2개월 동안 월 9,900원:할인)', '(우주패스 Netflix:가입) -[가입후]-> (추가 요금:지불) -[지불하면]-> (넷플릭스 스탠다드/프리미엄:선택)', '(프로모션 쿠폰:다운로드) -[다운로드후]-> (우주패스 Netflix:가입)']...
2025-09-10 09:55:08,154 - __main__ - INFO - 추출 완료: 28.495초
2025-09-10 09:55:08,155 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:55:08] "POST /extract HTTP/1.1" 200 -
2025-09-10 09:55:08,178 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 09:55:08] "GET /health HTTP/1.1" 200 -
2025-09-10 10:26:29,684 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 10:26:29,684 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 10:26:29,684 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 10:26:29,684 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 10:26:29,684 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 10:26:29,706 - mms_extractor - INFO - Using device: mps
2025-09-10 10:26:29,707 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-10 10:26:29,707 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 10:26:29,707 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 10:26:29,707 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 10:26:29,707 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 10:26:29,707 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 10:26:31,128 - mms_extractor - INFO - Model loaded on mps
2025-09-10 10:26:31,128 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.42초
2025-09-10 10:26:31,639 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 10:26:31,639 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.51초
2025-09-10 10:26:31,639 - mms_extractor - INFO - ============================================================
2025-09-10 10:26:31,639 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 10:26:31,639 - mms_extractor - INFO - ============================================================
2025-09-10 10:26:31,639 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 10:26:31,639 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 10:26:31,639 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 10:26:31,639 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 10:26:31,639 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 10:26:31,758 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 10:26:31,758 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 10:26:31,769 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 10:26:31,774 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 10:26:31,776 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 10:26:31,780 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 10:26:31,780 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 10:26:31,780 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 10:26:31,780 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 10:26:31,780 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 10:26:31,780 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 10:26:31,780 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 10:26:31,782 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 10:26:31,783 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 10:26:31,783 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 10:26:32,104 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 10:26:32,106 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 10:26:32,106 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 10:26:32,107 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 10:26:32,107 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 10:26:32,108 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 10:26:32,108 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 10:26:32,108 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 10:26:32,108 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 10:26:32,116 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 10:26:32,119 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 10:26:32,119 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 10:26:32,176 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 10:26:32,177 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 10:26:32,177 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 10:26:32,179 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 10:26:32,179 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 10:26:32,406 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 10:26:32,406 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 10:26:32,406 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 10:26:32,957 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 10:26:32,957 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 10:26:32,957 - mms_extractor - INFO - ============================================================
2025-09-10 10:26:32,957 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 10:26:32,957 - mms_extractor - INFO - ============================================================
2025-09-10 10:26:32,957 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 10:26:32,957 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 10:26:32,957 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 10:26:32,957 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 10:26:32,957 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 10:26:32,962 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 10:26:32,970 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 10:26:32,974 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 10:26:32,974 - mms_extractor - INFO - _load_data 실행완료: 1.34초
2025-09-10 10:26:32,975 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 10:26:32,975 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 10:26:32,975 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-10 10:26:32,975 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 10:26:32,975 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-10 10:26:32,975 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 10:26:32,975 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 10:26:32,975 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 10:26:32,975 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 10:26:32,975 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 10:26:32,975 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 10:26:33,003 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.18:8000
2025-09-10 10:26:33,003 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-10 10:48:50,883 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 10:48:50,883 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 10:48:50,883 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 10:48:50,883 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 10:48:50,883 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 10:48:50,964 - mms_extractor - INFO - Using device: mps
2025-09-10 10:48:50,964 - mms_extractor - INFO - _initialize_device 실행완료: 0.08초
2025-09-10 10:48:50,964 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 10:48:50,964 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 10:48:50,964 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 10:48:50,964 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 10:48:50,964 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 10:48:54,402 - mms_extractor - INFO - Model loaded on mps
2025-09-10 10:48:54,402 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.44초
2025-09-10 10:48:55,013 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 10:48:55,013 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.61초
2025-09-10 10:48:55,013 - mms_extractor - INFO - ============================================================
2025-09-10 10:48:55,013 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 10:48:55,013 - mms_extractor - INFO - ============================================================
2025-09-10 10:48:55,013 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 10:48:55,013 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 10:48:55,013 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 10:48:55,013 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 10:48:55,013 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 10:48:55,137 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 10:48:55,137 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 10:48:55,147 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 10:48:55,153 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 10:48:55,154 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 10:48:55,158 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 10:48:55,158 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 10:48:55,158 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 10:48:55,158 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 10:48:55,158 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 10:48:55,158 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 10:48:55,158 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 10:48:55,166 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 10:48:55,167 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 10:48:55,167 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 10:48:55,534 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 10:48:55,537 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 10:48:55,537 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 10:48:55,537 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 10:48:55,537 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 10:48:55,538 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 10:48:55,538 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 10:48:55,539 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 10:48:55,539 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 10:48:55,546 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 10:48:55,550 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 10:48:55,550 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 10:48:55,607 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 10:48:55,608 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 10:48:55,608 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 10:48:55,618 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 10:48:55,618 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 10:48:57,698 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 10:48:57,698 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 10:48:57,698 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 10:48:58,268 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 10:48:58,268 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 10:48:58,268 - mms_extractor - INFO - ============================================================
2025-09-10 10:48:58,268 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 10:48:58,268 - mms_extractor - INFO - ============================================================
2025-09-10 10:48:58,268 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 10:48:58,268 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 10:48:58,268 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 10:48:58,268 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 10:48:58,268 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 10:48:58,273 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 10:48:58,281 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 10:48:58,285 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 10:48:58,285 - mms_extractor - INFO - _load_data 실행완료: 3.27초
2025-09-10 10:48:58,285 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 10:48:58,286 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 10:48:58,286 - __main__ - INFO - 파싱된 인자: host=127.0.0.1, port=8000, debug=False
2025-09-10 10:48:58,286 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 10:48:58,286 - __main__ - INFO - MMS 추출기 API 서버를 127.0.0.1:8000에서 시작합니다
2025-09-10 10:48:58,286 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 10:48:58,286 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 10:48:58,286 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 10:48:58,286 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 10:48:58,286 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 10:48:58,286 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 10:48:58,312 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8000
2025-09-10 10:48:58,312 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-10 11:03:27,584 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-10 11:03:27,584 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-10 11:03:27,584 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-10 11:03:27,584 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-10 11:03:27,584 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-10 11:03:27,585 - mms_extractor - INFO - ============================================================
2025-09-10 11:03:27,585 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-10 11:03:27,585 - mms_extractor - INFO - ============================================================
2025-09-10 11:03:27,585 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-10 11:03:27,585 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-10 11:03:27,585 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-10 11:03:27,585 - mms_extractor - INFO - 데이터 소스: local
2025-09-10 11:03:27,585 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-10 11:03:27,585 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-10 11:03:27,585 - mms_extractor - INFO - LLM 모델: ax
2025-09-10 11:03:27,585 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-10 11:03:27,585 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-10 11:03:27,585 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-10 11:03:27,585 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-10 11:03:27,585 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-10 11:03:27,591 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-10 11:03:28,161 - mms_extractor - INFO - 분할된 문장 수: 14개
2025-09-10 11:03:28,162 - mms_extractor - INFO - 필터링된 문장들: ['광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', ' 토 혜택 ', '만 13 고객이라면']...
2025-09-10 11:03:28,163 - mms_extractor - INFO - 전체 토큰 수: 134개
2025-09-10 11:03:28,163 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '0 day', '광고', '0 day', '베어유', '에이닷', '시크릿', '이벤트', '에이닷', '쿠폰', '에이닷이빵쏜닷', '뚜레쥬르', '데일리', '쿠폰', '시크릿', '수신거부']
2025-09-10 11:03:28,163 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['에이닷이빵쏜닷', '베어유', '뚜레쥬르', '0 day', '데일리', '시크릿']
2025-09-10 11:03:28,163 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-10 11:03:49,917 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (14323, 3)
2025-09-10 11:03:49,917 - mms_extractor - INFO - 퍼지 매칭 성공: 14323개 결과
2025-09-10 11:03:49,921 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'Galaxy 탭 S6', 'sim': 0.42105263157894735}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'galaxy 탭 S6', 'sim': 0.42105263157894735}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '특별한혜택충전 개편', 'sim': 0.4}]
2025-09-10 11:03:49,921 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-10 11:03:50,033 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (14323, 3)
2025-09-10 11:03:50,034 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'Galaxy 탭 S6', 'sim': 0.2909090909090909}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'galaxy 탭 S6', 'sim': 0.2909090909090909}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '특별한혜택충전 개편', 'sim': 0.24}]
2025-09-10 11:03:50,034 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-10 11:03:50,039 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 11개
2025-09-10 11:03:50,044 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-10 11:03:50,044 - mms_extractor - INFO - 통합된 후보 아이템 수: 15개
2025-09-10 11:03:50,046 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:03:50,050 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-10 11:03:50,050 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '0 day', 'item_id': ['9301']}, {'item_nm': 'CU(0 day)', 'item_id': ['V861']}, {'item_nm': 'LTE 혜택 안내', 'item_id': ['NA00004316']}]
2025-09-10 11:03:50,051 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 22.47초
2025-09-10 11:03:50,051 - mms_extractor - INFO - 추출된 후보 엔티티: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:03:50,051 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-10 11:03:50,051 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-10 11:03:51,355 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-10 11:03:51,355 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-10 11:03:51,355 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-10 11:03:51,355 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-10 11:03:51,355 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-10 11:03:51,355 - mms_extractor - INFO - 후보 아이템 리스트: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:03:51,355 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-10 11:03:51,355 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-10 11:03:51,355 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '0 day', 'item_id': ['9301']}, {'item_nm': 'CU(0 day)', 'item_id': ['V861']}]
2025-09-10 11:03:51,355 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-10 11:03:51,355 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-10 11:03:51,355 - mms_extractor - INFO - 구성된 프롬프트 길이: 6217 문자
2025-09-10 11:03:51,355 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-10 11:03:51,355 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6217)
2025-09-10 11:03:51,355 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-10 11:03:51,355 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-10 11:03:58,563 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:03:58,567 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-10 11:03:58,567 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-10 11:03:58,567 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-10 11:03:58,568 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-10 11:03:58,568 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-10 11:03:58,568 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-10 11:03:58,568 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-10 11:03:58,568 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-10 11:03:58,825 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3118)
2025-09-10 11:03:58,825 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-10 11:03:58,825 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-10 11:03:59,476 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:03:59,807 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.24초
2025-09-10 11:03:59,815 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-10 11:03:59,815 - mms_extractor - INFO - ============================================================
2025-09-10 11:03:59,815 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-10 11:03:59,815 - mms_extractor - INFO - ============================================================
2025-09-10 11:03:59,815 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-10 11:03:59,815 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-10 11:03:59,815 - mms_extractor - INFO - 상품 수: 3개
2025-09-10 11:03:59,815 - mms_extractor - INFO - 채널 수: 4개
2025-09-10 11:03:59,815 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-10 11:03:59,815 - mms_extractor - INFO - process_message 실행완료: 32.23초
2025-09-10 11:03:59,815 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-10 11:03:59,815 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-10 11:03:59,815 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-10 11:03:59,816 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x12708e7b0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x12708eb10> root_client=<openai.OpenAI object at 0x1270a5e10> root_async_client=<openai.AsyncOpenAI object at 0x12708e8d0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-10 11:03:59,816 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-10 11:03:59,816 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-10 11:04:17,563 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1922자
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 두 가지 주요 프로모션을 안내하고 있습니다. 첫 번째는 만 13~34세 고객을 대상으로 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하는 이벤트입니다. 두 번째는 에이닷 T 멤버십 쿠폰함에 특정 시크릿코드('에이닷이빵쏜닷')를 입력하면 뚜레쥬...
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-10 11:04:17,564 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-10 11:04:17,564 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-10 11:04:17,564 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-10 11:04:17,565 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-10 11:04:18,412 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-10 11:04:18,412 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-10 11:04:18,412 - mms_extractor - INFO - 🕒 DAG 처리 시간: 18.597초
2025-09-10 11:04:18,412 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-10 11:04:18,412 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-10 11:04:18,412 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-10 11:04:18,413 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-10 11:04:18,413 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-10 11:04:18,413 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-10 11:04:18,413 - __main__ - INFO - 추출 완료: 50.828초
2025-09-10 11:04:18,414 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 11:04:18] "POST /extract HTTP/1.1" 200 -
2025-09-10 11:08:10,089 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 11:08:10,089 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 11:08:10,089 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 11:08:10,089 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 11:08:10,089 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 11:08:10,154 - mms_extractor - INFO - Using device: mps
2025-09-10 11:08:10,154 - mms_extractor - INFO - _initialize_device 실행완료: 0.06초
2025-09-10 11:08:10,154 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 11:08:10,154 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 11:08:10,154 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 11:08:10,155 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 11:08:10,155 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 11:08:13,448 - mms_extractor - INFO - Model loaded on mps
2025-09-10 11:08:13,449 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.29초
2025-09-10 11:08:14,020 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 11:08:14,020 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.57초
2025-09-10 11:08:14,020 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:14,020 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 11:08:14,020 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:14,020 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 11:08:14,020 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 11:08:14,020 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 11:08:14,020 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 11:08:14,020 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 11:08:14,151 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 11:08:14,152 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 11:08:14,162 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 11:08:14,167 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 11:08:14,169 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 11:08:14,175 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 11:08:14,175 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 11:08:14,175 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 11:08:14,176 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 11:08:14,176 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 11:08:14,176 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 11:08:14,176 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 11:08:14,184 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 11:08:14,187 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 11:08:14,187 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 11:08:14,555 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 11:08:14,558 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 11:08:14,558 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 11:08:14,558 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 11:08:14,558 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 11:08:14,560 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 11:08:14,560 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 11:08:14,560 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 11:08:14,560 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 11:08:14,567 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 11:08:14,571 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 11:08:14,571 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 11:08:14,631 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 11:08:14,632 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 11:08:14,632 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 11:08:14,646 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 11:08:14,646 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 11:08:16,715 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 11:08:16,715 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 11:08:16,715 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 11:08:17,280 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 11:08:17,280 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 11:08:17,280 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:17,280 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 11:08:17,280 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:17,280 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 11:08:17,280 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 11:08:17,280 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 11:08:17,280 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 11:08:17,281 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 11:08:17,286 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 11:08:17,294 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 11:08:17,298 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 11:08:17,298 - mms_extractor - INFO - _load_data 실행완료: 3.28초
2025-09-10 11:08:17,298 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 11:08:17,298 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 11:08:17,298 - __main__ - INFO - 파싱된 인자: host=127.0.0.1, port=8080, debug=False
2025-09-10 11:08:17,298 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 11:08:17,298 - __main__ - INFO - MMS 추출기 API 서버를 127.0.0.1:8080에서 시작합니다
2025-09-10 11:08:17,298 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 11:08:17,298 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 11:08:17,298 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 11:08:17,298 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 11:08:17,298 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 11:08:17,298 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 11:08:17,309 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
2025-09-10 11:08:17,309 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-10 11:08:18,637 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-10 11:08:18,638 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-10 11:08:18,638 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-10 11:08:18,638 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-10 11:08:18,638 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-10 11:08:18,638 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:18,638 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-10 11:08:18,638 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:18,638 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-10 11:08:18,638 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-10 11:08:18,638 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-10 11:08:18,638 - mms_extractor - INFO - 데이터 소스: local
2025-09-10 11:08:18,638 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-10 11:08:18,638 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-10 11:08:18,638 - mms_extractor - INFO - LLM 모델: ax
2025-09-10 11:08:18,638 - mms_extractor - INFO - 상품 데이터 크기: (94279, 9)
2025-09-10 11:08:18,638 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-10 11:08:18,638 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-10 11:08:18,638 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-10 11:08:18,638 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-10 11:08:18,644 - mms_extractor - INFO - 매칭할 상품 별칭 수: 65154개
2025-09-10 11:08:19,229 - mms_extractor - INFO - 분할된 문장 수: 14개
2025-09-10 11:08:19,229 - mms_extractor - INFO - 필터링된 문장들: ['광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', ' 토 혜택 ', '만 13 고객이라면']...
2025-09-10 11:08:19,231 - mms_extractor - INFO - 전체 토큰 수: 134개
2025-09-10 11:08:19,231 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '0 day', '광고', '0 day', '베어유', '에이닷', '시크릿', '이벤트', '에이닷', '쿠폰', '에이닷이빵쏜닷', '뚜레쥬르', '데일리', '쿠폰', '시크릿', '수신거부']
2025-09-10 11:08:19,232 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['데일리', '베어유', '0 day', '에이닷이빵쏜닷', '시크릿', '뚜레쥬르']
2025-09-10 11:08:19,232 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-10 11:08:27,197 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (14323, 3)
2025-09-10 11:08:27,197 - mms_extractor - INFO - 퍼지 매칭 성공: 14323개 결과
2025-09-10 11:08:27,202 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'Galaxy 탭 S6', 'sim': 0.42105263157894735}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'galaxy 탭 S6', 'sim': 0.42105263157894735}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '특별한혜택충전 개편', 'sim': 0.4}]
2025-09-10 11:08:27,202 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-10 11:08:27,307 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (14323, 3)
2025-09-10 11:08:27,307 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'Galaxy 탭 S6', 'sim': 0.2909090909090909}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'galaxy 탭 S6', 'sim': 0.2909090909090909}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '특별한혜택충전 개편', 'sim': 0.24}]
2025-09-10 11:08:27,307 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-10 11:08:27,312 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 11개
2025-09-10 11:08:27,318 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-10 11:08:27,318 - mms_extractor - INFO - 통합된 후보 아이템 수: 15개
2025-09-10 11:08:27,320 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:08:27,324 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (10, 2)
2025-09-10 11:08:27,324 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': '0 day', 'item_id': ['9301']}, {'item_nm': 'CU(0 day)', 'item_id': ['V861']}, {'item_nm': 'LTE 혜택 안내', 'item_id': ['NA00004316']}]
2025-09-10 11:08:27,325 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 8.69초
2025-09-10 11:08:27,326 - mms_extractor - INFO - 추출된 후보 엔티티: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:08:27,326 - mms_extractor - INFO - 매칭된 상품 정보: (10, 2)
2025-09-10 11:08:27,326 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-10 11:08:28,660 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-10 11:08:28,660 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-10 11:08:28,660 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-10 11:08:28,660 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-10 11:08:28,660 - mms_extractor - INFO - 후보 아이템 리스트 크기: 10개
2025-09-10 11:08:28,660 - mms_extractor - INFO - 후보 아이템 리스트: ['0 day', '뚜레쥬르', '베어유', '시크릿', 'T쿠폰', 'data', '우드', 'T 에이스', 'CU(0 day)', 'LTE 혜택 안내']
2025-09-10 11:08:28,660 - mms_extractor - INFO - extra_item_pdf 크기: (10, 2)
2025-09-10 11:08:28,660 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-10 11:08:28,660 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': '0 day', 'item_id': ['9301']}, {'item_nm': 'CU(0 day)', 'item_id': ['V861']}]
2025-09-10 11:08:28,660 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-10 11:08:28,660 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-10 11:08:28,660 - mms_extractor - INFO - 구성된 프롬프트 길이: 6217 문자
2025-09-10 11:08:28,660 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-10 11:08:28,660 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 6217)
2025-09-10 11:08:28,660 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-10 11:08:28,660 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-10 11:08:35,647 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:08:35,656 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-10 11:08:35,656 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-10 11:08:35,657 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-10 11:08:35,657 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-10 11:08:35,657 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-10 11:08:35,657 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-10 11:08:35,657 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-10 11:08:35,657 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-10 11:08:35,905 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3118)
2025-09-10 11:08:35,905 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-10 11:08:35,905 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-10 11:08:36,563 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:08:36,908 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.25초
2025-09-10 11:08:36,916 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-10 11:08:36,917 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:36,917 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-10 11:08:36,917 - mms_extractor - INFO - ============================================================
2025-09-10 11:08:36,917 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-10 11:08:36,917 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-10 11:08:36,917 - mms_extractor - INFO - 상품 수: 3개
2025-09-10 11:08:36,917 - mms_extractor - INFO - 채널 수: 4개
2025-09-10 11:08:36,917 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-10 11:08:36,917 - mms_extractor - INFO - process_message 실행완료: 18.28초
2025-09-10 11:08:36,917 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-10 11:08:36,917 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-10 11:08:36,917 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-10 11:08:36,917 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x1278828d0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x127882c30> root_client=<openai.OpenAI object at 0x127892470> root_async_client=<openai.AsyncOpenAI object at 0x1278829f0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-10 11:08:36,917 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-10 11:08:36,917 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-10 11:08:54,610 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1922자
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 두 가지 주요 프로모션을 안내하고 있습니다. 첫 번째는 만 13~34세 고객을 대상으로 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하는 이벤트입니다. 두 번째는 에이닷 T 멤버십 쿠폰함에 특정 시크릿코드('에이닷이빵쏜닷')를 입력하면 뚜레쥬...
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-10 11:08:54,612 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-10 11:08:54,612 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-10 11:08:54,612 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-10 11:08:54,613 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-10 11:08:54,863 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-10 11:08:54,863 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-10 11:08:54,863 - mms_extractor - INFO - 🕒 DAG 처리 시간: 17.946초
2025-09-10 11:08:54,863 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-10 11:08:54,863 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-10 11:08:54,863 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-10 11:08:54,863 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-10 11:08:54,863 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-10 11:08:54,863 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-10 11:08:54,863 - __main__ - INFO - 추출 완료: 36.226초
2025-09-10 11:08:54,865 - werkzeug - INFO - 127.0.0.1 - - [10/Sep/2025 11:08:54] "POST /extract HTTP/1.1" 200 -
2025-09-10 11:31:12,246 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-10 11:31:12,246 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-10 11:31:12,246 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-10 11:31:12,246 - mms_extractor - INFO - MMSExtractor 초기화 시작
2025-09-10 11:31:12,246 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-10 11:31:12,265 - mms_extractor - INFO - Using device: mps
2025-09-10 11:31:12,265 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-10 11:31:12,265 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-10 11:31:12,265 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-10 11:31:12,265 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-10 11:31:12,266 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-10 11:31:12,266 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-10 11:31:16,194 - mms_extractor - INFO - Model loaded on mps
2025-09-10 11:31:16,194 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.93초
2025-09-10 11:31:16,711 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-10 11:31:16,711 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.52초
2025-09-10 11:31:16,711 - mms_extractor - INFO - ============================================================
2025-09-10 11:31:16,711 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-10 11:31:16,711 - mms_extractor - INFO - ============================================================
2025-09-10 11:31:16,711 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-10 11:31:16,711 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-10 11:31:16,711 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-10 11:31:16,711 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-10 11:31:16,711 - mms_extractor - INFO - CSV 파일 경로: ./data/item_info_all_250527.csv
2025-09-10 11:31:16,828 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (44275, 7)
2025-09-10 11:31:16,829 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'start_dt', 'end_dt', 'rank']
2025-09-10 11:31:16,838 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (44275, 4)
2025-09-10 11:31:16,841 - mms_extractor - INFO - 로컬 모드 컬럼명 변환: {'item_nm': 'item_nm', 'item_id': 'item_id', 'item_desc': 'item_desc', 'item_dmn': 'item_dmn', 'item_ctg': 'item_ctg', 'item_emb_vec': 'item_emb_vec', 'ofer_cd': 'ofer_cd', 'oper_dt_hms': 'oper_dt_hms'}
2025-09-10 11:31:16,842 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 11:31:16,846 - mms_extractor - INFO - 도메인 필터링: 44275 -> 44275 (제외된 도메인: ['R'])
2025-09-10 11:31:16,846 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 44275개 상품 ===
2025-09-10 11:31:16,846 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (44275, 8)
2025-09-10 11:31:16,846 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-10 11:31:16,846 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-10 11:31:16,847 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-10 11:31:16,847 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (44275, 8)
2025-09-10 11:31:16,854 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-10 11:31:16,855 - mms_extractor - INFO - null이 아닌 상품명 수: 44275개
2025-09-10 11:31:16,855 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['#', '#', 'EHI-CADW']
2025-09-10 11:31:17,164 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 44275 -> 94279
2025-09-10 11:31:17,166 - mms_extractor - INFO - 별칭 적용 후 샘플: ['#', '#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2']
2025-09-10 11:31:17,166 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-10 11:31:17,166 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (94279, 9)
2025-09-10 11:31:17,166 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-10 11:31:17,167 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-10 11:31:17,167 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-10 11:31:17,167 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-10 11:31:17,167 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-10 11:31:17,174 - mms_extractor - INFO - 등록할 고유 별칭 수: 65154개
2025-09-10 11:31:17,177 - mms_extractor - INFO - 유효한 별칭 수: 65154개
2025-09-10 11:31:17,177 - mms_extractor - INFO - 등록할 별칭 샘플: ['#', 'EHI-CADW', 'IPAD 10.2', '아이패드 10.2', 'KTF_IPAD PRO 12.9 5세대 2T(리퍼단말)']
2025-09-10 11:31:17,233 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 65154개 성공, 0개 실패
2025-09-10 11:31:17,233 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-10 11:31:17,233 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-10 11:31:17,244 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-10 11:31:17,244 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-10 11:31:17,510 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-10 11:31:17,510 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-10 11:31:17,511 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-10 11:31:18,007 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-10 11:31:18,007 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-10 11:31:18,007 - mms_extractor - INFO - ============================================================
2025-09-10 11:31:18,007 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-10 11:31:18,007 - mms_extractor - INFO - ============================================================
2025-09-10 11:31:18,007 - mms_extractor - INFO - ✅ 상품 데이터: (94279, 9)
2025-09-10 11:31:18,007 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-10 11:31:18,007 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-10 11:31:18,007 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-10 11:31:18,007 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-10 11:31:18,012 - mms_extractor - INFO - 고유 상품명 수: 32157개
2025-09-10 11:31:18,020 - mms_extractor - INFO - 고유 별칭 수: 65154개
2025-09-10 11:31:18,024 - mms_extractor - INFO - 고유 상품ID 수: 44186개
2025-09-10 11:31:18,024 - mms_extractor - INFO - _load_data 실행완료: 1.31초
2025-09-10 11:31:18,024 - mms_extractor - INFO - MMSExtractor 초기화 완료
2025-09-10 11:31:18,024 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-10 11:31:18,024 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-10 11:31:18,024 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-10 11:31:18,024 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-10 11:31:18,024 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-10 11:31:18,024 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-10 11:31:18,024 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-10 11:31:18,024 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-10 11:31:18,024 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-10 11:31:18,024 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-10 11:31:18,045 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.0.0.2:8000
2025-09-10 11:31:18,045 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-11 11:02:43,455 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-11 11:02:43,455 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-11 11:02:43,456 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-11 11:02:43,456 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:02:43,456 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:02:43,456 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:02:43,456 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:02:43,457 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-11 11:02:43,547 - mms_extractor - INFO - Using device: mps
2025-09-11 11:02:43,547 - mms_extractor - INFO - _initialize_device 실행완료: 0.09초
2025-09-11 11:02:43,547 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:02:43,547 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:02:43,547 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:02:43,547 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:02:43,547 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:02:43,548 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:02:43,548 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:02:46,703 - mms_extractor - INFO - Model loaded on mps
2025-09-11 11:02:46,703 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.16초
2025-09-11 11:02:46,703 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:02:47,218 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:02:47,218 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.51초
2025-09-11 11:02:47,218 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-11 11:02:47,218 - mms_extractor - INFO - ============================================================
2025-09-11 11:02:47,218 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-11 11:02:47,218 - mms_extractor - INFO - ============================================================
2025-09-11 11:02:47,218 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-11 11:02:47,218 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:02:47,218 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:02:47,218 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:02:47,218 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:02:47,218 - mms_extractor - ERROR - 상품 정보 로드 실패: [Errno 2] No such file or directory: './data/offer_master_data.csv'
2025-09-11 11:02:47,248 - mms_extractor - ERROR - 오류 상세: Traceback (most recent call last):
  File "/Users/1110566/workspace/AgenticWorkflow/mms_extractor_dev/mms_extractor.py", line 990, in _load_item_data
    item_pdf_raw = pd.read_csv(csv_path)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: './data/offer_master_data.csv'

2025-09-11 11:02:47,249 - mms_extractor - WARNING - 빈 DataFrame으로 fallback 설정됨
2025-09-11 11:02:47,249 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (0, 4)
2025-09-11 11:02:47,249 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn']
2025-09-11 11:02:47,249 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:02:47,249 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:02:47,249 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (0, 4)
2025-09-11 11:02:47,251 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:02:47,251 - mms_extractor - INFO - null이 아닌 상품명 수: 0개
2025-09-11 11:02:47,252 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 0 -> 0
2025-09-11 11:02:47,252 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:02:47,252 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (0, 5)
2025-09-11 11:02:47,252 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:02:47,252 - mms_extractor - INFO - 정지어 로드 완료: 143개
2025-09-11 11:02:47,252 - mms_extractor - INFO - 로드된 정지어 수: 143개
2025-09-11 11:02:47,252 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:02:47,253 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:02:47,253 - mms_extractor - INFO - 등록할 고유 별칭 수: 0개
2025-09-11 11:02:47,253 - mms_extractor - INFO - 유효한 별칭 수: 0개
2025-09-11 11:02:47,253 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 0개 성공, 0개 실패
2025-09-11 11:02:47,253 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:02:47,253 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:02:47,254 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:02:47,254 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:02:49,112 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:02:49,112 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:02:49,112 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:02:49,630 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:02:49,630 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:02:49,630 - mms_extractor - INFO - ============================================================
2025-09-11 11:02:49,630 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:02:49,630 - mms_extractor - INFO - ============================================================
2025-09-11 11:02:49,630 - mms_extractor - INFO - ✅ 상품 데이터: (0, 5)
2025-09-11 11:02:49,630 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:02:49,631 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:02:49,631 - mms_extractor - INFO - ✅ 정지어: 143개
2025-09-11 11:02:49,631 - mms_extractor - INFO - _load_data 실행완료: 2.41초
2025-09-11 11:02:49,631 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:02:49,631 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-11 11:02:49,631 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-11 11:02:49,631 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-11 11:02:49,631 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-11 11:02:49,631 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-11 11:02:49,631 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-11 11:02:49,631 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-11 11:02:49,631 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-11 11:02:49,631 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-11 11:02:49,631 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-11 11:02:49,647 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.25.54:8000
2025-09-11 11:02:49,647 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-11 11:03:27,013 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-11 11:03:27,013 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-11 11:03:27,013 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-11 11:03:27,013 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-11 11:03:27,013 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-11 11:03:27,013 - mms_extractor - INFO - ============================================================
2025-09-11 11:03:27,013 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:03:27,013 - mms_extractor - INFO - ============================================================
2025-09-11 11:03:27,013 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-11 11:03:27,013 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-11 11:03:27,013 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-11 11:03:27,013 - mms_extractor - INFO - 데이터 소스: local
2025-09-11 11:03:27,013 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-11 11:03:27,013 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-11 11:03:27,013 - mms_extractor - INFO - LLM 모델: ax
2025-09-11 11:03:27,013 - mms_extractor - INFO - 상품 데이터 크기: (0, 5)
2025-09-11 11:03:27,013 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:03:27,013 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:03:27,013 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:03:27,013 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-11 11:03:27,013 - mms_extractor - ERROR - 상품 데이터가 비어있습니다! 엔티티 추출 불가
2025-09-11 11:03:27,014 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.00초
2025-09-11 11:03:27,014 - mms_extractor - INFO - 추출된 후보 엔티티: []
2025-09-11 11:03:27,014 - mms_extractor - INFO - 매칭된 상품 정보: (0, 0)
2025-09-11 11:03:27,014 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:03:28,185 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:03:28,185 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:03:28,185 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-11 11:03:28,185 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:03:28,185 - mms_extractor - WARNING - 후보 아이템이 없습니다!
2025-09-11 11:03:28,185 - mms_extractor - WARNING - 이는 다음 중 하나의 문제일 수 있습니다:
2025-09-11 11:03:28,185 - mms_extractor - WARNING - 1. 상품 데이터 로딩 실패
2025-09-11 11:03:28,185 - mms_extractor - WARNING - 2. 엔티티 추출 실패
2025-09-11 11:03:28,185 - mms_extractor - WARNING - 3. 유사도 매칭 임계값 문제
2025-09-11 11:03:28,185 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:03:28,186 - mms_extractor - INFO - 구성된 프롬프트 길이: 5790 문자
2025-09-11 11:03:28,186 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:03:28,186 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5790)
2025-09-11 11:03:28,186 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:03:28,186 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:03:35,559 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:03:35,565 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-11 11:03:35,565 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-11 11:03:35,565 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:03:35,566 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:03:35,566 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:03:35,566 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-11 11:03:35,566 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:03:35,566 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-11 11:03:35,725 - mms_extractor - ERROR - LLM 기반 엔티티 추출 실패: 'item_nm_alias'
2025-09-11 11:03:35,726 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 0.16초
2025-09-11 11:03:35,774 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:03:35,774 - mms_extractor - INFO - ============================================================
2025-09-11 11:03:35,774 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:03:35,774 - mms_extractor - INFO - ============================================================
2025-09-11 11:03:35,774 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-11 11:03:35,774 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-11 11:03:35,775 - mms_extractor - INFO - 상품 수: 2개
2025-09-11 11:03:35,775 - mms_extractor - INFO - 채널 수: 4개
2025-09-11 11:03:35,775 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-11 11:03:35,775 - mms_extractor - INFO - process_message 실행완료: 8.76초
2025-09-11 11:03:35,775 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-11 11:03:35,775 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-11 11:03:35,775 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-11 11:03:35,775 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x3491b31a0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x3491b30e0> root_client=<openai.OpenAI object at 0x3491b2ed0> root_async_client=<openai.AsyncOpenAI object at 0x3491b30b0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-11 11:03:35,775 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-11 11:03:35,775 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-11 11:03:54,319 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:03:54,321 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1910자
2025-09-11 11:03:54,321 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 두 가지 주요 프로모션을 안내하고 있습니다. 첫 번째는 만 13~34세 고객을 대상으로 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하는 이벤트입니다. 두 번째는 에이닷 T 멤버십 쿠폰함에 특정 시크릿코드('에이닷이빵쏜닷')를 입력하면 뚜레쥬...
2025-09-11 11:03:54,321 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-11 11:03:54,322 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-11 11:03:54,322 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-11 11:03:54,322 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-11 11:03:54,323 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:방문', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-11 11:03:54,323 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:방문', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-11 11:03:54,323 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-11 11:03:54,323 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:03:54,323 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-11 11:03:54,324 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-11 11:03:55,180 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-11 11:03:55,180 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:03:55,180 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.405초
2025-09-11 11:03:55,180 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-11 11:03:55,180 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:방문) -[방문하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-11 11:03:55,180 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 11:03:55,180 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-11 11:03:55,180 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-11 11:03:55,180 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:방문) -[방문하면]-> (베어유쿠폰:수령)']...
2025-09-11 11:03:55,180 - __main__ - INFO - 추출 완료: 28.167초
2025-09-11 11:03:55,181 - werkzeug - INFO - 127.0.0.1 - - [11/Sep/2025 11:03:55] "POST /extract HTTP/1.1" 200 -
2025-09-11 11:15:19,740 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-11 11:15:19,740 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-11 11:15:19,741 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-11 11:15:19,741 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:15:19,741 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:15:19,741 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:15:19,741 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:15:19,742 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-11 11:15:19,759 - mms_extractor - INFO - Using device: mps
2025-09-11 11:15:19,759 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 11:15:19,759 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:15:19,759 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:15:19,759 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:15:19,759 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:15:19,759 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:15:19,760 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:15:19,760 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:15:20,860 - mms_extractor - INFO - Model loaded on mps
2025-09-11 11:15:20,860 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 1.10초
2025-09-11 11:15:20,860 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:15:21,336 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:15:21,337 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.48초
2025-09-11 11:15:21,337 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-11 11:15:21,337 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:21,337 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-11 11:15:21,337 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:21,337 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-11 11:15:21,337 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:15:21,337 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:15:21,337 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:15:21,337 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:15:21,337 - mms_extractor - ERROR - 상품 정보 로드 실패: [Errno 2] No such file or directory: './data/offer_master_data.csv'
2025-09-11 11:15:21,340 - mms_extractor - ERROR - 오류 상세: Traceback (most recent call last):
  File "/Users/1110566/workspace/AgenticWorkflow/mms_extractor_dev/mms_extractor.py", line 990, in _load_item_data
    item_pdf_raw = pd.read_csv(csv_path)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: './data/offer_master_data.csv'

2025-09-11 11:15:21,341 - mms_extractor - WARNING - 빈 DataFrame으로 fallback 설정됨
2025-09-11 11:15:21,341 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (0, 4)
2025-09-11 11:15:21,341 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn']
2025-09-11 11:15:21,341 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:15:21,341 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:15:21,342 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (0, 4)
2025-09-11 11:15:21,343 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:15:21,343 - mms_extractor - INFO - null이 아닌 상품명 수: 0개
2025-09-11 11:15:21,345 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 0 -> 0
2025-09-11 11:15:21,345 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:15:21,345 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (0, 5)
2025-09-11 11:15:21,345 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:15:21,346 - mms_extractor - INFO - 정지어 로드 완료: 143개
2025-09-11 11:15:21,346 - mms_extractor - INFO - 로드된 정지어 수: 143개
2025-09-11 11:15:21,346 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:15:21,346 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:15:21,346 - mms_extractor - INFO - 등록할 고유 별칭 수: 0개
2025-09-11 11:15:21,346 - mms_extractor - INFO - 유효한 별칭 수: 0개
2025-09-11 11:15:21,346 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 0개 성공, 0개 실패
2025-09-11 11:15:21,346 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:15:21,346 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:15:21,347 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:15:21,347 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:15:21,524 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:15:21,524 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:15:21,524 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:15:22,025 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:15:22,025 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:15:22,025 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:22,025 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:15:22,025 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:22,025 - mms_extractor - INFO - ✅ 상품 데이터: (0, 5)
2025-09-11 11:15:22,025 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:15:22,025 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:15:22,025 - mms_extractor - INFO - ✅ 정지어: 143개
2025-09-11 11:15:22,025 - mms_extractor - INFO - _load_data 실행완료: 0.69초
2025-09-11 11:15:22,025 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:15:22,025 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-11 11:15:22,025 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-11 11:15:22,025 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-11 11:15:22,025 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-11 11:15:22,025 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-11 11:15:22,025 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-11 11:15:22,025 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-11 11:15:22,026 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-11 11:15:22,026 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-11 11:15:22,026 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-11 11:15:22,044 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.25.54:8000
2025-09-11 11:15:22,044 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-11 11:15:27,012 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-11 11:15:27,012 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-11 11:15:27,012 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-11 11:15:27,012 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-11 11:15:27,012 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-11 11:15:27,012 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:27,012 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:15:27,012 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:27,012 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-11 11:15:27,012 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-11 11:15:27,012 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-11 11:15:27,012 - mms_extractor - INFO - 데이터 소스: local
2025-09-11 11:15:27,012 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-11 11:15:27,012 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-11 11:15:27,012 - mms_extractor - INFO - LLM 모델: ax
2025-09-11 11:15:27,012 - mms_extractor - INFO - 상품 데이터 크기: (0, 5)
2025-09-11 11:15:27,012 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:15:27,012 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:15:27,012 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:15:27,012 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-11 11:15:27,012 - mms_extractor - ERROR - 상품 데이터가 비어있습니다! 엔티티 추출 불가
2025-09-11 11:15:27,013 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.00초
2025-09-11 11:15:27,013 - mms_extractor - INFO - 추출된 후보 엔티티: []
2025-09-11 11:15:27,013 - mms_extractor - INFO - 매칭된 상품 정보: (0, 0)
2025-09-11 11:15:27,013 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:15:27,159 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:15:27,159 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:15:27,159 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-11 11:15:27,159 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:15:27,159 - mms_extractor - WARNING - 후보 아이템이 없습니다!
2025-09-11 11:15:27,160 - mms_extractor - WARNING - 이는 다음 중 하나의 문제일 수 있습니다:
2025-09-11 11:15:27,160 - mms_extractor - WARNING - 1. 상품 데이터 로딩 실패
2025-09-11 11:15:27,160 - mms_extractor - WARNING - 2. 엔티티 추출 실패
2025-09-11 11:15:27,160 - mms_extractor - WARNING - 3. 유사도 매칭 임계값 문제
2025-09-11 11:15:27,160 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:15:27,160 - mms_extractor - INFO - 구성된 프롬프트 길이: 5790 문자
2025-09-11 11:15:27,160 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:15:27,161 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5790)
2025-09-11 11:15:27,161 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:15:27,161 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:15:34,465 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:15:34,474 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-11 11:15:34,474 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-11 11:15:34,474 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:15:34,474 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:15:34,474 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:15:34,474 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-11 11:15:34,474 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:15:34,474 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-11 11:15:34,490 - mms_extractor - ERROR - LLM 기반 엔티티 추출 실패: 'item_nm_alias'
2025-09-11 11:15:34,490 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 0.02초
2025-09-11 11:15:34,493 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:15:34,493 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:34,493 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:15:34,493 - mms_extractor - INFO - ============================================================
2025-09-11 11:15:34,493 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-11 11:15:34,493 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-11 11:15:34,493 - mms_extractor - INFO - 상품 수: 2개
2025-09-11 11:15:34,493 - mms_extractor - INFO - 채널 수: 4개
2025-09-11 11:15:34,493 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-11 11:15:34,493 - mms_extractor - INFO - process_message 실행완료: 7.48초
2025-09-11 11:15:34,493 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-11 11:15:34,493 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-11 11:15:34,493 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-11 11:15:34,493 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x325652a20> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x32759b5f0> root_client=<openai.OpenAI object at 0x3255eb620> root_async_client=<openai.AsyncOpenAI object at 0x325a59940> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-11 11:15:34,493 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-11 11:15:34,493 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-11 11:15:53,625 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:15:53,626 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1933자
2025-09-11 11:15:53,627 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 두 가지 주요 프로모션을 안내하고 있습니다. 첫 번째는 만 13~34세 고객을 대상으로 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하는 이벤트입니다. 두 번째는 에이닷 T 멤버십 쿠폰함에 특정 시크릿코드('에이닷이빵쏜닷')를 입력하면 뚜레쥬...
2025-09-11 11:15:53,627 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-11 11:15:53,627 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-11 11:15:53,627 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-11 11:15:53,628 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-11 11:15:53,628 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-11 11:15:53,628 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-11 11:15:53,628 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-11 11:15:53,628 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:15:53,628 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-11 11:15:53,628 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-11 11:15:53,972 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-11 11:15:53,972 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:15:53,972 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.479초
2025-09-11 11:15:53,972 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-11 11:15:53,972 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-11 11:15:53,972 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 11:15:53,972 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-11 11:15:53,972 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-11 11:15:53,972 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-11 11:15:53,972 - __main__ - INFO - 추출 완료: 26.960초
2025-09-11 11:15:53,973 - werkzeug - INFO - 127.0.0.1 - - [11/Sep/2025 11:15:53] "POST /extract HTTP/1.1" 200 -
2025-09-11 11:21:14,962 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-11 11:21:14,963 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-11 11:21:14,963 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-11 11:21:14,963 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:21:14,963 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:21:14,963 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:21:14,963 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:21:14,965 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-11 11:21:15,035 - mms_extractor - INFO - Using device: mps
2025-09-11 11:21:15,035 - mms_extractor - INFO - _initialize_device 실행완료: 0.07초
2025-09-11 11:21:15,035 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:21:15,036 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:21:15,036 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:21:15,036 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:21:15,036 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:21:15,036 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:21:15,036 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:21:18,913 - mms_extractor - INFO - Model loaded on mps
2025-09-11 11:21:18,913 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 3.88초
2025-09-11 11:21:18,914 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:21:19,387 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:21:19,387 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.47초
2025-09-11 11:21:19,387 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-11 11:21:19,387 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:19,387 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-11 11:21:19,387 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:19,387 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-11 11:21:19,387 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:21:19,387 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:21:19,387 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:21:19,387 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:21:19,387 - mms_extractor - ERROR - 상품 정보 로드 실패: [Errno 2] No such file or directory: './data/offer_master_data.csv'
2025-09-11 11:21:19,416 - mms_extractor - ERROR - 오류 상세: Traceback (most recent call last):
  File "/Users/1110566/workspace/AgenticWorkflow/mms_extractor_dev/mms_extractor.py", line 990, in _load_item_data
    item_pdf_raw = pd.read_csv(csv_path)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/parsers/readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "/opt/homebrew/Caskroom/miniforge/base/lib/python3.12/site-packages/pandas/io/common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: './data/offer_master_data.csv'

2025-09-11 11:21:19,417 - mms_extractor - WARNING - 빈 DataFrame으로 fallback 설정됨
2025-09-11 11:21:19,417 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (0, 4)
2025-09-11 11:21:19,417 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn']
2025-09-11 11:21:19,417 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:21:19,417 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:21:19,417 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (0, 4)
2025-09-11 11:21:19,422 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:21:19,422 - mms_extractor - INFO - null이 아닌 상품명 수: 0개
2025-09-11 11:21:19,422 - mms_extractor - INFO - 기존 item_nm_alias 데이터가 없어 item_nm에서 별칭을 생성합니다.
2025-09-11 11:21:19,423 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 0 -> 0
2025-09-11 11:21:19,423 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:21:19,423 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (0, 5)
2025-09-11 11:21:19,423 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:21:19,424 - mms_extractor - INFO - 정지어 로드 완료: 143개
2025-09-11 11:21:19,424 - mms_extractor - INFO - 로드된 정지어 수: 143개
2025-09-11 11:21:19,424 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:21:19,424 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:21:19,424 - mms_extractor - INFO - 등록할 고유 별칭 수: 0개
2025-09-11 11:21:19,424 - mms_extractor - INFO - 유효한 별칭 수: 0개
2025-09-11 11:21:19,424 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 0개 성공, 0개 실패
2025-09-11 11:21:19,424 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:21:19,424 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:21:19,432 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:21:19,432 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:21:19,669 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:21:19,669 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:21:19,669 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:21:20,209 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:21:20,209 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:21:20,209 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:20,209 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:21:20,210 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:20,210 - mms_extractor - INFO - ✅ 상품 데이터: (0, 5)
2025-09-11 11:21:20,210 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:21:20,210 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:21:20,210 - mms_extractor - INFO - ✅ 정지어: 143개
2025-09-11 11:21:20,210 - mms_extractor - INFO - _load_data 실행완료: 0.82초
2025-09-11 11:21:20,210 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:21:20,210 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-11 11:21:20,210 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-11 11:21:20,210 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-11 11:21:20,210 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-11 11:21:20,210 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-11 11:21:20,210 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-11 11:21:20,210 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-11 11:21:20,210 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-11 11:21:20,210 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-11 11:21:20,210 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-11 11:21:20,235 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.25.54:8000
2025-09-11 11:21:20,235 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-11 11:21:27,553 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-11 11:21:27,554 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-11 11:21:27,554 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-11 11:21:27,554 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-11 11:21:27,554 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-11 11:21:27,554 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:27,554 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:21:27,554 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:27,554 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-11 11:21:27,554 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-11 11:21:27,554 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-11 11:21:27,554 - mms_extractor - INFO - 데이터 소스: local
2025-09-11 11:21:27,554 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-11 11:21:27,554 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-11 11:21:27,554 - mms_extractor - INFO - LLM 모델: ax
2025-09-11 11:21:27,554 - mms_extractor - INFO - 상품 데이터 크기: (0, 5)
2025-09-11 11:21:27,554 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:21:27,554 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:21:27,554 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:21:27,554 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-11 11:21:27,555 - mms_extractor - ERROR - 상품 데이터가 비어있습니다! 엔티티 추출 불가
2025-09-11 11:21:27,555 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.00초
2025-09-11 11:21:27,555 - mms_extractor - INFO - 추출된 후보 엔티티: []
2025-09-11 11:21:27,555 - mms_extractor - INFO - 매칭된 상품 정보: (0, 0)
2025-09-11 11:21:27,555 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:21:27,680 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:21:27,680 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:21:27,680 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-11 11:21:27,680 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:21:27,680 - mms_extractor - WARNING - 후보 아이템이 없습니다!
2025-09-11 11:21:27,680 - mms_extractor - WARNING - 이는 다음 중 하나의 문제일 수 있습니다:
2025-09-11 11:21:27,680 - mms_extractor - WARNING - 1. 상품 데이터 로딩 실패
2025-09-11 11:21:27,680 - mms_extractor - WARNING - 2. 엔티티 추출 실패
2025-09-11 11:21:27,680 - mms_extractor - WARNING - 3. 유사도 매칭 임계값 문제
2025-09-11 11:21:27,680 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:21:27,680 - mms_extractor - INFO - 구성된 프롬프트 길이: 5790 문자
2025-09-11 11:21:27,680 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:21:27,680 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5790)
2025-09-11 11:21:27,680 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:21:27,680 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:21:34,909 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:21:34,914 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-11 11:21:34,914 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-11 11:21:34,914 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:21:34,914 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:21:34,914 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:21:34,914 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-11 11:21:34,914 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:21:34,914 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-11 11:21:34,929 - mms_extractor - ERROR - LLM 기반 엔티티 추출 실패: 'item_nm_alias'
2025-09-11 11:21:34,930 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 0.02초
2025-09-11 11:21:34,940 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:21:34,940 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:34,940 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:21:34,940 - mms_extractor - INFO - ============================================================
2025-09-11 11:21:34,940 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-11 11:21:34,940 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-11 11:21:34,940 - mms_extractor - INFO - 상품 수: 2개
2025-09-11 11:21:34,940 - mms_extractor - INFO - 채널 수: 4개
2025-09-11 11:21:34,940 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-11 11:21:34,940 - mms_extractor - INFO - process_message 실행완료: 7.39초
2025-09-11 11:21:34,940 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-11 11:21:34,940 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-11 11:21:34,940 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-11 11:21:34,941 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x34f3b6ff0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x34f3b7020> root_client=<openai.OpenAI object at 0x34f3b75f0> root_async_client=<openai.AsyncOpenAI object at 0x34f3b72c0> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-11 11:21:34,941 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-11 11:21:34,941 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-11 11:21:53,825 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:21:53,827 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1871자
2025-09-11 11:21:53,827 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 만 13~34세 고객에게 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하고, 에이닷 T 멤버십 쿠폰함에 '에이닷이빵쏜닷' 시크릿코드를 입력하면 뚜레쥬르 데일리우유식빵 무료 쿠폰을 제공하는 이벤트를 안내하고 있다.

[식별된 가치 제안 목록]
...
2025-09-11 11:21:53,827 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-11 11:21:53,827 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-11 11:21:53,827 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-11 11:21:53,828 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-11 11:21:53,828 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-11 11:21:53,828 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-11 11:21:53,828 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-11 11:21:53,828 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:21:53,828 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-11 11:21:53,829 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-11 11:21:54,284 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-11 11:21:54,284 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:21:54,284 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.344초
2025-09-11 11:21:54,284 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-11 11:21:54,284 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-11 11:21:54,284 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 11:21:54,284 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-11 11:21:54,284 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-11 11:21:54,284 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-11 11:21:54,284 - __main__ - INFO - 추출 완료: 26.731초
2025-09-11 11:21:54,286 - werkzeug - INFO - 127.0.0.1 - - [11/Sep/2025 11:21:54] "POST /extract HTTP/1.1" 200 -
2025-09-11 11:24:58,186 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-11 11:24:58,186 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-11 11:24:58,186 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-11 11:24:58,187 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-11 11:24:58,187 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-11 11:24:58,187 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-11 11:24:58,187 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-11 11:24:58,188 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-11 11:24:58,206 - mms_extractor - INFO - Using device: mps
2025-09-11 11:24:58,206 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-11 11:24:58,206 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-11 11:24:58,206 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-11 11:24:58,207 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-11 11:24:58,207 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-11 11:24:58,207 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-11 11:24:58,207 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-11 11:24:58,207 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-11 11:24:59,055 - mms_extractor - INFO - Model loaded on mps
2025-09-11 11:24:59,056 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 0.85초
2025-09-11 11:24:59,056 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-11 11:24:59,476 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-11 11:24:59,476 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.42초
2025-09-11 11:24:59,476 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-11 11:24:59,477 - mms_extractor - INFO - ============================================================
2025-09-11 11:24:59,477 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-11 11:24:59,477 - mms_extractor - INFO - ============================================================
2025-09-11 11:24:59,477 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-11 11:24:59,477 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-11 11:24:59,477 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-11 11:24:59,477 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-11 11:24:59,477 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-11 11:24:59,544 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (16316, 9)
2025-09-11 11:24:59,544 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-11 11:24:59,544 - mms_extractor - INFO - 컬럼 매핑: {'ITEM_NM': 'item_nm', 'ITEM_ID': 'item_id', 'ITEM_DESC': 'item_desc', 'ITEM_DMN': 'item_dmn', 'ITEM_ALS': 'item_nm_alias'}
2025-09-11 11:24:59,547 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (16316, 5)
2025-09-11 11:24:59,548 - mms_extractor - INFO - item_nm_alias에서 16316개 null 값을 item_nm으로 채웁니다.
2025-09-11 11:24:59,549 - mms_extractor - INFO - 로컬 모드 최종 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 11:24:59,549 - mms_extractor - INFO - item_nm_alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 11:24:59,549 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70', '뉴스콤 관제30', '구축-Smart PayHub']
2025-09-11 11:24:59,550 - mms_extractor - INFO - 로컬 모드 데이터 샘플 (5개 행):
2025-09-11 11:24:59,551 - mms_extractor - INFO - [{'item_nm': '우주패스 Netflix 인증', 'item_id': 'NA00008735', 'item_desc': '우주패스 Netflix 인증&&T 우주패스 Netflix를 인증하면 가입되는 더미코드&&', 'item_dmn': 'P', 'item_nm_alias': '우주패스 Netflix 인증', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008735', 'oper_dt_hms': '20250101000000'}, {'item_nm': 'LTE-M10(24년_간선망)', 'item_id': 'NA00008782', 'item_desc': 'LTE-M10(24년_간선망)&&ㅇ 한전 AMI 간선망용 무선모뎀 사업수주에 따른 신규 전용상품(요금제) 출시   - 수주일자 : 4/3  - 수량 : 13,656대 (Cat.1 모뎀)  - 상품명 : LTE-M10(24년_한전 간선망)  - 제안요금 : 711원(Vat별도)     > “LTE-M 10 요금제” + “기업데이터 청구” 형태       >  총91MB 제공  - 부가서비스 상품명 : 한전_부가_PGW#37    > UUT 211 적용&&', 'item_dmn': 'P', 'item_nm_alias': 'LTE-M10(24년_간선망)', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008782', 'oper_dt_hms': '20250101000000'}, {'item_nm': '유선대체 70', 'item_id': 'NA00005883', 'item_desc': '유선대체 70&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건', 'item_dmn': 'P', 'item_nm_alias': '유선대체 70', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00005883', 'oper_dt_hms': '20250101000000'}, {'item_nm': '뉴스콤 관제30', 'item_id': 'NB00000764', 'item_desc': '뉴스콤 관제30&&고객사의 메인망은 초고속인터넷이고 백업망으로 당사의 이동통신망을 이용하는 무선라우터를 공급하는 경우, 원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off/ 원격조치 불가능시 출동후 장애 조치 서비스&&원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off / 원격조치 불가능시 출동후 장애 조치 서비스', 'item_dmn': 'P', 'item_nm_alias': '뉴스콤 관제30', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NB00000764', 'oper_dt_hms': '20250101000000'}, {'item_nm': '구축-Smart PayHub', 'item_id': 'PD00013310', 'item_desc': '구축-Smart PayHub&&&&', 'item_dmn': 'P', 'item_nm_alias': '구축-Smart PayHub', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'PD00013310', 'oper_dt_hms': '20250101000000'}]
2025-09-11 11:24:59,553 - mms_extractor - INFO - 도메인 필터링: 16316 -> 10551 (제외된 도메인: ['R'])
2025-09-11 11:24:59,553 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 10551개 상품 ===
2025-09-11 11:24:59,553 - mms_extractor - INFO - 최종 데이터 스키마: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 11:24:59,553 - mms_extractor - INFO - 최종 데이터 타입: {'item_nm': dtype('O'), 'item_id': dtype('O'), 'item_desc': dtype('O'), 'item_dmn': dtype('O'), 'item_nm_alias': dtype('O'), 'item_ctg': dtype('O'), 'item_emb_vec': dtype('O'), 'ofer_cd': dtype('O'), 'oper_dt_hms': dtype('O')}
2025-09-11 11:24:59,553 - mms_extractor - INFO - 모든 중요 컬럼이 존재합니다.
2025-09-11 11:24:59,554 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (10551, 9)
2025-09-11 11:24:59,554 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-11 11:24:59,554 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-11 11:24:59,554 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-11 11:24:59,554 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (10551, 9)
2025-09-11 11:24:59,555 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-11 11:24:59,555 - mms_extractor - INFO - null이 아닌 상품명 수: 10551개
2025-09-11 11:24:59,555 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 11:24:59,555 - mms_extractor - INFO - 기존 item_nm_alias 데이터를 발견했습니다. 별칭 규칙과 병합합니다.
2025-09-11 11:24:59,556 - mms_extractor - INFO - 기존 alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-11 11:24:59,686 - mms_extractor - INFO - 기존 ITEM_ALS 데이터와 별칭 규칙이 성공적으로 병합되었습니다.
2025-09-11 11:24:59,692 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 10551 -> 21522
2025-09-11 11:24:59,692 - mms_extractor - INFO - 별칭 적용 후 샘플: ['우주PASS Netflix 인증', '우주패스 넷플릭스 인증', '우주패스 Netflix 인증', '우주Pass Netflix 인증', '우주pass Netflix 인증']
2025-09-11 11:24:59,692 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-11 11:24:59,693 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (21522, 9)
2025-09-11 11:24:59,693 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-11 11:24:59,694 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-11 11:24:59,694 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-11 11:24:59,694 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-11 11:24:59,694 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-11 11:24:59,696 - mms_extractor - INFO - 등록할 고유 별칭 수: 16403개
2025-09-11 11:24:59,697 - mms_extractor - INFO - 유효한 별칭 수: 16403개
2025-09-11 11:24:59,697 - mms_extractor - INFO - 등록할 별칭 샘플: ['우주PASS Netflix 인증', '우주패스 넷플릭스 인증', '우주패스 Netflix 인증', '우주Pass Netflix 인증', '우주pass Netflix 인증']
2025-09-11 11:24:59,711 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 16403개 성공, 0개 실패
2025-09-11 11:24:59,711 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-11 11:24:59,711 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-11 11:24:59,712 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-11 11:24:59,712 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-11 11:24:59,871 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-11 11:24:59,871 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-11 11:24:59,871 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-11 11:25:00,370 - mms_extractor - INFO - 조직 정보 로드 완료: 259233개 조직
2025-09-11 11:25:00,370 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (259233, 8)
2025-09-11 11:25:00,370 - mms_extractor - INFO - ============================================================
2025-09-11 11:25:00,370 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-11 11:25:00,370 - mms_extractor - INFO - ============================================================
2025-09-11 11:25:00,370 - mms_extractor - INFO - ✅ 상품 데이터: (21522, 9)
2025-09-11 11:25:00,370 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-11 11:25:00,370 - mms_extractor - INFO - ✅ 조직 데이터: (259233, 8)
2025-09-11 11:25:00,370 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-11 11:25:00,370 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-11 11:25:00,371 - mms_extractor - INFO - 고유 상품명 수: 6847개
2025-09-11 11:25:00,373 - mms_extractor - INFO - 고유 별칭 수: 16403개
2025-09-11 11:25:00,374 - mms_extractor - INFO - 고유 상품ID 수: 10551개
2025-09-11 11:25:00,374 - mms_extractor - INFO - _load_data 실행완료: 0.90초
2025-09-11 11:25:00,374 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-11 11:25:00,374 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-11 11:25:00,374 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-11 11:25:00,374 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-11 11:25:00,374 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-11 11:25:00,374 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-11 11:25:00,374 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-11 11:25:00,374 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-11 11:25:00,374 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-11 11:25:00,374 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-11 11:25:00,374 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-11 11:25:00,395 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.25.54:8000
2025-09-11 11:25:00,395 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-11 11:25:32,149 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 370자
2025-09-11 11:25:32,149 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-11 11:25:32,149 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-11 11:25:32,150 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 ...
2025-09-11 11:25:32,150 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-11 11:25:32,150 - mms_extractor - INFO - ============================================================
2025-09-11 11:25:32,150 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-11 11:25:32,150 - mms_extractor - INFO - ============================================================
2025-09-11 11:25:32,150 - mms_extractor - INFO - 메시지 내용: 광고 제목:[SK텔레콤] 2월 0 day 혜택 안내
광고 내용:(광고)[SKT] 2월 0 day 혜택 안내__[2월 10일(토) 혜택]_만 13~34세 고객이라면_베어유 모든 강의 14일 무료 수강 쿠폰 드립니다!_(선착순 3만 명 증정)_▶ 자세히 보기: http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3...
2025-09-11 11:25:32,150 - mms_extractor - INFO - 메시지 길이: 370 문자
2025-09-11 11:25:32,150 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-11 11:25:32,150 - mms_extractor - INFO - 데이터 소스: local
2025-09-11 11:25:32,150 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-11 11:25:32,150 - mms_extractor - INFO - 엔티티 추출 모드: llm
2025-09-11 11:25:32,150 - mms_extractor - INFO - LLM 모델: ax
2025-09-11 11:25:32,150 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-11 11:25:32,150 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-11 11:25:32,150 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-11 11:25:32,150 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-11 11:25:32,150 - mms_extractor - INFO - 처리할 메시지 길이: 370 문자
2025-09-11 11:25:32,152 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-11 11:25:32,670 - mms_extractor - INFO - 분할된 문장 수: 14개
2025-09-11 11:25:32,670 - mms_extractor - INFO - 필터링된 문장들: ['광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', ' 토 혜택 ', '만 13 고객이라면']...
2025-09-11 11:25:32,672 - mms_extractor - INFO - 전체 토큰 수: 138개
2025-09-11 11:25:32,672 - mms_extractor - INFO - NNP 태그 토큰들: ['SK텔레콤', '에이닷', '시크릿', '에이닷', '에이닷이빵쏜닷', '뚜레쥬르', '데일리', '시크릿']
2025-09-11 11:25:32,672 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['데일리', '시크릿', '에이닷이빵쏜닷', '뚜레쥬르']
2025-09-11 11:25:32,672 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-11 11:25:40,283 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (3746, 3)
2025-09-11 11:25:40,283 - mms_extractor - INFO - 퍼지 매칭 성공: 3746개 결과
2025-09-11 11:25:40,284 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '해지번호안내', 'sim': 0.5}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'T_변경번호안내', 'sim': 0.4}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '시내버스', 'sim': 0.4}]
2025-09-11 11:25:40,284 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-11 11:25:40,341 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (3746, 3)
2025-09-11 11:25:40,342 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '해지번호안내', 'sim': 0.26666666666666666}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': 'T_변경번호안내', 'sim': 0.25}, {'sent': '광고 제목 SK텔레콤 0 day 혜택 안내 광고 내용 광고 SKT 0 day 혜택 안내', 'item_nm_alias': '시내버스', 'sim': 0.2}]
2025-09-11 11:25:40,342 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-11 11:25:40,345 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 0개
2025-09-11 11:25:40,347 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 0개
2025-09-11 11:25:40,347 - mms_extractor - INFO - 통합된 후보 아이템 수: 0개
2025-09-11 11:25:40,347 - mms_extractor - WARNING - 통합된 후보 아이템이 없습니다!
2025-09-11 11:25:40,348 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 8.20초
2025-09-11 11:25:40,348 - mms_extractor - INFO - 추출된 후보 엔티티: []
2025-09-11 11:25:40,348 - mms_extractor - INFO - 매칭된 상품 정보: (0, 0)
2025-09-11 11:25:40,348 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-11 11:25:40,603 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-11 11:25:40,603 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-11 11:25:40,603 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 387 문자
2025-09-11 11:25:40,603 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-11 11:25:40,603 - mms_extractor - WARNING - 후보 아이템이 없습니다!
2025-09-11 11:25:40,603 - mms_extractor - WARNING - 이는 다음 중 하나의 문제일 수 있습니다:
2025-09-11 11:25:40,603 - mms_extractor - WARNING - 1. 상품 데이터 로딩 실패
2025-09-11 11:25:40,603 - mms_extractor - WARNING - 2. 엔티티 추출 실패
2025-09-11 11:25:40,603 - mms_extractor - WARNING - 3. 유사도 매칭 임계값 문제
2025-09-11 11:25:40,603 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-11 11:25:40,603 - mms_extractor - INFO - 구성된 프롬프트 길이: 5790 문자
2025-09-11 11:25:40,603 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-11 11:25:40,603 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 5790)
2025-09-11 11:25:40,603 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-11 11:25:40,603 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-11 11:25:47,300 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:25:47,304 - mms_extractor - INFO - LLM 응답 길이: 921 문자
2025-09-11 11:25:47,304 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SK텔레콤] 2월 0 day 혜택 안내",
    "purpose": [
        "혜택 안내",
        "쿠폰 제공 안내",
        "이벤트 응모 유도"
    ],
    "product": [
        {
            "name": "베어유 모든 강의",
            "action": "사용"
        },
        {
            "name": "뚜레쥬르 데일리우유식빵",
            "action": "구매"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc",
            "action": "추가 정보"
        },
...
2025-09-11 11:25:47,304 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-11 11:25:47,305 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-11 11:25:47,305 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-11 11:25:47,305 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SK텔레콤] 2월 0 day 혜택 안내', 'purpose': ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도'], 'product': [{'name': '베어유 모든 강의', 'action': '사용'}, {'name': '뚜레쥬르 데일리우유식빵', 'action': '구매'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/t.do?m=#61&s=24589&a=&u=https://bit.ly/3SfBjjc', 'action': '추가 정보'}, {'type': 'URL', 'value': 'https://bit.ly/3HCUhLM', 'action': '참여'}, {'type': '전화번호', 'value': '1558', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['사용법/혜택/이벤트안내_SKT', '사용법/혜택/이벤트안내_T멤버십']}
2025-09-11 11:25:47,305 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-11 11:25:47,305 - mms_extractor - INFO - LLM 추출 엔티티: ['베어유 모든 강의', '뚜레쥬르 데일리우유식빵']
2025-09-11 11:25:47,474 - mms_extractor - INFO - 프롬프트 저장됨: entity_extraction_prompt (길이: 3538)
2025-09-11 11:25:47,474 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 2
2025-09-11 11:25:47,474 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt', 'entity_extraction_prompt']
2025-09-11 11:25:48,619 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:25:48,742 - mms_extractor - INFO - extract_entities_by_llm 실행완료: 1.44초
2025-09-11 11:25:48,746 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-11 11:25:48,746 - mms_extractor - INFO - ============================================================
2025-09-11 11:25:48,746 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-11 11:25:48,746 - mms_extractor - INFO - ============================================================
2025-09-11 11:25:48,746 - mms_extractor - INFO - 제목: [SK텔레콤] 2월 0 day 혜택 안내
2025-09-11 11:25:48,746 - mms_extractor - INFO - 목적: ['혜택 안내', '쿠폰 제공 안내', '이벤트 응모 유도']
2025-09-11 11:25:48,746 - mms_extractor - INFO - 상품 수: 1개
2025-09-11 11:25:48,746 - mms_extractor - INFO - 채널 수: 4개
2025-09-11 11:25:48,746 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-11 11:25:48,746 - mms_extractor - INFO - process_message 실행완료: 16.60초
2025-09-11 11:25:48,746 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-11 11:25:48,746 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-11 11:25:48,746 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 370자
2025-09-11 11:25:48,747 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x34d377bf0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x3588c5e80> root_client=<openai.OpenAI object at 0x34d3b57f0> root_async_client=<openai.AsyncOpenAI object at 0x3588c5d90> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-11 11:25:48,747 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-11 11:25:48,747 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3355자
2025-09-11 11:26:08,282 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 1884자
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SK텔레콤은 2월 0 day 혜택으로 두 가지 주요 프로모션을 안내하고 있습니다. 첫 번째는 만 13~34세 고객을 대상으로 베어유 강의 14일 무료 수강 쿠폰을 선착순 3만 명에게 제공하는 이벤트입니다. 두 번째는 에이닷 T 멤버십 쿠폰함에 특정 시크릿코드('에이닷이빵쏜닷')를 입력하면 뚜레쥬...
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 89자
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 5, 엣지 수: 3
2025-09-11 11:26:08,283 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '베어유쿠폰:수령', '앱:접속', '시크릿코드:입력', '식빵쿠폰:수령']
2025-09-11 11:26:08,284 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '베어유쿠폰:수령'), ('앱:접속', '시크릿코드:입력'), ('시크릿코드:입력', '식빵쿠폰:수령')]
2025-09-11 11:26:08,284 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-11 11:26:08,284 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:26:08,284 - utils - INFO - 📊 입력 그래프 - 노드 수: 5, 엣지 수: 3
2025-09-11 11:26:08,284 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-11 11:26:08,507 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d.png
2025-09-11 11:26:08,508 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_7624a7d9dc579604383d572d683a433d2c942896ac4eaab92562f8ebd1814b0d
2025-09-11 11:26:08,508 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.761초
2025-09-11 11:26:08,508 - mms_extractor - INFO - 📏 DAG 섹션 길이: 89자
2025-09-11 11:26:08,508 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)
(앱:접속) -[접속하면]-> (시크릿코드:입력)
(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)...
2025-09-11 11:26:08,508 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-11 11:26:08,508 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 3개
2025-09-11 11:26:08,508 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 3자
2025-09-11 11:26:08,508 - __main__ - INFO - DAG 내용 미리보기: ['(시크릿코드:입력) -[입력하면]-> (식빵쿠폰:수령)', '(앱:접속) -[접속하면]-> (시크릿코드:입력)', '(웹사이트:접속) -[접속하면]-> (베어유쿠폰:수령)']...
2025-09-11 11:26:08,508 - __main__ - INFO - 추출 완료: 36.359초
2025-09-11 11:26:08,509 - werkzeug - INFO - 127.0.0.1 - - [11/Sep/2025 11:26:08] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:15:05,955 - __main__ - INFO - CLI 데이터 소스 설정: local
2025-09-17 11:15:05,955 - __main__ - INFO - 전역 추출기 초기화 중...
2025-09-17 11:15:05,955 - __main__ - INFO - 데이터 소스로 전역 추출기 초기화 중: local
2025-09-17 11:15:05,955 - mms_extractor - INFO - 🚀 MMSExtractor 초기화 시작
2025-09-17 11:15:05,955 - mms_extractor - INFO - ⚙️ 기본 설정 적용 중...
2025-09-17 11:15:05,955 - mms_extractor - INFO - 📋 표준 추출 모드 (DAG 비활성화)
2025-09-17 11:15:05,955 - mms_extractor - INFO - 🔑 환경변수 로드 중...
2025-09-17 11:15:05,956 - mms_extractor - INFO - 💻 디바이스 설정 중...
2025-09-17 11:15:05,977 - mms_extractor - INFO - Using device: mps
2025-09-17 11:15:05,977 - mms_extractor - INFO - _initialize_device 실행완료: 0.02초
2025-09-17 11:15:05,977 - mms_extractor - INFO - 🤖 LLM 모델 초기화 중...
2025-09-17 11:15:05,978 - mms_extractor - INFO - LLM 초기화 완료: ax (skt/ax4)
2025-09-17 11:15:05,978 - mms_extractor - INFO - _initialize_llm 실행완료: 0.00초
2025-09-17 11:15:05,978 - mms_extractor - INFO - 🧠 임베딩 모델 로드 중...
2025-09-17 11:15:05,978 - mms_extractor - INFO - Loading model from ./models/ko-sbert-nli...
2025-09-17 11:15:05,978 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-09-17 11:15:05,978 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: ./models/ko-sbert-nli
2025-09-17 11:15:08,399 - mms_extractor - INFO - Model loaded on mps
2025-09-17 11:15:08,399 - mms_extractor - INFO - _initialize_embedding_model 실행완료: 2.42초
2025-09-17 11:15:08,399 - mms_extractor - INFO - 📝 NLP 도구 (Kiwi) 초기화 중...
2025-09-17 11:15:08,916 - mms_extractor - INFO - Kiwi 형태소 분석기 초기화 완료
2025-09-17 11:15:08,916 - mms_extractor - INFO - _initialize_kiwi 실행완료: 0.52초
2025-09-17 11:15:08,916 - mms_extractor - INFO - 📁 데이터 로드 중...
2025-09-17 11:15:08,916 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:08,916 - mms_extractor - INFO - 📊 데이터 로딩 시작
2025-09-17 11:15:08,916 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:08,916 - mms_extractor - INFO - 데이터 소스 모드: local
2025-09-17 11:15:08,916 - mms_extractor - INFO - 1️⃣ 상품 정보 로드 중...
2025-09-17 11:15:08,916 - mms_extractor - INFO - === 상품 정보 로드 시작 (모드: local) ===
2025-09-17 11:15:08,916 - mms_extractor - INFO - 로컬 CSV 파일에서 상품 정보 로드 중...
2025-09-17 11:15:08,917 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-17 11:15:08,988 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 데이터 크기: (16316, 9)
2025-09-17 11:15:08,988 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-17 11:15:08,988 - mms_extractor - INFO - 컬럼 매핑: {'ITEM_NM': 'item_nm', 'ITEM_ID': 'item_id', 'ITEM_DESC': 'item_desc', 'ITEM_DMN': 'item_dmn', 'ITEM_ALS': 'item_nm_alias'}
2025-09-17 11:15:08,994 - mms_extractor - INFO - 중복 제거 후 데이터 크기: (16316, 5)
2025-09-17 11:15:08,995 - mms_extractor - INFO - item_nm_alias에서 16316개 null 값을 item_nm으로 채웁니다.
2025-09-17 11:15:08,996 - mms_extractor - INFO - 로컬 모드 최종 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:15:08,996 - mms_extractor - INFO - item_nm_alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-17 11:15:08,996 - mms_extractor - INFO - 로컬 모드 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70', '뉴스콤 관제30', '구축-Smart PayHub']
2025-09-17 11:15:08,996 - mms_extractor - INFO - 로컬 모드 데이터 샘플 (5개 행):
2025-09-17 11:15:09,000 - mms_extractor - INFO - [{'item_nm': '우주패스 Netflix 인증', 'item_id': 'NA00008735', 'item_desc': '우주패스 Netflix 인증&&T 우주패스 Netflix를 인증하면 가입되는 더미코드&&', 'item_dmn': 'P', 'item_nm_alias': '우주패스 Netflix 인증', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008735', 'oper_dt_hms': '20250101000000'}, {'item_nm': 'LTE-M10(24년_간선망)', 'item_id': 'NA00008782', 'item_desc': 'LTE-M10(24년_간선망)&&ㅇ 한전 AMI 간선망용 무선모뎀 사업수주에 따른 신규 전용상품(요금제) 출시   - 수주일자 : 4/3  - 수량 : 13,656대 (Cat.1 모뎀)  - 상품명 : LTE-M10(24년_한전 간선망)  - 제안요금 : 711원(Vat별도)     > “LTE-M 10 요금제” + “기업데이터 청구” 형태       >  총91MB 제공  - 부가서비스 상품명 : 한전_부가_PGW#37    > UUT 211 적용&&', 'item_dmn': 'P', 'item_nm_alias': 'LTE-M10(24년_간선망)', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00008782', 'oper_dt_hms': '20250101000000'}, {'item_nm': '유선대체 70', 'item_id': 'NA00005883', 'item_desc': '유선대체 70&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건&&ㅇ 기본료 : 7,000원 (VAT포함 7,700원)_ㅇ 기본제공 : 데이터 120MB_ㅇ 특징_  - 월 제공 데이터 소진 후 30kbps로 속도 제어된 상태에서 사용하는 Data는 비과금 처리(월 기본료를 제외한 추가과금 없음)_  - 유선대체 요금제는 당사가 지정하는 012번호의 사물통신형 단말중에서 고정형결제기만 가입가능(단말 리스트 별도관리)_ㅇ 초과요율_  - Data : 월 제공 Data 소진 이후, 30Kbps로 속도 제어된 상태로 사용하는 Data는 비과금 처리(기본료를 초과하여 과금하지 않음)_  - 문자 : SMS 22원/건, 텍스트형MMS 33원/건, 멀티미디어형MMS 110원/건', 'item_dmn': 'P', 'item_nm_alias': '유선대체 70', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NA00005883', 'oper_dt_hms': '20250101000000'}, {'item_nm': '뉴스콤 관제30', 'item_id': 'NB00000764', 'item_desc': '뉴스콤 관제30&&고객사의 메인망은 초고속인터넷이고 백업망으로 당사의 이동통신망을 이용하는 무선라우터를 공급하는 경우, 원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off/ 원격조치 불가능시 출동후 장애 조치 서비스&&원격에서 무선라우터에 연결된 LTE망 장애여부 확인 / 원격 On-Off / 원격조치 불가능시 출동후 장애 조치 서비스', 'item_dmn': 'P', 'item_nm_alias': '뉴스콤 관제30', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'NB00000764', 'oper_dt_hms': '20250101000000'}, {'item_nm': '구축-Smart PayHub', 'item_id': 'PD00013310', 'item_desc': '구축-Smart PayHub&&&&', 'item_dmn': 'P', 'item_nm_alias': '구축-Smart PayHub', 'item_ctg': None, 'item_emb_vec': None, 'ofer_cd': 'PD00013310', 'oper_dt_hms': '20250101000000'}]
2025-09-17 11:15:09,003 - mms_extractor - INFO - 도메인 필터링: 16316 -> 10551 (제외된 도메인: ['R'])
2025-09-17 11:15:09,003 - mms_extractor - INFO - === 상품 정보 로드 최종 완료: 10551개 상품 ===
2025-09-17 11:15:09,003 - mms_extractor - INFO - 최종 데이터 스키마: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:15:09,003 - mms_extractor - INFO - 최종 데이터 타입: {'item_nm': dtype('O'), 'item_id': dtype('O'), 'item_desc': dtype('O'), 'item_dmn': dtype('O'), 'item_nm_alias': dtype('O'), 'item_ctg': dtype('O'), 'item_emb_vec': dtype('O'), 'ofer_cd': dtype('O'), 'oper_dt_hms': dtype('O')}
2025-09-17 11:15:09,003 - mms_extractor - INFO - 모든 중요 컬럼이 존재합니다.
2025-09-17 11:15:09,003 - mms_extractor - INFO - 상품 정보 로드 후 데이터 크기: (10551, 9)
2025-09-17 11:15:09,003 - mms_extractor - INFO - 상품 정보 컬럼들: ['item_nm', 'item_id', 'item_desc', 'item_dmn', 'item_nm_alias', 'item_ctg', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:15:09,003 - mms_extractor - INFO - 2️⃣ 별칭 규칙 적용 중...
2025-09-17 11:15:09,003 - mms_extractor - INFO - === 별칭 규칙 적용 시작 ===
2025-09-17 11:15:09,003 - mms_extractor - INFO - 별칭 규칙 적용 전 상품 데이터 크기: (10551, 9)
2025-09-17 11:15:09,008 - mms_extractor - INFO - 로드된 별칭 규칙 수: 167개
2025-09-17 11:15:09,008 - mms_extractor - INFO - null이 아닌 상품명 수: 10551개
2025-09-17 11:15:09,008 - mms_extractor - INFO - 별칭 적용 전 상품명 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-17 11:15:09,009 - mms_extractor - INFO - 기존 item_nm_alias 데이터를 발견했습니다. 별칭 규칙과 병합합니다.
2025-09-17 11:15:09,009 - mms_extractor - INFO - 기존 alias 샘플: ['우주패스 Netflix 인증', 'LTE-M10(24년_간선망)', '유선대체 70']
2025-09-17 11:15:09,150 - mms_extractor - INFO - 기존 ITEM_ALS 데이터와 별칭 규칙이 성공적으로 병합되었습니다.
2025-09-17 11:15:09,156 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: 10551 -> 21522
2025-09-17 11:15:09,157 - mms_extractor - INFO - 별칭 적용 후 샘플: ['우주PASS Netflix 인증', '우주패스 Netflix 인증', '우주Pass Netflix 인증', '우주패스 넷플릭스 인증', '우주pass Netflix 인증']
2025-09-17 11:15:09,157 - mms_extractor - INFO - 별칭 규칙 적용 완료: 167개 규칙
2025-09-17 11:15:09,157 - mms_extractor - INFO - 별칭 규칙 적용 후 데이터 크기: (21522, 9)
2025-09-17 11:15:09,157 - mms_extractor - INFO - 3️⃣ 정지어 로드 중...
2025-09-17 11:15:09,158 - mms_extractor - INFO - 정지어 로드 완료: 166개
2025-09-17 11:15:09,158 - mms_extractor - INFO - 로드된 정지어 수: 166개
2025-09-17 11:15:09,158 - mms_extractor - INFO - 4️⃣ Kiwi에 상품명 등록 중...
2025-09-17 11:15:09,158 - mms_extractor - INFO - === Kiwi에 상품명 등록 시작 ===
2025-09-17 11:15:09,160 - mms_extractor - INFO - 등록할 고유 별칭 수: 16403개
2025-09-17 11:15:09,160 - mms_extractor - INFO - 유효한 별칭 수: 16403개
2025-09-17 11:15:09,160 - mms_extractor - INFO - 등록할 별칭 샘플: ['우주PASS Netflix 인증', '우주패스 Netflix 인증', '우주Pass Netflix 인증', '우주패스 넷플릭스 인증', '우주pass Netflix 인증']
2025-09-17 11:15:09,175 - mms_extractor - INFO - Kiwi에 상품명 등록 완료: 16403개 성공, 0개 실패
2025-09-17 11:15:09,175 - mms_extractor - INFO - 5️⃣ 프로그램 분류 정보 로드 중...
2025-09-17 11:15:09,175 - mms_extractor - INFO - 프로그램 분류 정보 로딩 시작...
2025-09-17 11:15:09,180 - mms_extractor - INFO - 로컬 파일에서 프로그램 정보 로드: 25개
2025-09-17 11:15:09,181 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 시작...
2025-09-17 11:15:11,144 - mms_extractor - INFO - 프로그램 분류 임베딩 생성 완료: 25개 프로그램
2025-09-17 11:15:11,145 - mms_extractor - INFO - 프로그램 분류 정보 로드 후 데이터 크기: (25, 6)
2025-09-17 11:15:11,145 - mms_extractor - INFO - 6️⃣ 조직 정보 로드 중...
2025-09-17 11:15:11,145 - mms_extractor - INFO - === 조직 정보 로드 시작 (모드: local) ===
2025-09-17 11:15:11,145 - mms_extractor - INFO - 로컬 CSV 파일에서 조직 정보 로드 중...
2025-09-17 11:15:11,145 - mms_extractor - INFO - CSV 파일 경로: ./data/offer_master_data.csv
2025-09-17 11:15:11,214 - mms_extractor - INFO - 로컬 CSV에서 로드된 원본 조직 데이터 크기: (16316, 9)
2025-09-17 11:15:11,214 - mms_extractor - INFO - 로컬 CSV 원본 컬럼들: ['ITEM_ID', 'ITEM_NM', 'ITEM_DMN', 'ITEM_DESC', 'ITEM_CTG', 'ITEM_ALS', 'ITEM_EMB_VEC', 'OFER_CD', 'OPER_DT_HMS']
2025-09-17 11:15:11,216 - mms_extractor - INFO - 로컬 모드: ITEM_DMN='R' 필터링 후 데이터 크기: (5765, 9)
2025-09-17 11:15:11,216 - mms_extractor - INFO - 조직 데이터 샘플 (3개 행): [{'item_id': 'D15198_0020', 'item_nm': '가로수대리점 하늘도시점', 'item_dmn': 'R', 'item_desc': '인천 중구 하늘중앙로195번길 11,&&1층 105호(중산동)&&003202309011', 'item_ctg': '501', 'item_als': nan, 'item_emb_vec': nan, 'ofer_cd': '1430541517', 'oper_dt_hms': 20250909151123}, {'item_id': 'D13622_0398', 'item_nm': 'MD대리점 주엽직영점', 'item_dmn': 'R', 'item_desc': '경기 고양시 일산서구 중앙로 1426,&&(주엽동) 1층111호&&003109152662', 'item_ctg': '501', 'item_als': nan, 'item_emb_vec': nan, 'ofer_cd': '1430541945', 'oper_dt_hms': 20250909151123}, {'item_id': 'D15320_0001', 'item_nm': '강서대리점(온라인매장)', 'item_dmn': 'R', 'item_desc': '서울 양천구 남부순환로 354,&&1층 (신월동)&&007078567800', 'item_ctg': '501', 'item_als': nan, 'item_emb_vec': nan, 'ofer_cd': '1430542104', 'oper_dt_hms': 20250909151123}]
2025-09-17 11:15:11,216 - mms_extractor - INFO - === 조직 정보 로드 최종 완료: 5765개 조직 ===
2025-09-17 11:15:11,216 - mms_extractor - INFO - 최종 조직 데이터 스키마: ['item_id', 'item_nm', 'item_dmn', 'item_desc', 'item_ctg', 'item_als', 'item_emb_vec', 'ofer_cd', 'oper_dt_hms']
2025-09-17 11:15:11,217 - mms_extractor - INFO - 모든 중요 조직 컬럼이 정상적으로 로드되었습니다.
2025-09-17 11:15:11,217 - mms_extractor - INFO - 조직 정보 로드 후 데이터 크기: (5765, 9)
2025-09-17 11:15:11,217 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:11,217 - mms_extractor - INFO - 📋 데이터 로딩 완료 - 최종 상태 요약
2025-09-17 11:15:11,217 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:11,217 - mms_extractor - INFO - ✅ 상품 데이터: (21522, 9)
2025-09-17 11:15:11,217 - mms_extractor - INFO - ✅ 프로그램 데이터: (25, 6)
2025-09-17 11:15:11,217 - mms_extractor - INFO - ✅ 조직 데이터: (5765, 9)
2025-09-17 11:15:11,217 - mms_extractor - INFO - ✅ 정지어: 166개
2025-09-17 11:15:11,217 - mms_extractor - INFO - === 상품 데이터 상세 정보 ===
2025-09-17 11:15:11,218 - mms_extractor - INFO - 고유 상품명 수: 6847개
2025-09-17 11:15:11,220 - mms_extractor - INFO - 고유 별칭 수: 16403개
2025-09-17 11:15:11,221 - mms_extractor - INFO - 고유 상품ID 수: 10551개
2025-09-17 11:15:11,221 - mms_extractor - INFO - _load_data 실행완료: 2.30초
2025-09-17 11:15:11,221 - mms_extractor - INFO - ✅ MMSExtractor 초기화 완료
2025-09-17 11:15:11,221 - __main__ - INFO - 전역 추출기 초기화 완료
2025-09-17 11:15:11,221 - __main__ - INFO - 파싱된 인자: host=0.0.0.0, port=8000, debug=False
2025-09-17 11:15:11,221 - __main__ - INFO - ✅ 전역 추출기 초기화 완료, 요청 처리 준비됨
2025-09-17 11:15:11,221 - __main__ - INFO - MMS 추출기 API 서버를 0.0.0.0:8000에서 시작합니다
2025-09-17 11:15:11,221 - __main__ - INFO - 사용 가능한 엔드포인트:
2025-09-17 11:15:11,221 - __main__ - INFO -   GET  /health - 헬스체크
2025-09-17 11:15:11,221 - __main__ - INFO -   GET  /models - 사용 가능한 모델 목록
2025-09-17 11:15:11,221 - __main__ - INFO -   GET  /status - 서버 상태 조회
2025-09-17 11:15:11,221 - __main__ - INFO -   POST /extract - 단일 메시지 추출
2025-09-17 11:15:11,221 - __main__ - INFO -   POST /extract/batch - 다중 메시지 배치 추출
2025-09-17 11:15:11,239 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://172.23.112.54:8000
2025-09-17 11:15:11,239 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-17 11:15:18,406 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:15:18] "GET /health HTTP/1.1" 200 -
2025-09-17 11:15:20,776 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:15:20] "GET /health HTTP/1.1" 200 -
2025-09-17 11:15:20,809 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:15:20] "GET /health HTTP/1.1" 200 -
2025-09-17 11:15:22,388 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:15:22] "GET /health HTTP/1.1" 200 -
2025-09-17 11:15:22,399 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-17 11:15:22,400 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 11:15:22,400 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 11:15:22,400 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-17 11:15:22,400 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 11:15:22,400 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:22,400 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 11:15:22,400 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:22,400 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-17 11:15:22,400 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-17 11:15:22,400 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 11:15:22,400 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 11:15:22,400 - mms_extractor - INFO - 상품 정보 추출 모드: nlp
2025-09-17 11:15:22,400 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 11:15:22,400 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 11:15:22,401 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 11:15:22,401 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 11:15:22,401 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 11:15:22,401 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 11:15:22,401 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-17 11:15:22,403 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 11:15:22,925 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-17 11:15:22,926 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-17 11:15:22,930 - mms_extractor - INFO - 전체 토큰 수: 240개
2025-09-17 11:15:22,930 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-17 11:15:22,930 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix']
2025-09-17 11:15:22,931 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 11:15:29,741 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (2742, 3)
2025-09-17 11:15:29,742 - mms_extractor - INFO - 퍼지 매칭 성공: 2742개 결과
2025-09-17 11:15:29,742 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.4285714285714286}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.4285714285714286}]
2025-09-17 11:15:29,742 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 11:15:29,818 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (2742, 3)
2025-09-17 11:15:29,818 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.4666666666666667}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.30000000000000004}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.30000000000000004}]
2025-09-17 11:15:29,818 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 11:15:29,820 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 71개
2025-09-17 11:15:29,822 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-17 11:15:29,822 - mms_extractor - INFO - 통합된 후보 아이템 수: 75개
2025-09-17 11:15:29,825 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:15:29,827 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (37, 2)
2025-09-17 11:15:29,827 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-17 11:15:29,828 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 7.43초
2025-09-17 11:15:29,828 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:15:29,828 - mms_extractor - INFO - 매칭된 상품 정보: (37, 2)
2025-09-17 11:15:29,828 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 11:15:30,959 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 11:15:30,959 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 11:15:30,959 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-17 11:15:30,959 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 11:15:30,959 - mms_extractor - INFO - 후보 아이템 리스트 크기: 57개
2025-09-17 11:15:30,959 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:15:30,959 - mms_extractor - INFO - extra_item_pdf 크기: (37, 2)
2025-09-17 11:15:30,959 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 11:15:30,960 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}]
2025-09-17 11:15:30,961 - mms_extractor - INFO - NLP 모드: 제품 요소 준비 완료 - 37개
2025-09-17 11:15:30,961 - mms_extractor - INFO - NLP 모드 제품 요소 샘플: [{'name': 'FLO 콘텐츠 팩', 'action': '기타'}, {'name': 'FLO 콘텐츠 팩 플러스', 'action': '기타'}]
2025-09-17 11:15:30,961 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 11:15:30,961 - mms_extractor - INFO - 구성된 프롬프트 길이: 8276 문자
2025-09-17 11:15:30,961 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: False
2025-09-17 11:15:30,961 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 8276)
2025-09-17 11:15:30,961 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 11:15:30,961 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 11:15:37,539 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:15:37,551 - mms_extractor - INFO - LLM 응답 길이: 855 문자
2025-09-17 11:15:37,551 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "가입"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "가입"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http://t...
2025-09-17 11:15:37,551 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 11:15:37,551 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 11:15:37,551 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 11:15:37,552 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': '우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '가입'}, {'name': 'Wavve 콘텐츠 팩', 'action': '가입'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-17 11:15:37,552 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 11:15:37,552 - mms_extractor - INFO - LLM 추출 엔티티: ['우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-17 11:15:37,651 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 11:15:37,651 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:37,651 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 11:15:37,651 - mms_extractor - INFO - ============================================================
2025-09-17 11:15:37,651 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-17 11:15:37,651 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-17 11:15:37,651 - mms_extractor - INFO - 상품 수: 3개
2025-09-17 11:15:37,651 - mms_extractor - INFO - 채널 수: 3개
2025-09-17 11:15:37,651 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 11:15:37,651 - mms_extractor - INFO - process_message 실행완료: 15.25초
2025-09-17 11:15:37,651 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 11:15:37,652 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 11:15:37,652 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-17 11:15:37,652 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x126c169f0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x126c16d50> root_client=<openai.OpenAI object at 0x126c32690> root_async_client=<openai.AsyncOpenAI object at 0x126c16b10> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 11:15:37,652 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 11:15:37,652 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-17 11:16:00,046 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:16:00,046 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2651자
2025-09-17 11:16:00,046 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 주요 의도는 고객이 해당 프로모션에 가입하여 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용하도록 유도하는 것입니다.

[식별된 가치 제안 목록]
- 2개월 동안 월...
2025-09-17 11:16:00,046 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 11:16:00,046 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 238자
2025-09-17 11:16:00,046 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 11:16:00,047 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-17 11:16:00,047 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['우주패스 Netflix:가입', '2개월 할인 쿠폰:수령', '월 9900원:결제', '넷플릭스 광고형 스탠다드:이용', '웨이브 콘텐츠 팩:이용', '추가 요금:결제']
2025-09-17 11:16:00,047 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('우주패스 Netflix:가입', '2개월 할인 쿠폰:수령'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:이용'), ('우주패스 Netflix:가입', '웨이브 콘텐츠 팩:이용'), ('우주패스 Netflix:가입', '추가 요금:결제'), ('2개월 할인 쿠폰:수령', '월 9900원:결제')]
2025-09-17 11:16:00,047 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 11:16:00,047 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:16:00,047 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-17 11:16:00,047 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 11:16:00,950 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-17 11:16:00,950 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:16:00,950 - mms_extractor - INFO - 🕒 DAG 처리 시간: 23.299초
2025-09-17 11:16:00,950 - mms_extractor - INFO - 📏 DAG 섹션 길이: 238자
2025-09-17 11:16:00,950 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (우주패스 Netflix:가입) -[가입하면]-> (2개월 할인 쿠폰:수령)
(2개월 할인 쿠폰:수령) -[사용하면]-> (월 9900원:결제)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:이용)
(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:이용)
(우주패스 Netflix:가입) -[가입후]-> (추...
2025-09-17 11:16:00,950 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 11:16:00,950 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 11:16:00,951 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-17 11:16:00,951 - __main__ - INFO - DAG 내용 미리보기: ['(2개월 할인 쿠폰:수령) -[사용하면]-> (월 9900원:결제)', '(우주패스 Netflix:가입) -[가입하면]-> (2개월 할인 쿠폰:수령)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:이용)', '(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:이용)', '(우주패스 Netflix:가입) -[가입후]-> (추가 요금:결제) -[결제하면]-> (넷플릭스 스탠다드/프리미엄:이용)']...
2025-09-17 11:16:00,951 - __main__ - INFO - 추출 완료: 38.551초
2025-09-17 11:16:00,951 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:16:00] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:16:00,973 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:16:00] "GET /health HTTP/1.1" 200 -
2025-09-17 11:17:14,606 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:17:14] "GET /health HTTP/1.1" 200 -
2025-09-17 11:17:17,443 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:17:17] "GET /health HTTP/1.1" 200 -
2025-09-17 11:17:17,451 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-17 11:17:17,451 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 11:17:17,451 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 11:17:17,451 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-17 11:17:17,451 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 11:17:17,451 - mms_extractor - INFO - ============================================================
2025-09-17 11:17:17,451 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 11:17:17,451 - mms_extractor - INFO - ============================================================
2025-09-17 11:17:17,451 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-17 11:17:17,451 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-17 11:17:17,451 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 11:17:17,451 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 11:17:17,451 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 11:17:17,451 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 11:17:17,451 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 11:17:17,451 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 11:17:17,451 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 11:17:17,451 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 11:17:17,451 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 11:17:17,452 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-17 11:17:17,454 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 11:17:17,460 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-17 11:17:17,460 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-17 11:17:17,465 - mms_extractor - INFO - 전체 토큰 수: 240개
2025-09-17 11:17:17,465 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-17 11:17:17,465 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix']
2025-09-17 11:17:17,465 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 11:17:17,664 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (2742, 3)
2025-09-17 11:17:17,664 - mms_extractor - INFO - 퍼지 매칭 성공: 2742개 결과
2025-09-17 11:17:17,665 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.4285714285714286}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.4285714285714286}]
2025-09-17 11:17:17,665 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 11:17:17,732 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (2742, 3)
2025-09-17 11:17:17,733 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.4666666666666667}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.30000000000000004}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.30000000000000004}]
2025-09-17 11:17:17,733 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 11:17:17,735 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 71개
2025-09-17 11:17:17,736 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-17 11:17:17,737 - mms_extractor - INFO - 통합된 후보 아이템 수: 75개
2025-09-17 11:17:17,738 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:17:17,740 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (37, 2)
2025-09-17 11:17:17,740 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-17 11:17:17,740 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.29초
2025-09-17 11:17:17,740 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:17:17,740 - mms_extractor - INFO - 매칭된 상품 정보: (37, 2)
2025-09-17 11:17:17,740 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 11:17:17,806 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 11:17:17,806 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 11:17:17,806 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-17 11:17:17,806 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 11:17:17,806 - mms_extractor - INFO - 후보 아이템 리스트 크기: 57개
2025-09-17 11:17:17,806 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:17:17,806 - mms_extractor - INFO - extra_item_pdf 크기: (37, 2)
2025-09-17 11:17:17,806 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 11:17:17,806 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}]
2025-09-17 11:17:17,806 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 11:17:17,806 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 11:17:17,806 - mms_extractor - INFO - 구성된 프롬프트 길이: 7454 문자
2025-09-17 11:17:17,806 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 11:17:17,806 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7454)
2025-09-17 11:17:17,806 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 11:17:17,807 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 11:17:24,235 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:17:24,237 - mms_extractor - INFO - LLM 응답 길이: 857 문자
2025-09-17 11:17:24,237 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "사용"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "사용"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http:/...
2025-09-17 11:17:24,237 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 11:17:24,238 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 11:17:24,238 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 11:17:24,238 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '사용'}, {'name': 'Wavve 콘텐츠 팩', 'action': '사용'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-17 11:17:24,238 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 11:17:24,238 - mms_extractor - INFO - LLM 추출 엔티티: ['T 우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-17 11:17:24,341 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 11:17:24,341 - mms_extractor - INFO - ============================================================
2025-09-17 11:17:24,341 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 11:17:24,341 - mms_extractor - INFO - ============================================================
2025-09-17 11:17:24,341 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-17 11:17:24,341 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-17 11:17:24,341 - mms_extractor - INFO - 상품 수: 3개
2025-09-17 11:17:24,341 - mms_extractor - INFO - 채널 수: 3개
2025-09-17 11:17:24,341 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 11:17:24,341 - mms_extractor - INFO - process_message 실행완료: 6.89초
2025-09-17 11:17:24,341 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 11:17:24,341 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 11:17:24,341 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-17 11:17:24,341 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x126c169f0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x126c16d50> root_client=<openai.OpenAI object at 0x126c32690> root_async_client=<openai.AsyncOpenAI object at 0x126c16b10> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 11:17:24,341 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 11:17:24,341 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-17 11:17:45,446 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:17:45,446 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2327자
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 8월 31일까지 2개월 동안 월 9,900원에 넷플릭스와 웨이브 콘텐츠를 모두 이용할 수 있는 쿠폰을 제공하며, 이를 통해 고객의 구독 서비스 가입을 유도하고 있습니다.

[식별...
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 250자
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 8, 엣지 수: 7
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['웹사이트:접속', '프로모션:확인', '쿠폰:다운로드', '우주패스Netflix:가입', '넷플릭스:사용', '웨이브:사용', 'Wavve콘텐츠팩:사용', '정상가:자동결제']
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('웹사이트:접속', '프로모션:확인'), ('프로모션:확인', '쿠폰:다운로드'), ('쿠폰:다운로드', '우주패스Netflix:가입'), ('우주패스Netflix:가입', '넷플릭스:사용'), ('우주패스Netflix:가입', '웨이브:사용'), ('우주패스Netflix:가입', 'Wavve콘텐츠팩:사용'), ('우주패스Netflix:가입', '정상가:자동결제')]
2025-09-17 11:17:45,447 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 11:17:45,447 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:17:45,447 - utils - INFO - 📊 입력 그래프 - 노드 수: 8, 엣지 수: 7
2025-09-17 11:17:45,447 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 11:17:45,689 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-17 11:17:45,689 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:17:45,689 - mms_extractor - INFO - 🕒 DAG 처리 시간: 21.348초
2025-09-17 11:17:45,689 - mms_extractor - INFO - 📏 DAG 섹션 길이: 250자
2025-09-17 11:17:45,690 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (웹사이트:접속) -[접속하면]-> (프로모션:확인)
(프로모션:확인) -[확인하면]-> (쿠폰:다운로드)
(쿠폰:다운로드) -[다운로드후]-> (우주패스Netflix:가입)
(우주패스Netflix:가입) -[가입하면]-> (넷플릭스:사용)
(우주패스Netflix:가입) -[가입하면]-> (웨이브:사용)
(우주패스Netflix:가입) -[가입하면]-> (W...
2025-09-17 11:17:45,690 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 11:17:45,690 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 11:17:45,690 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 7자
2025-09-17 11:17:45,690 - __main__ - INFO - DAG 내용 미리보기: ['(우주패스Netflix:가입) -[2개월후]-> (정상가:자동결제)', '(우주패스Netflix:가입) -[가입하면]-> (Wavve콘텐츠팩:사용)', '(우주패스Netflix:가입) -[가입하면]-> (넷플릭스:사용)', '(우주패스Netflix:가입) -[가입하면]-> (웨이브:사용)', '(웹사이트:접속) -[접속하면]-> (프로모션:확인)', '(쿠폰:다운로드) -[다운로드후]-> (우주패스Netflix:가입)', '(프로모션:확인) -[확인하면]-> (쿠폰:다운로드)']...
2025-09-17 11:17:45,690 - __main__ - INFO - 추출 완료: 28.239초
2025-09-17 11:17:45,690 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:17:45] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:17:45,710 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:17:45] "GET /health HTTP/1.1" 200 -
2025-09-17 11:21:56,048 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:21:56] "GET /health HTTP/1.1" 200 -
2025-09-17 11:21:56,058 - __main__ - INFO - 🎯 DAG 추출 요청됨 - LLM: ax, 메시지 길이: 614자
2025-09-17 11:21:56,058 - __main__ - INFO - 데이터 소스로 메시지 처리 중: local
2025-09-17 11:21:56,058 - __main__ - INFO - DAG 추출과 함께 순차 처리 시작
2025-09-17 11:21:56,058 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 시작: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스...
2025-09-17 11:21:56,058 - mms_extractor - INFO - 순차적 처리로 메인 추출 및 DAG 추출 수행
2025-09-17 11:21:56,058 - mms_extractor - INFO - ============================================================
2025-09-17 11:21:56,058 - mms_extractor - INFO - 🚀 MMS 메시지 처리 시작
2025-09-17 11:21:56,058 - mms_extractor - INFO - ============================================================
2025-09-17 11:21:56,058 - mms_extractor - INFO - 메시지 내용: (광고)[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네! 
#04 고객님,
넷플릭스와 웨이브 둘 다 보고 싶었지만, 가격 때문에 망설이셨다면 지금이 바로 기회! 
오직 T 우주에서만, 
2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 즐기실 수 있습니다.
8월 31일까지만 드리는 혜택이니, 지금 바로 가입해 보세요! 

■ 우주패스 Netfl...
2025-09-17 11:21:56,058 - mms_extractor - INFO - 메시지 길이: 614 문자
2025-09-17 11:21:56,058 - mms_extractor - INFO - === 현재 추출기 설정 ===
2025-09-17 11:21:56,058 - mms_extractor - INFO - 데이터 소스: local
2025-09-17 11:21:56,058 - mms_extractor - INFO - 상품 정보 추출 모드: llm
2025-09-17 11:21:56,058 - mms_extractor - INFO - 엔티티 추출 모드: logic
2025-09-17 11:21:56,058 - mms_extractor - INFO - LLM 모델: ax
2025-09-17 11:21:56,058 - mms_extractor - INFO - 상품 데이터 크기: (21522, 9)
2025-09-17 11:21:56,059 - mms_extractor - INFO - 프로그램 데이터 크기: (25, 6)
2025-09-17 11:21:56,059 - mms_extractor - INFO - ============================== 1단계: 엔티티 추출 ==============================
2025-09-17 11:21:56,059 - mms_extractor - INFO - === Kiwi 기반 엔티티 추출 시작 ===
2025-09-17 11:21:56,059 - mms_extractor - INFO - 처리할 메시지 길이: 613 문자
2025-09-17 11:21:56,060 - mms_extractor - INFO - 매칭할 상품 별칭 수: 16403개
2025-09-17 11:21:56,065 - mms_extractor - INFO - 분할된 문장 수: 13개
2025-09-17 11:21:56,065 - mms_extractor - INFO - 필터링된 문장들: [' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', ' 고객님 넷플릭스와 웨이브 둘 다 싶었지만 가격 때문에 망설이셨다면 지금이 바로 기회 ', '오직 T 우주에서만 동안 월 에 넷플릭스와 웨이브 모두 즐기실 수 있습니다 ']...
2025-09-17 11:21:56,069 - mms_extractor - INFO - 전체 토큰 수: 240개
2025-09-17 11:21:56,069 - mms_extractor - INFO - NNP 태그 토큰들: ['넷플릭스', '넷플릭스', '넷플릭스', 'Netflix', 'Wavve 콘텐츠 팩', 'Netflix']
2025-09-17 11:21:56,069 - mms_extractor - INFO - 필터링 후 Kiwi 추출 엔티티: ['Wavve 콘텐츠 팩', '넷플릭스', 'Netflix']
2025-09-17 11:21:56,069 - mms_extractor - INFO - 퍼지 매칭 시작...
2025-09-17 11:21:56,277 - mms_extractor - INFO - 퍼지 매칭 결과 크기: (2742, 3)
2025-09-17 11:21:56,277 - mms_extractor - INFO - 퍼지 매칭 성공: 2742개 결과
2025-09-17 11:21:56,278 - mms_extractor - INFO - 퍼지 매칭 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.5}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.4285714285714286}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.4285714285714286}]
2025-09-17 11:21:56,278 - mms_extractor - INFO - 시퀀스 유사도 계산 시작...
2025-09-17 11:21:56,344 - mms_extractor - INFO - 시퀀스 유사도 결과 크기: (2742, 3)
2025-09-17 11:21:56,345 - mms_extractor - INFO - 시퀀스 유사도 샘플: [{'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': '우주패스 넷플릭스 인증', 'sim': 0.4666666666666667}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 2일', 'sim': 0.30000000000000004}, {'sent': ' 광고 SKT 넷플릭스 웨이브 월 이게 되네 ', 'item_nm_alias': 'IB 이심 6일', 'sim': 0.30000000000000004}]
2025-09-17 11:21:56,345 - mms_extractor - INFO - 사용할 유사도 임계값: 0.7
2025-09-17 11:21:56,346 - mms_extractor - INFO - 임계값 필터링 후 후보 아이템 수: 71개
2025-09-17 11:21:56,348 - mms_extractor - INFO - Kiwi 엔티티 매칭 결과: 4개
2025-09-17 11:21:56,348 - mms_extractor - INFO - 통합된 후보 아이템 수: 75개
2025-09-17 11:21:56,349 - mms_extractor - INFO - 최종 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:21:56,351 - mms_extractor - INFO - 최종 상품 정보 DataFrame 크기: (37, 2)
2025-09-17 11:21:56,351 - mms_extractor - INFO - 최종 상품 정보 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}, {'item_nm': 'Netflix', 'item_id': ['PR00000501', 'PR00000501']}]
2025-09-17 11:21:56,352 - mms_extractor - INFO - extract_entities_from_kiwi 실행완료: 0.29초
2025-09-17 11:21:56,352 - mms_extractor - INFO - 추출된 후보 엔티티: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:21:56,352 - mms_extractor - INFO - 매칭된 상품 정보: (37, 2)
2025-09-17 11:21:56,352 - mms_extractor - INFO - ============================== 2단계: 프로그램 분류 ==============================
2025-09-17 11:21:56,500 - mms_extractor - INFO - 프로그램 분류 결과 키: ['pgm_cand_info', 'similarities', 'pgm_pdf_tmp']
2025-09-17 11:21:56,500 - mms_extractor - INFO - ============================== 3단계: RAG 컨텍스트 구성 ==============================
2025-09-17 11:21:56,500 - mms_extractor - INFO - 프로그램 분류 컨텍스트 길이: 423 문자
2025-09-17 11:21:56,500 - mms_extractor - INFO - ============================== 4단계: 제품 정보 준비 ==============================
2025-09-17 11:21:56,500 - mms_extractor - INFO - 후보 아이템 리스트 크기: 57개
2025-09-17 11:21:56,500 - mms_extractor - INFO - 후보 아이템 리스트: ['Netflix', 'Wavve 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩', '넷플릭스', 'T 우주패스 Netflix', 'Netflix 광고형 스탠다드 이용권', 'Wavve 콘텐츠 팩(TV)', '우주패스 Netflix 추가혜택', 'Netflix 스탠다드 이용권', 'Wavve 콘텐츠 팩 프리미엄 연간', 'FLO 콘텐츠 팩', 'Wavve 콘텐츠 팩 플러스', 'Wavve 콘텐츠 팩(티비)', 'Wavve 콘텐츠 팩 연간', 'Wavve 콘텐츠 팩 프리미엄_인증', '우주패스 Netflix 인증', 'wavve 콘텐츠 팩 프리미엄_할인1', 'Wavve 콘텐츠 팩 plus', '멤버십 미가입자', '멤버십가입', 'Wavve 콘텐츠 팩 PLUS', '오다', 'Wavve 콘텐츠 팩 Plus', 'Wavve 콘텐츠 팩(이벤트)', 'Wavve 콘텐츠 팩 이용권', '티빙 광고형 스탠다드', 'Netflix 프리미엄 이용권', '웨이브 콘텐츠 팩 프리미엄', 'Wavve 콘텐츠 팩_인증', 'tving 광고형 스탠다드', 'TVING 광고형 스탠다드', '우주패스 life_T', 'Wavve 콘텐츠 팩 플러스 (구)', '타다 쿠폰', 'Netflix 단독', 'T 서비스', 'Wavve 콘텐츠 팩 premium', 'Wavve 콘텐츠 팩 Premium', 'Wavve 콘텐츠 팩 PREMIUM', 'Wavve 콘텐츠 팩_할인1', 'Wavve 콘텐츠 팩_할인2', '플로 콘텐츠 팩', 'T 우주패스 넷플릭스', 'Wavve 콘텐츠 팩 플러스 연간', 'Wavve 콘텐츠 팩 PLUS (구)', 'Wavve 콘텐츠 팩 Plus (구)', 'Wavve 콘텐츠 팩 plus (구)', 'FLO 콘텐츠 팩 플러스', 'Wavve 앤 DATA 프리미엄', '넷플릭스 광고형 스탠다드 이용권', 'Wavve 앤 Data 프리미엄', 'Wavve 앤 data 프리미엄', 'T 우주패스 DIY', 'T 우주패스 100', 'Wavve 앤 데이터 프리미엄', '클럽T 스탠다드', '클럽T 프리미엄']
2025-09-17 11:21:56,501 - mms_extractor - INFO - extra_item_pdf 크기: (37, 2)
2025-09-17 11:21:56,501 - mms_extractor - INFO - extra_item_pdf 컬럼들: ['item_nm', 'item_id']
2025-09-17 11:21:56,501 - mms_extractor - INFO - extra_item_pdf 샘플: [{'item_nm': 'FLO 콘텐츠 팩', 'item_id': ['PR00000217', 'PR00000217']}, {'item_nm': 'FLO 콘텐츠 팩 플러스', 'item_id': ['PR00000218']}]
2025-09-17 11:21:56,501 - mms_extractor - INFO - LLM 모드: 참고용 후보 상품 목록을 RAG 컨텍스트에 추가
2025-09-17 11:21:56,501 - mms_extractor - INFO - ============================== 5단계: LLM 호출 ==============================
2025-09-17 11:21:56,501 - mms_extractor - INFO - 구성된 프롬프트 길이: 7454 문자
2025-09-17 11:21:56,501 - mms_extractor - INFO - RAG 컨텍스트 포함 여부: True
2025-09-17 11:21:56,501 - mms_extractor - INFO - 프롬프트 저장됨: main_extraction_prompt (길이: 7454)
2025-09-17 11:21:56,501 - mms_extractor - INFO - 현재 저장된 프롬프트 수: 1
2025-09-17 11:21:56,501 - mms_extractor - INFO - 저장된 프롬프트 키들: ['main_extraction_prompt']
2025-09-17 11:22:02,998 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:22:03,002 - mms_extractor - INFO - LLM 응답 길이: 857 문자
2025-09-17 11:22:03,002 - mms_extractor - INFO - LLM 응답 내용 (처음 500자): ```json
{
    "title": "[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!",
    "purpose": [
        "상품 가입 유도",
        "혜택 안내",
        "쿠폰 제공 안내"
    ],
    "product": [
        {
            "name": "T 우주패스 Netflix",
            "action": "가입"
        },
        {
            "name": "Netflix 광고형 스탠다드",
            "action": "사용"
        },
        {
            "name": "Wavve 콘텐츠 팩",
            "action": "사용"
        }
    ],
    "channel": [
        {
            "type": "URL",
            "value": "http:/...
2025-09-17 11:22:03,003 - mms_extractor - INFO - ============================== 6단계: JSON 파싱 ==============================
2025-09-17 11:22:03,003 - mms_extractor - INFO - 추출된 JSON 객체 수: 1개
2025-09-17 11:22:03,004 - mms_extractor - INFO - 파싱된 JSON 객체 키: ['title', 'purpose', 'product', 'channel', 'pgm']
2025-09-17 11:22:03,004 - mms_extractor - INFO - 파싱된 JSON 내용: {'title': '[SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!', 'purpose': ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내'], 'product': [{'name': 'T 우주패스 Netflix', 'action': '가입'}, {'name': 'Netflix 광고형 스탠다드', 'action': '사용'}, {'name': 'Wavve 콘텐츠 팩', 'action': '사용'}], 'channel': [{'type': 'URL', 'value': 'http://t-mms.kr/jAs/#74', 'action': '추가 정보'}, {'type': '전화번호', 'value': '1505', 'action': '문의'}, {'type': '전화번호', 'value': '1504', 'action': '수신 거부'}], 'pgm': ['상품및부가서비스가입유도_구독', '사용법/혜택/이벤트안내_구독']}
2025-09-17 11:22:03,004 - mms_extractor - INFO - ============================== 7단계: 최종 결과 구성 ==============================
2025-09-17 11:22:03,005 - mms_extractor - INFO - LLM 추출 엔티티: ['T 우주패스 Netflix', 'Netflix 광고형 스탠다드', 'Wavve 콘텐츠 팩']
2025-09-17 11:22:03,106 - mms_extractor - INFO - ============================== 8단계: 결과 검증 ==============================
2025-09-17 11:22:03,106 - mms_extractor - INFO - ============================================================
2025-09-17 11:22:03,106 - mms_extractor - INFO - ✅ 메시지 처리 완료 - 최종 결과 요약
2025-09-17 11:22:03,106 - mms_extractor - INFO - ============================================================
2025-09-17 11:22:03,106 - mms_extractor - INFO - 제목: [SKT] 넷플릭스+웨이브 월 9,900원, 이게 되네!
2025-09-17 11:22:03,106 - mms_extractor - INFO - 목적: ['상품 가입 유도', '혜택 안내', '쿠폰 제공 안내']
2025-09-17 11:22:03,106 - mms_extractor - INFO - 상품 수: 3개
2025-09-17 11:22:03,106 - mms_extractor - INFO - 채널 수: 3개
2025-09-17 11:22:03,106 - mms_extractor - INFO - 프로그램 수: 2개
2025-09-17 11:22:03,106 - mms_extractor - INFO - process_message 실행완료: 7.05초
2025-09-17 11:22:03,106 - mms_extractor - INFO - ============================== DAG 추출 시작 ==============================
2025-09-17 11:22:03,106 - entity_dag_extractor - INFO - 🚀 DAG 추출 프로세스 시작
2025-09-17 11:22:03,106 - entity_dag_extractor - INFO - 📝 입력 메시지 길이: 614자
2025-09-17 11:22:03,106 - entity_dag_extractor - INFO - 🤖 사용 LLM 모델: client=<openai.resources.chat.completions.completions.Completions object at 0x126c169f0> async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x126c16d50> root_client=<openai.OpenAI object at 0x126c32690> root_async_client=<openai.AsyncOpenAI object at 0x126c16b10> model_name='skt/ax4' temperature=0.0 model_kwargs={} openai_api_key=SecretStr('**********') openai_api_base='https://api.platform.a15t.com/v1' max_tokens=4000
2025-09-17 11:22:03,106 - entity_dag_extractor - INFO - 🤖 LLM에 DAG 추출 요청 중...
2025-09-17 11:22:03,106 - entity_dag_extractor - INFO - 📏 프롬프트 길이: 3599자
2025-09-17 11:22:21,740 - httpx - INFO - HTTP Request: POST https://api.platform.a15t.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:22:21,742 - entity_dag_extractor - INFO - 📝 LLM 응답 길이: 2105자
2025-09-17 11:22:21,742 - entity_dag_extractor - INFO - 📄 LLM 응답 미리보기: ## 1. 메시지 분석

```
[메시지 요약 및 핵심 의도]
SKT는 넷플릭스와 웨이브를 동시에 저렴하게 이용할 수 있는 '우주패스 Netflix' 프로모션을 광고하고 있습니다. 주요 의도는 고객이 해당 프로모션에 가입하여 2개월 동안 월 9,900원에 넷플릭스와 웨이브를 모두 이용하도록 유도하는 것입니다.

[식별된 가치 제안 목록]
- 2개월 동안 월...
2025-09-17 11:22:21,742 - entity_dag_extractor - INFO - 🔍 DAG 섹션 추출 중...
2025-09-17 11:22:21,742 - entity_dag_extractor - INFO - 📄 추출된 DAG 섹션 길이: 207자
2025-09-17 11:22:21,743 - entity_dag_extractor - INFO - 🔗 DAG 파싱 중...
2025-09-17 11:22:21,743 - entity_dag_extractor - INFO - 📊 파싱된 DAG - 노드 수: 6, 엣지 수: 5
2025-09-17 11:22:21,743 - entity_dag_extractor - INFO - 🎯 DAG 노드 목록: ['T 우주 웹사이트:접속', '우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용', '웨이브 콘텐츠 팩:사용', '쿠폰:수령', '2개월 동안 월 9,900원:할인']
2025-09-17 11:22:21,743 - entity_dag_extractor - INFO - 🔗 DAG 엣지 목록: [('T 우주 웹사이트:접속', '우주패스 Netflix:가입'), ('우주패스 Netflix:가입', '넷플릭스 광고형 스탠다드:사용'), ('우주패스 Netflix:가입', '웨이브 콘텐츠 팩:사용'), ('우주패스 Netflix:가입', '쿠폰:수령'), ('쿠폰:수령', '2개월 동안 월 9,900원:할인')]
2025-09-17 11:22:21,743 - entity_dag_extractor - INFO - ✅ DAG 추출 프로세스 완료
2025-09-17 11:22:21,743 - utils - INFO - 🎨 DAG 다이어그램 생성 시작 - 파일명: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:22:21,743 - utils - INFO - 📊 입력 그래프 - 노드 수: 6, 엣지 수: 5
2025-09-17 11:22:21,744 - utils - INFO - 🖼️ DAG 이미지 렌더링 중...
2025-09-17 11:22:22,783 - utils - INFO - ✅ DAG 다이어그램 생성 완료: dag_images/dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7.png
2025-09-17 11:22:22,783 - mms_extractor - INFO - ✅ DAG 추출 완료: dag_95754a0322c7153287e6c564437447a1040ee98e573de11f91fc3d4793120ca7
2025-09-17 11:22:22,783 - mms_extractor - INFO - 🕒 DAG 처리 시간: 19.677초
2025-09-17 11:22:22,783 - mms_extractor - INFO - 📏 DAG 섹션 길이: 207자
2025-09-17 11:22:22,783 - mms_extractor - INFO - 📄 DAG 내용 미리보기: (T 우주 웹사이트:접속) -[접속하면]-> (우주패스 Netflix:가입)
(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)
(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:사용)
(우주패스 Netflix:가입) -[가입하면]-> (쿠폰:수령)
(쿠폰:수령) -[사용하면]-> (2개월 동안 월 9,9...
2025-09-17 11:22:22,783 - mms_extractor - INFO - 워커 프로세스에서 메시지 처리 완료
2025-09-17 11:22:22,783 - __main__ - INFO - 추출 과정에서 캡처된 프롬프트: 2개
2025-09-17 11:22:22,783 - __main__ - INFO - ✅ DAG 추출 성공 - 길이: 5자
2025-09-17 11:22:22,783 - __main__ - INFO - DAG 내용 미리보기: ['(T 우주 웹사이트:접속) -[접속하면]-> (우주패스 Netflix:가입)', '(우주패스 Netflix:가입) -[가입하면]-> (넷플릭스 광고형 스탠다드:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (웨이브 콘텐츠 팩:사용)', '(우주패스 Netflix:가입) -[가입하면]-> (쿠폰:수령)', '(쿠폰:수령) -[사용하면]-> (2개월 동안 월 9,900원:할인)']...
2025-09-17 11:22:22,783 - __main__ - INFO - 추출 완료: 26.725초
2025-09-17 11:22:22,784 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:22:22] "POST /extract HTTP/1.1" 200 -
2025-09-17 11:22:22,807 - werkzeug - INFO - 127.0.0.1 - - [17/Sep/2025 11:22:22] "GET /health HTTP/1.1" 200 -
